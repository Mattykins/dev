{
  "version": 3,
  "sources": ["../../../../../phaser-genesis/src/config/const.ts", "../../../../../phaser-genesis/src/config/ConfigStore.ts", "../../../../../phaser-genesis/src/config/backgroundcolor/SetBackgroundColor.ts", "../../../../../phaser-genesis/src/config/backgroundcolor/BackgroundColor.ts", "../../../../../phaser-genesis/src/config/banner/SetBanner.ts", "../../../../../phaser-genesis/src/config/batchsize/SetBatchSize.ts", "../../../../../phaser-genesis/src/config/size/GetHeight.ts", "../../../../../phaser-genesis/src/config/size/GetResolution.ts", "../../../../../phaser-genesis/src/config/size/GetWidth.ts", "../../../../../phaser-genesis/src/config/size/SetSize.ts", "../../../../../phaser-genesis/src/renderer/BindingQueue.ts", "../../../../../phaser-genesis/src/config/backgroundcolor/GetBackgroundColor.ts", "../../../../../phaser-genesis/src/config/renderer/SetRenderer.ts", "../../../../../phaser-genesis/src/config/defaultorigin/SetDefaultOrigin.ts", "../../../../../phaser-genesis/src/config/globalvar/SetGlobalVar.ts", "../../../../../phaser-genesis/src/config/globalvar/GlobalVar.ts", "../../../../../phaser-genesis/src/config/maxtextures/SetMaxTextures.ts", "../../../../../phaser-genesis/src/dom/GetElement.ts", "../../../../../phaser-genesis/src/config/parent/SetParent.ts", "../../../../../phaser-genesis/src/config/parent/Parent.ts", "../../../../../phaser-genesis/src/config/scenes/SetScenes.ts", "../../../../../phaser-genesis/src/config/scenes/Scenes.ts", "../../../../../phaser-genesis/src/renderer/webgl1/GL.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/Draw.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/Flush.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/End.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/GetCompressedTextures.ts", "../../../../../phaser-genesis/src/renderer/webgl1/colors/GetRGBArray.ts", "../../../../../phaser-genesis/src/config/webglcontext/GetWebGLContext.ts", "../../../../../phaser-genesis/src/renderer/webgl1/fbo/CreateFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/CreateGLTexture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/fbo/DeleteFramebuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/DeleteGLTexture.ts", "../../../../../phaser-genesis/src/math/pow2/IsSizePowerOfTwo.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/SetGLTextureFilterMode.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/UpdateGLTexture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/textures/GLTextureBinding.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/ProcessBindingQueue.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/BlendModeStack.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/FramebufferStack.ts", "../../../../../phaser-genesis/src/config/batchsize/GetBatchSize.ts", "../../../../../phaser-genesis/src/config/maxtextures/GetMaxTextures.ts", "../../../../../phaser-genesis/src/renderer/webgl1/buffers/DeleteGLBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/buffers/VertexBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/buffers/IndexedVertexBuffer.ts", "../../../../../phaser-genesis/src/utils/array/matrix/CheckMatrix.ts", "../../../../../phaser-genesis/src/utils/array/matrix/MatrixToString.ts", "../../../../../phaser-genesis/src/utils/array/matrix/ReverseColumns.ts", "../../../../../phaser-genesis/src/utils/array/matrix/ReverseRows.ts", "../../../../../phaser-genesis/src/utils/array/matrix/TransposeMatrix.ts", "../../../../../phaser-genesis/src/utils/array/matrix/RotateMatrix.ts", "../../../../../phaser-genesis/src/utils/array/matrix/Rotate180.ts", "../../../../../phaser-genesis/src/utils/array/matrix/RotateLeft.ts", "../../../../../phaser-genesis/src/utils/array/matrix/RotateRight.ts", "../../../../../phaser-genesis/src/utils/array/NumberArray.ts", "../../../../../phaser-genesis/src/math/RoundAwayFromZero.ts", "../../../../../phaser-genesis/src/utils/array/NumberArrayStep.ts", "../../../../../phaser-genesis/src/utils/base64/ArrayBufferToBase64.ts", "../../../../../phaser-genesis/src/utils/base64/Base64ToArrayBuffer.ts", "../../../../../phaser-genesis/src/utils/string/RemoveAt.ts", "../../../../../phaser-genesis/src/utils/string/Reverse.ts", "../../../../../phaser-genesis/src/utils/string/UppercaseFirst.ts", "../../../../../phaser-genesis/src/utils/NOOP.ts", "../../../../../phaser-genesis/src/math/mat4/Matrix4.ts", "../../../../../phaser-genesis/src/math/mat4/Mat4Ortho.ts", "../../../../../phaser-genesis/src/renderer/webgl1/GL_CONST.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateAttributes.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/DeleteShaders.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateProgram.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateUniformSetter.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/CreateUniforms.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/DefaultQuadAttributes.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/DefaultQuadUniforms.ts", "../../../../../phaser-genesis/src/renderer/webgl1/fbo/CreateDepthBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/glsl/SINGLE_QUAD_FRAG.ts", "../../../../../phaser-genesis/src/renderer/webgl1/glsl/SINGLE_QUAD_VERT.ts", "../../../../../phaser-genesis/node_modules/bitecs/src/Storage.js", "../../../../../phaser-genesis/node_modules/bitecs/src/Util.js", "../../../../../phaser-genesis/node_modules/bitecs/src/Serialize.js", "../../../../../phaser-genesis/node_modules/bitecs/src/Entity.js", "../../../../../phaser-genesis/node_modules/bitecs/src/Query.js", "../../../../../phaser-genesis/node_modules/bitecs/src/Component.js", "../../../../../phaser-genesis/node_modules/bitecs/src/World.js", "../../../../../phaser-genesis/node_modules/bitecs/src/System.js", "../../../../../phaser-genesis/node_modules/bitecs/src/index.js", "../../../../../phaser-genesis/src/components/transform/Extent2DComponent.ts", "../../../../../phaser-genesis/src/components/dirty/DirtyComponent.ts", "../../../../../phaser-genesis/src/GameObjectWorld.ts", "../../../../../phaser-genesis/src/components/dirty/AddDirtyComponent.ts", "../../../../../phaser-genesis/src/components/dirty/ClearDirtyDisplayList.ts", "../../../../../phaser-genesis/src/components/dirty/HasDirtyChildCache.ts", "../../../../../phaser-genesis/src/components/dirty/HasDirtyDisplayList.ts", "../../../../../phaser-genesis/src/components/dirty/SetDirtyChildCache.ts", "../../../../../phaser-genesis/src/components/dirty/SetDirtyDisplayList.ts", "../../../../../phaser-genesis/src/GameInstance.ts", "../../../../../phaser-genesis/src/components/hierarchy/HierarchyComponent.ts", "../../../../../phaser-genesis/src/components/hierarchy/AddHierarchyComponent.ts", "../../../../../phaser-genesis/src/gameobjects/GameObjectCache.ts", "../../../../../phaser-genesis/src/components/hierarchy/ClearWorldAndParentID.ts", "../../../../../phaser-genesis/src/components/bounds/BoundsComponent.ts", "../../../../../phaser-genesis/src/components/color/ColorComponent.ts", "../../../../../phaser-genesis/src/components/color/AddColorComponent.ts", "../../../../../phaser-genesis/src/components/vertices/AddQuadVertex.ts", "../../../../../phaser-genesis/src/components/vertices/QuadVertexComponent.ts", "../../../../../phaser-genesis/src/components/vertices/SetQuadPosition.ts", "../../../../../phaser-genesis/src/components/vertices/SetUV.ts", "../../../../../phaser-genesis/src/components/transform/WorldMatrix2DComponent.ts", "../../../../../phaser-genesis/src/components/vertices/UpdateVertexPositionSystem.ts", "../../../../../phaser-genesis/src/components/vertices/SetQuadColor.ts", "../../../../../phaser-genesis/src/components/color/PackQuadColorsSystem.ts", "../../../../../phaser-genesis/src/components/color/SetTint.ts", "../../../../../phaser-genesis/src/components/permissions/PermissionsComponent.ts", "../../../../../phaser-genesis/src/components/permissions/AddPermissionsComponent.ts", "../../../../../phaser-genesis/src/components/permissions/WillCacheChildren.ts", "../../../../../phaser-genesis/src/components/permissions/WillRender.ts", "../../../../../phaser-genesis/src/components/permissions/WillRenderChildren.ts", "../../../../../phaser-genesis/src/components/permissions/WillUpdate.ts", "../../../../../phaser-genesis/src/components/permissions/WillUpdateChildren.ts", "../../../../../phaser-genesis/src/components/transform/LocalMatrix2DComponent.ts", "../../../../../phaser-genesis/src/components/transform/Transform2DComponent.ts", "../../../../../phaser-genesis/src/components/transform/AddTransform2DComponent.ts", "../../../../../phaser-genesis/src/components/transform/GetVertices.ts", "../../../../../phaser-genesis/src/components/transform/InvalidateLocalMatrix2DComponent.ts", "../../../../../phaser-genesis/src/components/transform/UpdateExtent.ts", "../../../../../phaser-genesis/src/components/transform/Origin.ts", "../../../../../phaser-genesis/src/components/transform/Position.ts", "../../../../../phaser-genesis/src/gameobjects/DIRTY_CONST.ts", "../../../../../phaser-genesis/src/renderer/webgl1/colors/PackColors.ts", "../../../../../phaser-genesis/src/components/transform/UpdateVertices.ts", "../../../../../phaser-genesis/src/components/transform/PreRenderVertices.ts", "../../../../../phaser-genesis/src/components/transform/Scale.ts", "../../../../../phaser-genesis/src/components/transform/Size.ts", "../../../../../phaser-genesis/src/components/transform/Skew.ts", "../../../../../phaser-genesis/src/components/transform/UpdateLocalTransform2DSystem.ts", "../../../../../phaser-genesis/src/components/transform/CopyLocalToWorld.ts", "../../../../../phaser-genesis/src/components/transform/CopyWorldToWorld.ts", "../../../../../phaser-genesis/src/components/transform/MultiplyLocalWithWorld.ts", "../../../../../phaser-genesis/src/components/permissions/WillTransformChildren.ts", "../../../../../phaser-genesis/src/components/transform/UpdateWorldTransform.ts", "../../../../../phaser-genesis/src/components/transform/UpdateWorldTransform2DSystem.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/GetQuadBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/BatchQuad.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/GetVertexBufferEntry.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/BatchTexturedQuad.ts", "../../../../../phaser-genesis/src/components/vertices/SetQuadTextureIndex.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/BatchTexturedQuadBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/GetTriBuffer.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/BatchTriangle.ts", "../../../../../phaser-genesis/src/math/angle/AngleBetween.ts", "../../../../../phaser-genesis/src/math/angle/AngleBetweenY.ts", "../../../../../phaser-genesis/src/math/const.ts", "../../../../../phaser-genesis/src/math/angle/CounterClockwise.ts", "../../../../../phaser-genesis/src/math/angle/NormalizeAngle.ts", "../../../../../phaser-genesis/src/math/angle/ReverseAngle.ts", "../../../../../phaser-genesis/src/math/angle/RotateAngleTo.ts", "../../../../../phaser-genesis/src/math/angle/ShortestAngleBetween.ts", "../../../../../phaser-genesis/src/math/Wrap.ts", "../../../../../phaser-genesis/src/math/angle/WrapAngle.ts", "../../../../../phaser-genesis/src/math/angle/WrapAngleDegrees.ts", "../../../../../phaser-genesis/src/math/angle/index.ts", "../../../../../phaser-genesis/src/math/easing/back/In.ts", "../../../../../phaser-genesis/src/math/easing/back/InOut.ts", "../../../../../phaser-genesis/src/math/easing/back/Out.ts", "../../../../../phaser-genesis/src/math/easing/bounce/In.ts", "../../../../../phaser-genesis/src/math/easing/bounce/InOut.ts", "../../../../../phaser-genesis/src/math/easing/bounce/Out.ts", "../../../../../phaser-genesis/src/math/easing/circular/In.ts", "../../../../../phaser-genesis/src/math/easing/circular/InOut.ts", "../../../../../phaser-genesis/src/math/easing/circular/Out.ts", "../../../../../phaser-genesis/src/math/easing/cubic/In.ts", "../../../../../phaser-genesis/src/math/easing/cubic/InOut.ts", "../../../../../phaser-genesis/src/math/easing/cubic/Out.ts", "../../../../../phaser-genesis/src/math/easing/elastic/In.ts", "../../../../../phaser-genesis/src/math/easing/elastic/InOut.ts", "../../../../../phaser-genesis/src/math/easing/elastic/Out.ts", "../../../../../phaser-genesis/src/math/easing/expo/In.ts", "../../../../../phaser-genesis/src/math/easing/expo/InOut.ts", "../../../../../phaser-genesis/src/math/easing/expo/Out.ts", "../../../../../phaser-genesis/src/math/easing/quadratic/In.ts", "../../../../../phaser-genesis/src/math/easing/quadratic/InOut.ts", "../../../../../phaser-genesis/src/math/easing/quadratic/Out.ts", "../../../../../phaser-genesis/src/math/easing/quartic/In.ts", "../../../../../phaser-genesis/src/math/easing/quartic/InOut.ts", "../../../../../phaser-genesis/src/math/easing/quartic/Out.ts", "../../../../../phaser-genesis/src/math/easing/quintic/In.ts", "../../../../../phaser-genesis/src/math/easing/quintic/InOut.ts", "../../../../../phaser-genesis/src/math/easing/quintic/Out.ts", "../../../../../phaser-genesis/src/math/easing/sine/In.ts", "../../../../../phaser-genesis/src/math/easing/sine/InOut.ts", "../../../../../phaser-genesis/src/math/easing/sine/Out.ts", "../../../../../phaser-genesis/src/math/easing/Linear.ts", "../../../../../phaser-genesis/src/math/easing/Stepped.ts", "../../../../../phaser-genesis/src/math/easing/GetEase.ts", "../../../../../phaser-genesis/src/math/fuzzy/FuzzyCeil.ts", "../../../../../phaser-genesis/src/math/fuzzy/FuzzyEqual.ts", "../../../../../phaser-genesis/src/math/fuzzy/FuzzyFloor.ts", "../../../../../phaser-genesis/src/math/fuzzy/FuzzyGreaterThan.ts", "../../../../../phaser-genesis/src/math/fuzzy/FuzzyLessThan.ts", "../../../../../phaser-genesis/src/math/fuzzy/index.ts", "../../../../../phaser-genesis/src/math/Factorial.ts", "../../../../../phaser-genesis/src/math/Bernstein.ts", "../../../../../phaser-genesis/src/math/interpolation/BezierInterpolation.ts", "../../../../../phaser-genesis/src/math/interpolation/CatmullRomInterpolation.ts", "../../../../../phaser-genesis/src/math/interpolation/CubicBezierInterpolation.ts", "../../../../../phaser-genesis/src/math/Linear.ts", "../../../../../phaser-genesis/src/math/interpolation/LinearInterpolation.ts", "../../../../../phaser-genesis/src/math/interpolation/QuadraticBezierInterpolation.ts", "../../../../../phaser-genesis/src/math/SmoothStep.ts", "../../../../../phaser-genesis/src/math/interpolation/SmoothStepInterpolation.ts", "../../../../../phaser-genesis/src/math/SmootherStep.ts", "../../../../../phaser-genesis/src/math/interpolation/SmootherStepInterpolation.ts", "../../../../../phaser-genesis/src/math/interpolation/index.ts", "../../../../../phaser-genesis/src/math/mat2d/Matrix2D.ts", "../../../../../phaser-genesis/src/math/mat2d/Mat2dEquals.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3.ts", "../../../../../phaser-genesis/src/math/mat4/Mat4Identity.ts", "../../../../../phaser-genesis/src/math/pow2/GetPowerOfTwo.ts", "../../../../../phaser-genesis/src/math/pow2/IsValuePowerOfTwo.ts", "../../../../../phaser-genesis/src/math/Clamp.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Backward.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Down.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Forward.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Left.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Right.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Up.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Zero.ts", "../../../../../phaser-genesis/src/math/vec3/const.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Project.ts", "../../../../../phaser-genesis/src/math/vec3/Vec3Unproject.ts", "../../../../../phaser-genesis/src/math/snap/SnapCeil.ts", "../../../../../phaser-genesis/src/math/snap/SnapFloor.ts", "../../../../../phaser-genesis/src/math/snap/SnapTo.ts", "../../../../../phaser-genesis/src/math/snap/index.ts", "../../../../../phaser-genesis/src/math/Average.ts", "../../../../../phaser-genesis/src/math/CeilTo.ts", "../../../../../phaser-genesis/src/math/DegToRad.ts", "../../../../../phaser-genesis/src/math/Difference.ts", "../../../../../phaser-genesis/src/math/FloorTo.ts", "../../../../../phaser-genesis/src/math/FromPercent.ts", "../../../../../phaser-genesis/src/math/GetSpeed.ts", "../../../../../phaser-genesis/src/math/MaxAdd.ts", "../../../../../phaser-genesis/src/math/MinSub.ts", "../../../../../phaser-genesis/src/math/Percent.ts", "../../../../../phaser-genesis/src/math/RadToDeg.ts", "../../../../../phaser-genesis/src/math/RoundTo.ts", "../../../../../phaser-genesis/src/math/SinCosTableGenerator.ts", "../../../../../phaser-genesis/src/math/Within.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/Begin.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/Start.ts", "../../../../../phaser-genesis/src/geom/circle/CircleContains.ts", "../../../../../phaser-genesis/src/geom/circle/Circle.ts", "../../../../../phaser-genesis/src/geom/circle/CircleContainsPoint.ts", "../../../../../phaser-genesis/src/geom/circle/CircleContainsRect.ts", "../../../../../phaser-genesis/src/geom/circle/CircleEquals.ts", "../../../../../phaser-genesis/src/geom/circle/CloneCircle.ts", "../../../../../phaser-genesis/src/geom/circle/CopyCircleFrom.ts", "../../../../../phaser-genesis/src/geom/circle/GetCircleArea.ts", "../../../../../phaser-genesis/src/geom/rectangle/RectangleContains.ts", "../../../../../phaser-genesis/src/geom/rectangle/Rectangle.ts", "../../../../../phaser-genesis/src/geom/circle/GetCircleBounds.ts", "../../../../../phaser-genesis/src/geom/circle/GetCircleCircumference.ts", "../../../../../phaser-genesis/src/geom/circle/GetCircleCircumferencePoint.ts", "../../../../../phaser-genesis/src/geom/circle/GetCirclePoint.ts", "../../../../../phaser-genesis/src/geom/circle/GetCirclePoints.ts", "../../../../../phaser-genesis/src/geom/circle/GetCirclePointsBetween.ts", "../../../../../phaser-genesis/src/geom/circle/GetCircleRandomPoint.ts", "../../../../../phaser-genesis/src/geom/circle/TranslateCircle.ts", "../../../../../phaser-genesis/src/geom/circle/TranslateCirclePoint.ts", "../../../../../phaser-genesis/src/geom/circle/index.ts", "../../../../../phaser-genesis/src/renderer/webgl1/draw/FillArc.ts", "../../../../../phaser-genesis/src/config/defaultorigin/GetDefaultOriginX.ts", "../../../../../phaser-genesis/src/config/defaultorigin/GetDefaultOriginY.ts", "../../../../../phaser-genesis/src/components/bounds/AddBoundsComponent.ts", "../../../../../phaser-genesis/src/components/color/Color.ts", "../../../../../phaser-genesis/src/display/RemoveChildrenBetween.ts", "../../../../../phaser-genesis/src/display/DestroyChildren.ts", "../../../../../phaser-genesis/src/gameobjects/events/DestroyEvent.ts", "../../../../../phaser-genesis/src/events/Emit.ts", "../../../../../phaser-genesis/src/gameobjects/GameObjectTree.ts", "../../../../../phaser-genesis/src/components/hierarchy/GetParentID.ts", "../../../../../phaser-genesis/src/display/IsValidParent.ts", "../../../../../phaser-genesis/src/display/GetChildIndex.ts", "../../../../../phaser-genesis/src/display/RemoveChildAt.ts", "../../../../../phaser-genesis/src/display/RemoveChild.ts", "../../../../../phaser-genesis/src/display/SetWorld.ts", "../../../../../phaser-genesis/src/display/AddChildAt.ts", "../../../../../phaser-genesis/src/display/SetParent.ts", "../../../../../phaser-genesis/src/display/ReparentChildren.ts", "../../../../../phaser-genesis/src/gameobjects/GameObject.ts", "../../../../../phaser-genesis/src/gameobjects/container/Container.ts", "../../../../../phaser-genesis/src/gameobjects/sprite/SetFrame.ts", "../../../../../phaser-genesis/src/textures/TextureManagerInstance.ts", "../../../../../phaser-genesis/src/textures/GetTexture.ts", "../../../../../phaser-genesis/src/gameobjects/sprite/SetTexture.ts", "../../../../../phaser-genesis/src/gameobjects/sprite/Sprite.ts", "../../../../../phaser-genesis/src/textures/CreateCanvas.ts", "../../../../../phaser-genesis/src/components/hierarchy/DepthFirstSearchFromParentID.ts", "../../../../../phaser-genesis/src/components/hierarchy/GetChildrenFromParentID.ts", "../../../../../phaser-genesis/src/components/hierarchy/GetNumChildren.ts", "../../../../../phaser-genesis/src/components/hierarchy/GetParentGameObject.ts", "../../../../../phaser-genesis/src/components/hierarchy/GetWorldID.ts", "../../../../../phaser-genesis/src/components/hierarchy/GetWorldFromParentID.ts", "../../../../../phaser-genesis/src/components/hierarchy/UpdateNumChildren.ts", "../../../../../phaser-genesis/src/components/hierarchy/SetParentID.ts", "../../../../../phaser-genesis/src/components/hierarchy/SetWorldID.ts", "../../../../../phaser-genesis/src/components/dirty/SetDirtyParents.ts", "../../../../../phaser-genesis/src/components/dirty/SetDirtyTransform.ts", "../../../../../phaser-genesis/src/components/dirty/SetDirtyWorldDisplayList.ts", "../../../../../phaser-genesis/src/components/transform/SetExtent.ts", "../../../../../phaser-genesis/src/textures/Frame.ts", "../../../../../phaser-genesis/src/textures/Texture.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/Shader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/QuadShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/glsl/MULTI_QUAD_FRAG.ts", "../../../../../phaser-genesis/src/renderer/webgl1/shaders/MultiTextureQuadShader.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/ShaderStack.ts", "../../../../../phaser-genesis/src/camera/StaticCamera.ts", "../../../../../phaser-genesis/src/textures/palettes/Arne16.ts", "../../../../../phaser-genesis/src/textures/palettes/C64.ts", "../../../../../phaser-genesis/src/textures/palettes/CGA.ts", "../../../../../phaser-genesis/src/textures/palettes/JMP.ts", "../../../../../phaser-genesis/src/textures/palettes/MSX.ts", "../../../../../phaser-genesis/src/textures/palettes/PICO8.ts", "../../../../../phaser-genesis/src/textures/palettes/index.ts", "../../../../../phaser-genesis/src/textures/types/PixelTexture.ts", "../../../../../phaser-genesis/src/textures/WhiteTexture.ts", "../../../../../phaser-genesis/src/textures/TextureManager.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/CreateTempTextures.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/TextureStack.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/VertexBufferStack.ts", "../../../../../phaser-genesis/src/geom/rectangle/RectangleEquals.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/ViewportStack.ts", "../../../../../phaser-genesis/src/renderer/webgl1/renderpass/RenderPass.ts", "../../../../../phaser-genesis/src/renderer/webgl1/WebGLRendererInstance.ts", "../../../../../phaser-genesis/src/world/WorldList.ts", "../../../../../phaser-genesis/src/renderer/webgl1/WebGLRenderer.ts", "../../../../../phaser-genesis/src/config/webgl/WebGL.ts", "../../../../../phaser-genesis/src/config/webglcontext/SetWebGLContext.ts", "../../../../../phaser-genesis/src/config/worldsize/SetWorldSize.ts", "../../../../../phaser-genesis/src/display/AddChild.ts", "../../../../../phaser-genesis/src/display/RemoveChildren.ts", "../../../../../phaser-genesis/src/dom/AddToDOM.ts", "../../../../../phaser-genesis/src/dom/DOMContentLoaded.ts", "../../../../../phaser-genesis/src/dom/ParseXML.ts", "../../../../../phaser-genesis/src/events/EventEmitter.ts", "../../../../../phaser-genesis/src/events/EventInstance.ts", "../../../../../phaser-genesis/src/events/On.ts", "../../../../../phaser-genesis/src/events/Once.ts", "../../../../../phaser-genesis/src/config/banner/GetBanner.ts", "../../../../../phaser-genesis/src/config/globalvar/GetGlobalVar.ts", "../../../../../phaser-genesis/src/config/parent/GetParent.ts", "../../../../../phaser-genesis/src/scenes/RenderStatsComponent.ts", "../../../../../phaser-genesis/src/scenes/AddRenderStatsComponent.ts", "../../../../../phaser-genesis/src/scenes/GetConfigValue.ts", "../../../../../phaser-genesis/src/scenes/SceneManagerInstance.ts", "../../../../../phaser-genesis/src/scenes/GetRenderStatsAsObject.ts", "../../../../../phaser-genesis/src/scenes/Install.ts", "../../../../../phaser-genesis/src/scenes/ResetRenderStats.ts", "../../../../../phaser-genesis/src/scenes/Scene.ts", "../../../../../phaser-genesis/src/config/scenes/GetScenes.ts", "../../../../../phaser-genesis/src/scenes/SceneManager.ts", "../../../../../phaser-genesis/src/config/renderer/GetRenderer.ts", "../../../../../phaser-genesis/src/config/SetConfigDefaults.ts", "../../../../../phaser-genesis/src/Game.ts", "../../../../../phaser-genesis/src/loader/File.ts", "../../../../../phaser-genesis/src/loader/GetURL.ts", "../../../../../phaser-genesis/src/loader/ImageLoader.ts", "../../../../../phaser-genesis/src/loader/files/ImageFile.ts", "../../../../../phaser-genesis/src/loader/Loader.ts", "../../../../../phaser-genesis/src/world/events/WorldAfterUpdateEvent.ts", "../../../../../phaser-genesis/src/world/events/WorldBeforeUpdateEvent.ts", "../../../../../phaser-genesis/src/world/events/WorldPostRenderEvent.ts", "../../../../../phaser-genesis/src/world/events/WorldRenderEvent.ts", "../../../../../phaser-genesis/src/world/events/WorldShutdownEvent.ts", "../../../../../phaser-genesis/src/world/events/WorldUpdateEvent.ts", "../../../../../phaser-genesis/src/world/RenderDataComponent.ts", "../../../../../phaser-genesis/src/world/AddRenderDataComponent.ts", "../../../../../phaser-genesis/src/world/CheckDirtyTransforms.ts", "../../../../../phaser-genesis/src/config/worldsize/GetWorldSize.ts", "../../../../../phaser-genesis/src/world/RebuildWorldList.ts", "../../../../../phaser-genesis/src/world/RebuildWorldTransforms.ts", "../../../../../phaser-genesis/src/world/ResetWorldRenderData.ts", "../../../../../phaser-genesis/src/scenes/events/SceneDestroyEvent.ts", "../../../../../phaser-genesis/src/world/BaseWorld.ts", "../../../../../phaser-genesis/src/world/StaticWorld.ts", "../../../src/gameobjects/sprite/create sprite.ts"],
  "sourcesContent": ["export const CONFIG_DEFAULTS = {\r\n    AUTO: 'Auto',\r\n    BACKGROUND_COLOR: 'BackgroundColor',\r\n    BANNER: 'Banner',\r\n    BATCH_SIZE: 'BatchSize',\r\n    CANVAS_CONTEXT: 'CanvasContext',\r\n    CANVAS: 'Canvas',\r\n    DEFAULT_ORIGIN: 'DefaultOrigin',\r\n    GLOBAL_VAR: 'GlobalVar',\r\n    MAX_TEXTURES: 'MaxTextures',\r\n    PARENT: 'Parent',\r\n    RENDERER: 'Renderer',\r\n    SCENES: 'Scenes',\r\n    SIZE: 'Size',\r\n    WEBGL_CONTEXT: 'WebGLContext',\r\n    WEBGL: 'WebGL',\r\n    WORLD_SIZE: 'WorldSize'\r\n};\r\n", "export const ConfigStore = new Map();\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetBackgroundColor (color: number): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.BACKGROUND_COLOR, color);\r\n}\r\n", "import { SetBackgroundColor } from './SetBackgroundColor';\r\n\r\nexport function BackgroundColor (color: number): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetBackgroundColor(color);\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetBanner (title: string = '', version: string = '', url: string = '', color: string = '#fff', background: string = 'linear-gradient(#3e0081 40%, #00bcc3)'): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.BANNER, { title, version, url, color, background });\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetBatchSize (size: number): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.BATCH_SIZE, size);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetHeight (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.SIZE).height;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetResolution (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.SIZE).resolution;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetWidth (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.SIZE).width;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetSize (width: number = 800, height: number = 600, resolution: number = 1): void\r\n{\r\n    if (resolution === 0)\r\n    {\r\n        resolution = window.devicePixelRatio;\r\n    }\r\n\r\n    ConfigStore.set(CONFIG_DEFAULTS.SIZE, { width, height, resolution });\r\n}\r\n", "import { IGLTextureBindingConfig } from './webgl1/textures/IGLTextureBindingConfig';\r\nimport { ITexture } from '../textures/ITexture';\r\n\r\nexport type BindingQueueEntry = {\r\n    texture: ITexture,\r\n    glConfig: IGLTextureBindingConfig\r\n};\r\n\r\nconst queue: BindingQueueEntry[] = [];\r\n\r\nexport const BindingQueue =\r\n{\r\n    add: (texture: ITexture, glConfig?: IGLTextureBindingConfig): void =>\r\n    {\r\n        queue.push({ texture, glConfig });\r\n    },\r\n\r\n    get: (): BindingQueueEntry[] =>\r\n    {\r\n        return queue;\r\n    },\r\n\r\n    clear: (): void =>\r\n    {\r\n        queue.length = 0;\r\n    }\r\n};\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetBackgroundColor (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.BACKGROUND_COLOR);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { IRendererConstructor } from '../../renderer/IRendererConstructor';\r\n\r\nexport function SetRenderer (renderer: IRendererConstructor): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.RENDERER, renderer);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetDefaultOrigin (x: number = 0.5, y: number = x): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.DEFAULT_ORIGIN, { x, y });\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetGlobalVar (name: string): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.GLOBAL_VAR, name);\r\n}\r\n", "import { SetGlobalVar } from './SetGlobalVar';\r\n\r\nexport function GlobalVar (name: string): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetGlobalVar(name);\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetMaxTextures (max: number): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.MAX_TEXTURES, max);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Attempts to get the target DOM element based on the given value, which can be either\r\n * a string, in which case it will be looked-up by ID, or an element node. If nothing\r\n * can be found it will return a reference to the document.body.\r\n *\r\n * @function Phaser.DOM.GetElement\r\n * @since 4.0.0\r\n *\r\n * @param {(string | HTMLElement)} [target] - The DOM element to look-up.\r\n * \r\n * @returns {HTMLElement} The HTML Element that was found.\r\n */\r\nexport function GetElement (target?: string | HTMLElement): HTMLElement\r\n{\r\n    let element: HTMLElement;\r\n\r\n    if (target)\r\n    {\r\n        if (typeof target === 'string')\r\n        {\r\n            //  Hopefully an element ID\r\n            element = document.getElementById(target);\r\n        }\r\n        else if (typeof target === 'object' && target.nodeType === 1)\r\n        {\r\n            //  Quick test for a HTMLElement\r\n            element = target;\r\n        }\r\n    }\r\n\r\n    if (!element)\r\n    {\r\n        element = document.body;\r\n    }\r\n\r\n    return element;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { GetElement } from '../../dom/GetElement';\r\n\r\nexport function SetParent (parentElement?: string | HTMLElement): void\r\n{\r\n    //  If this function was called and `null` *wasn't* given as the parent\r\n    //  then we try to figure it out, or fallback to the document body\r\n    if (parentElement)\r\n    {\r\n        ConfigStore.set(CONFIG_DEFAULTS.PARENT, GetElement(parentElement));\r\n    }\r\n}\r\n", "import { SetParent } from './SetParent';\r\n\r\nexport function Parent (parentElement?: string | HTMLElement): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetParent(parentElement);\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { ISceneConstructor } from '../../scenes/ISceneConstructor';\r\n\r\nexport function SetScenes (scenes?: ISceneConstructor | Array<ISceneConstructor>): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.SCENES, [].concat(scenes));\r\n}\r\n", "import { ISceneConstructor } from '../../scenes/ISceneConstructor';\r\nimport { SetScenes } from './SetScenes';\r\n\r\nexport function Scenes (scenes?: ISceneConstructor | Array<ISceneConstructor>): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetScenes(scenes);\r\n    };\r\n}\r\n", "export let gl: WebGLRenderingContext;\r\n\r\nexport const GL =\r\n{\r\n    get: (): WebGLRenderingContext =>\r\n    {\r\n        return gl;\r\n    },\r\n\r\n    set: (context: WebGLRenderingContext | undefined): void =>\r\n    {\r\n        gl = context;\r\n    }\r\n};\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { gl } from '../GL';\r\n\r\nexport function Draw (renderPass: IRenderPass): void\r\n{\r\n    const count = renderPass.count;\r\n\r\n    if (count === 0)\r\n    {\r\n        return;\r\n    }\r\n\r\n    const currentBuffer = renderPass.vertexbuffer.current;\r\n    const currentShader = renderPass.shader.current;\r\n\r\n    const renderToFramebuffer = currentShader.shader.renderToFramebuffer;\r\n\r\n    if (renderToFramebuffer)\r\n    {\r\n        renderPass.framebuffer.set(currentShader.shader.framebuffer, true);\r\n    }\r\n\r\n    if (count === currentBuffer.batchSize)\r\n    {\r\n        const type = (currentBuffer.isDynamic) ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n        gl.bufferData(gl.ARRAY_BUFFER, currentBuffer.data, type);\r\n    }\r\n    else\r\n    {\r\n        const subsize = count * currentBuffer.entryElementSize;\r\n\r\n        const view = currentBuffer.vertexViewF32.subarray(0, subsize);\r\n\r\n        gl.bufferSubData(gl.ARRAY_BUFFER, 0, view);\r\n    }\r\n\r\n    if (currentBuffer.indexed)\r\n    {\r\n        gl.drawElements(gl.TRIANGLES, count * currentBuffer.entryIndexSize, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    else\r\n    {\r\n        gl.drawArrays(gl.TRIANGLES, 0, count * currentBuffer.elementsPerEntry);\r\n    }\r\n\r\n    if (renderToFramebuffer)\r\n    {\r\n        renderPass.framebuffer.pop();\r\n    }\r\n}\r\n", "import { Draw } from './Draw';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function Flush (renderPass: IRenderPass, forceCount?: number): boolean\r\n{\r\n    if (forceCount)\r\n    {\r\n        renderPass.count = forceCount;\r\n    }\r\n\r\n    const count = renderPass.count;\r\n\r\n    if (count === 0)\r\n    {\r\n        return false;\r\n    }\r\n\r\n    Draw(renderPass);\r\n\r\n    renderPass.flush();\r\n\r\n    return true;\r\n}\r\n", "import { Flush } from './Flush';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nexport function End (renderPass: IRenderPass): void\r\n{\r\n    Flush(renderPass);\r\n}\r\n", "import { ICompressedTextures } from './ICompressedTextures';\r\n\r\nexport function GetCompressedTextures (gl: WebGLRenderingContext): ICompressedTextures\r\n{\r\n    const extString = 'WEBGL_compressed_texture_';\r\n    const wkExtString = 'WEBKIT_' + extString;\r\n\r\n    const hasExt = (format: string) =>\r\n    {\r\n        const results = gl.getExtension(extString + format) || gl.getExtension(wkExtString + format);\r\n\r\n        if (results)\r\n        {\r\n            const glEnums = {};\r\n\r\n            for (const key in results)\r\n            {\r\n                glEnums[results[key]] = key;\r\n            }\r\n\r\n            return glEnums;\r\n        }\r\n    };\r\n\r\n    return {\r\n        ETC: hasExt('etc'),\r\n        ETC1: hasExt('etc1'),\r\n        ATC: hasExt('atc'),\r\n        ASTC: hasExt('astc'),\r\n        BPTC: hasExt('bptc'),\r\n        RGTC: hasExt('rgtc'),\r\n        PVRTC: hasExt('pvrtc'),\r\n        S3TC: hasExt('s3tc'),\r\n        S3TCSRGB: hasExt('s3tc_srgb'),\r\n        IMG: true\r\n    };\r\n}\r\n", "export function GetRGBArray (color: number, output: number[] = []): number[]\r\n{\r\n    const r: number = color >> 16 & 0xFF;\r\n    const g: number = color >> 8 & 0xFF;\r\n    const b: number = color & 0xFF;\r\n    const a: number = (color > 16777215) ? color >>> 24 : 255;\r\n\r\n    output[0] = r / 255;\r\n    output[1] = g / 255;\r\n    output[2] = b / 255;\r\n    output[3] = a / 255;\r\n\r\n    return output;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetWebGLContext (): WebGLContextAttributes\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.WEBGL_CONTEXT);\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function CreateFramebuffer (texture: WebGLTexture, attachment?: GLenum): WebGLFramebuffer\r\n{\r\n    if (!attachment)\r\n    {\r\n        attachment = gl.COLOR_ATTACHMENT0;\r\n    }\r\n\r\n    const framebuffer = gl.createFramebuffer();\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, texture, 0);\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\r\n    return framebuffer;\r\n}\r\n", "import { IGLMipmapType } from './IGLTextureBindingConfig';\r\nimport { IGLTextureBinding } from './IGLTextureBinding';\r\nimport { gl } from '../GL';\r\n\r\nexport function CreateGLTexture <T extends IGLTextureBinding> (binding: T, mipmaps?: IGLMipmapType[]): WebGLTexture\r\n{\r\n    const { generateMipmap, minFilter, parent, compressed, internalFormat, flipY, unpackPremultiplyAlpha, magFilter, wrapS, wrapT, isPOT } = binding;\r\n\r\n    const source = parent.image;\r\n\r\n    let width = parent.width;\r\n    let height = parent.height;\r\n\r\n    const glTexture: WebGLTexture = gl.createTexture();\r\n\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, glTexture);\r\n\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\r\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, unpackPremultiplyAlpha);\r\n\r\n    if (source)\r\n    {\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\r\n\r\n        width = source.width;\r\n        height = source.height;\r\n    }\r\n    else if (compressed && mipmaps)\r\n    {\r\n        for (let i = 0; i < mipmaps.length; i++)\r\n        {\r\n            gl.compressedTexImage2D(gl.TEXTURE_2D, i, internalFormat, mipmaps[i].width, mipmaps[i].height, 0, mipmaps[i].data);\r\n        }\r\n    }\r\n    else\r\n    {\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n    }\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\r\n\r\n    if (generateMipmap && isPOT)\r\n    {\r\n        gl.generateMipmap(gl.TEXTURE_2D);\r\n    }\r\n\r\n    binding.texture = glTexture;\r\n\r\n    return glTexture;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function DeleteFramebuffer (framebuffer: WebGLFramebuffer): void\r\n{\r\n    if (gl && gl.isFramebuffer(framebuffer))\r\n    {\r\n        gl.deleteFramebuffer(framebuffer);\r\n    }\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function DeleteGLTexture (texture: WebGLTexture): void\r\n{\r\n    if (gl.isTexture(texture))\r\n    {\r\n        gl.deleteTexture(texture);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Checks if the given `width` and `height` are a power of two.\r\n * Useful for checking texture dimensions.\r\n *\r\n * @function Phaser.Math.Pow2.IsSize\r\n * @since 3.0.0\r\n *\r\n * @param {number} width - The width.\r\n * @param {number} height - The height.\r\n *\r\n * @return {boolean} `true` if `width` and `height` are a power of two, otherwise `false`.\r\n */\r\nexport function IsSizePowerOfTwo (width: number, height: number): boolean\r\n{\r\n    if (width < 1 || height < 1)\r\n    {\r\n        return false;\r\n    }\r\n\r\n    return ((width & (width - 1)) === 0) && ((height & (height - 1)) === 0);\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function SetGLTextureFilterMode (texture: WebGLTexture, linear: boolean = true): void\r\n{\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n    const mode = (linear) ? gl.LINEAR : gl.NEAREST;\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, mode);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, mode);\r\n}\r\n", "import { IGLTextureBinding } from './IGLTextureBinding';\r\nimport { gl } from '../GL';\r\n\r\nexport function UpdateGLTexture <T extends IGLTextureBinding> (binding: T): WebGLTexture\r\n{\r\n    const source = binding.parent.image;\r\n    const width = source.width;\r\n    const height = source.height;\r\n\r\n    if (width > 0 && height > 0)\r\n    {\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, binding.texture);\r\n\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, binding.flipY);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\r\n    }\r\n\r\n    return binding.texture;\r\n}\r\n", "import { IGLMipmapType, IGLTextureBindingConfig } from './IGLTextureBindingConfig';\r\n\r\nimport { CreateFramebuffer } from '../fbo/CreateFramebuffer';\r\nimport { CreateGLTexture } from './CreateGLTexture';\r\nimport { DeleteFramebuffer } from '../fbo/DeleteFramebuffer';\r\nimport { DeleteGLTexture } from './DeleteGLTexture';\r\nimport { IGLTextureBinding } from './IGLTextureBinding';\r\nimport { ITexture } from '../../../textures/ITexture';\r\nimport { IsSizePowerOfTwo } from '../../../math/pow2/IsSizePowerOfTwo';\r\nimport { SetGLTextureFilterMode } from './SetGLTextureFilterMode';\r\nimport { UpdateGLTexture } from './UpdateGLTexture';\r\nimport { gl } from '../GL';\r\n\r\nexport class GLTextureBinding implements IGLTextureBinding\r\n{\r\n    parent: ITexture;\r\n\r\n    texture: WebGLTexture;\r\n    framebuffer: WebGLFramebuffer;\r\n    depthbuffer: WebGLRenderbuffer;\r\n\r\n    format: string;\r\n    internalFormat: GLenum;\r\n    compressed: boolean;\r\n    mipmaps: IGLMipmapType[];\r\n\r\n    isBound: boolean = false;\r\n    textureUnit: number = 0;\r\n\r\n    unpackPremultiplyAlpha: boolean = true;\r\n\r\n    minFilter: GLenum;\r\n    magFilter: GLenum;\r\n    wrapS: GLenum;\r\n    wrapT: GLenum;\r\n\r\n    flipY: boolean = false;\r\n    isPOT: boolean = false;\r\n    generateMipmap: boolean = false;\r\n\r\n    constructor (parent: ITexture, config: IGLTextureBindingConfig = {})\r\n    {\r\n        this.parent = parent;\r\n\r\n        this.isPOT = IsSizePowerOfTwo(parent.width, parent.height);\r\n\r\n        //  Add option to dump the mipmaps arrays after binding - but prevents context loss restoration\r\n\r\n        const {\r\n            mipmaps = null,\r\n            compressed = false,\r\n            format = 'IMG',\r\n            internalFormat = 0,\r\n            texture = null,\r\n            framebuffer = null,\r\n            createFramebuffer = false,\r\n            depthbuffer = null,\r\n            unpackPremultiplyAlpha = true,\r\n            minFilter = (this.isPOT) ? gl.LINEAR_MIPMAP_LINEAR : gl.LINEAR,\r\n            magFilter = gl.LINEAR,\r\n            wrapS = gl.CLAMP_TO_EDGE,\r\n            wrapT = gl.CLAMP_TO_EDGE,\r\n            generateMipmap = this.isPOT,\r\n            flipY = false\r\n        } = config;\r\n\r\n        this.compressed = compressed;\r\n        this.format = format;\r\n        this.internalFormat = internalFormat;\r\n        this.mipmaps = mipmaps;\r\n\r\n        //  If you don't set minFilter to LINEAR then the compressed textures don't work!\r\n        if (compressed)\r\n        {\r\n            this.minFilter = gl.LINEAR;\r\n        }\r\n        else\r\n        {\r\n            this.minFilter = minFilter;\r\n        }\r\n\r\n        this.magFilter = magFilter;\r\n        this.wrapS = wrapS;\r\n        this.wrapT = wrapT;\r\n        this.generateMipmap = generateMipmap;\r\n        this.flipY = flipY;\r\n        this.unpackPremultiplyAlpha = unpackPremultiplyAlpha;\r\n\r\n        if (texture)\r\n        {\r\n            this.texture = texture;\r\n        }\r\n        else\r\n        {\r\n            CreateGLTexture(this, mipmaps);\r\n        }\r\n\r\n        if (framebuffer)\r\n        {\r\n            this.framebuffer = framebuffer;\r\n        }\r\n        else if (createFramebuffer)\r\n        {\r\n            this.framebuffer = CreateFramebuffer(this.texture);\r\n        }\r\n\r\n        if (depthbuffer)\r\n        {\r\n            this.depthbuffer = depthbuffer;\r\n        }\r\n\r\n        parent.binding = this;\r\n    }\r\n\r\n    //  Needed?\r\n    setFilter (linear: boolean): void\r\n    {\r\n        if (this.texture)\r\n        {\r\n            SetGLTextureFilterMode(this.texture, linear);\r\n        }\r\n    }\r\n\r\n    create (): WebGLTexture\r\n    {\r\n        const texture = this.texture;\r\n\r\n        if (texture)\r\n        {\r\n            DeleteGLTexture(texture);\r\n        }\r\n\r\n        return CreateGLTexture(this);\r\n    }\r\n\r\n    update (): WebGLTexture\r\n    {\r\n        const texture = this.texture;\r\n\r\n        if (!texture)\r\n        {\r\n            return CreateGLTexture(this);\r\n        }\r\n        else\r\n        {\r\n            return UpdateGLTexture(this);\r\n        }\r\n    }\r\n\r\n    bind (index: number): void\r\n    {\r\n        this.isBound = true;\r\n        this.textureUnit = index;\r\n    }\r\n\r\n    unbind (): void\r\n    {\r\n        this.isBound = false;\r\n        this.textureUnit = 0;\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.unbind();\r\n\r\n        DeleteGLTexture(this.texture);\r\n        DeleteFramebuffer(this.framebuffer);\r\n\r\n        this.parent = null;\r\n        this.texture = null;\r\n        this.framebuffer = null;\r\n    }\r\n}\r\n", "import { BindingQueue } from '../../BindingQueue';\r\nimport { GLTextureBinding } from '../textures/GLTextureBinding';\r\n\r\nexport function ProcessBindingQueue (): void\r\n{\r\n    const queue = BindingQueue.get();\r\n\r\n    queue.forEach(entry =>\r\n    {\r\n        const { texture, glConfig } = entry;\r\n\r\n        if (!texture.binding)\r\n        {\r\n            texture.binding = new GLTextureBinding(texture, glConfig);\r\n        }\r\n    });\r\n\r\n    BindingQueue.clear();\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { gl } from '../GL';\r\n\r\nexport type BlendModeStackEntry = {\r\n    enable: boolean;\r\n    sfactor?: number;\r\n    dfactor?: number;\r\n};\r\n\r\nexport class BlendModeStack\r\n{\r\n    renderPass: IRenderPass;\r\n\r\n    stack: BlendModeStackEntry[];\r\n    default: BlendModeStackEntry;\r\n    index: number;\r\n\r\n    constructor (renderPass: IRenderPass)\r\n    {\r\n        this.renderPass = renderPass;\r\n        this.stack = [];\r\n    }\r\n\r\n    get current (): BlendModeStackEntry\r\n    {\r\n        return this.stack[this.index];\r\n    }\r\n\r\n    add (enable: boolean, sfactor?: number, dfactor?: number): BlendModeStackEntry\r\n    {\r\n        const entry = { enable, sfactor, dfactor };\r\n\r\n        this.index++;\r\n\r\n        //  cursor already at the end of the stack, so we need to grow it\r\n        if (this.index === this.stack.length)\r\n        {\r\n            this.stack.push(entry);\r\n        }\r\n        else\r\n        {\r\n            this.stack[this.index] = entry;\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    bindDefault (): void\r\n    {\r\n        this.index = 0;\r\n\r\n        this.bind(this.default);\r\n    }\r\n\r\n    bind (entry?: BlendModeStackEntry): void\r\n    {\r\n        if (!entry)\r\n        {\r\n            entry = this.current;\r\n        }\r\n\r\n        if (entry.enable)\r\n        {\r\n            if (!gl.isEnabled(gl.BLEND) || (this.current.sfactor !== entry.sfactor || this.current.dfactor !== entry.dfactor))\r\n            {\r\n                gl.enable(gl.BLEND);\r\n                gl.blendFunc(entry.sfactor, entry.dfactor);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            gl.disable(gl.BLEND);\r\n        }\r\n    }\r\n\r\n    pop (): void\r\n    {\r\n        this.index--;\r\n\r\n        this.bind();\r\n    }\r\n\r\n    set (enable: boolean, sfactor?: number, dfactor?: number): void\r\n    {\r\n        const entry = this.add(enable, sfactor, dfactor);\r\n\r\n        this.bind(entry);\r\n    }\r\n\r\n    setDefault (enable: boolean, sfactor?: number, dfactor?: number): void\r\n    {\r\n        const entry = { enable, sfactor, dfactor };\r\n\r\n        //  The default entry always goes into index zero\r\n        this.stack[0] = entry;\r\n\r\n        this.index = 0;\r\n\r\n        this.default = entry;\r\n    }\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { Rectangle } from '../../../geom/rectangle/Rectangle';\r\nimport { gl } from '../GL';\r\n\r\nexport type FramebufferStackEntry = {\r\n    framebuffer: WebGLFramebuffer;\r\n    viewport?: Rectangle;\r\n};\r\n\r\nexport class FramebufferStack\r\n{\r\n    renderPass: IRenderPass;\r\n\r\n    stack: FramebufferStackEntry[];\r\n    active: WebGLFramebuffer;\r\n    default: FramebufferStackEntry;\r\n    index: number;\r\n\r\n    constructor (renderPass: IRenderPass)\r\n    {\r\n        this.renderPass = renderPass;\r\n        this.stack = [];\r\n    }\r\n\r\n    get current (): FramebufferStackEntry\r\n    {\r\n        return this.stack[this.index];\r\n    }\r\n\r\n    add (framebuffer: WebGLFramebuffer, viewport?: Rectangle): FramebufferStackEntry\r\n    {\r\n        const entry = { framebuffer, viewport };\r\n\r\n        this.index++;\r\n\r\n        //  cursor already at the end of the stack, so we need to grow it\r\n        if (this.index === this.stack.length)\r\n        {\r\n            this.stack.push(entry);\r\n        }\r\n        else\r\n        {\r\n            this.stack[this.index] = entry;\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    bindDefault (): void\r\n    {\r\n        this.index = 0;\r\n\r\n        this.bind(false, this.default);\r\n    }\r\n\r\n    bind (clear: boolean = true, entry?: FramebufferStackEntry): void\r\n    {\r\n        if (!entry)\r\n        {\r\n            entry = this.current;\r\n        }\r\n\r\n        const { framebuffer, viewport } = entry;\r\n\r\n        if (this.active !== framebuffer)\r\n        {\r\n            gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n        }\r\n\r\n        if (clear)\r\n        {\r\n            gl.clearColor(0, 0, 0, 0);\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        }\r\n\r\n        if (viewport)\r\n        {\r\n            this.renderPass.viewport.set(viewport.x, viewport.y, viewport.width, viewport.height);\r\n        }\r\n\r\n        this.active = framebuffer;\r\n    }\r\n\r\n    pop (): void\r\n    {\r\n        if (this.current.viewport)\r\n        {\r\n            this.renderPass.viewport.pop();\r\n        }\r\n\r\n        this.index--;\r\n\r\n        this.bind(false);\r\n    }\r\n\r\n    set (framebuffer: WebGLFramebuffer, clear: boolean = true, viewport?: Rectangle): void\r\n    {\r\n        const entry = this.add(framebuffer, viewport);\r\n\r\n        this.bind(clear, entry);\r\n    }\r\n\r\n    setDefault (framebuffer: WebGLFramebuffer = null, viewport?: Rectangle): void\r\n    {\r\n        const entry = { framebuffer, viewport };\r\n\r\n        //  The default entry always goes into index zero\r\n        this.stack[0] = entry;\r\n\r\n        this.index = 0;\r\n\r\n        this.default = entry;\r\n    }\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetBatchSize (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.BATCH_SIZE);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetMaxTextures (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.MAX_TEXTURES);\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function DeleteGLBuffer (buffer: WebGLBuffer): void\r\n{\r\n    if (gl.isBuffer(buffer))\r\n    {\r\n        gl.deleteBuffer(buffer);\r\n    }\r\n}\r\n", "import { DeleteGLBuffer } from './DeleteGLBuffer';\r\nimport { IVertexBuffer } from './IVertexBuffer';\r\nimport { IVertexBufferConfig } from './IVertexBufferConfig';\r\nimport { gl } from '../GL';\r\n\r\nexport class VertexBuffer implements IVertexBuffer\r\n{\r\n    //  Handy for debug tracing\r\n    name: string;\r\n\r\n    /**\r\n     * Maximum number of entries per batch before a flush takes place.\r\n     * For a Mesh, this is the number of triangles / faces in the vertex buffer.\r\n     * Typically each face consists of 3 verticies.\r\n     *\r\n     * @type {number}\r\n     */\r\n    batchSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, per entry in the array buffer.\r\n     *\r\n     * @type {number}\r\n     */\r\n    dataSize: number;\r\n\r\n    /**\r\n     * The amount of elements / floats a single vertex consists of.\r\n     *\r\n     * The default is 6:\r\n     *\r\n     * position (x,y - 2 floats)\r\n     * texture coord (x,y - 2 floats)\r\n     * texture index (uint)\r\n     * packed color (uint)\r\n     *\r\n     * @type {number}\r\n     */\r\n    vertexElementSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of a single vertex in the array buffer.\r\n     *\r\n     * This is `vertexElementSize * dataSize`.\r\n     *\r\n     * @type {number}\r\n     */\r\n    vertexByteSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of a single entry in the array buffer.\r\n     *\r\n     * This is `vertexByteSize * 4` for a quad.\r\n     *\r\n     * @type {number}\r\n     */\r\n    entryByteSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of the Array Buffer.\r\n     *\r\n     * This is `batchSize * entryByteSize`\r\n     *\r\n     * @type {number}\r\n     */\r\n    bufferByteSize: number;\r\n\r\n    /**\r\n     * The Array Buffer.\r\n     *\r\n     * @type {ArrayBuffer}\r\n     */\r\n    data: ArrayBuffer;\r\n\r\n    /**\r\n     * Float32 View of the Array Buffer.\r\n     *\r\n     * @type {Float32Array}\r\n     */\r\n    vertexViewF32: Float32Array;\r\n\r\n    /**\r\n     * The data array buffer.\r\n     *\r\n     * @type {WebGLBuffer}\r\n     */\r\n    vertexBuffer: WebGLBuffer;\r\n\r\n    /**\r\n     * The size, in quantity of elements, of a single entry in the element index array.\r\n     *\r\n     * This is `vertexElementSize * elementsPerEntry`\r\n     *\r\n     * @type {number}\r\n     */\r\n    entryElementSize: number;\r\n\r\n    indexed: boolean = false;\r\n\r\n    isDynamic: boolean = false;\r\n\r\n    /**\r\n     * The total number of entries added to the buffer so far, or reserved to be added.\r\n     *\r\n     * This is the total number of indices / verticies, not faces.\r\n     * Typically there are 3 verts per face, so this value is usually batchSize x 3 for a Mesh.\r\n     *\r\n     * @type {number}\r\n     */\r\n    count: number = 0;\r\n\r\n    /**\r\n     * The current buffer offset.\r\n     *\r\n     * @type {number}\r\n     */\r\n    offset: number = 0;\r\n\r\n    /**\r\n     * The number of elements per entry in the buffer.\r\n     *\r\n     * This is 3 for a tri and 4 for a quad in an indexed buffer.\r\n     *\r\n     * @type {number}\r\n     */\r\n    elementsPerEntry: number;\r\n\r\n    isBound: boolean = false;\r\n\r\n    constructor (config: IVertexBufferConfig = {})\r\n    {\r\n        const {\r\n            name = 'VBO',\r\n            batchSize = 1,\r\n            dataSize = 4,\r\n            isDynamic = true,\r\n            elementsPerEntry = 3,\r\n            vertexElementSize = 6\r\n        } = config;\r\n\r\n        this.name = name;\r\n        this.batchSize = batchSize;\r\n        this.dataSize = dataSize;\r\n        this.vertexElementSize = vertexElementSize;\r\n        this.isDynamic = isDynamic;\r\n        this.elementsPerEntry = elementsPerEntry;\r\n\r\n        //  Derive the remaining values\r\n        this.vertexByteSize = vertexElementSize * dataSize;\r\n        this.entryByteSize = this.vertexByteSize * elementsPerEntry;\r\n        this.bufferByteSize = batchSize * this.entryByteSize;\r\n        this.entryElementSize = this.vertexElementSize * this.elementsPerEntry;\r\n\r\n        this.create();\r\n    }\r\n\r\n    resize (batchSize: number): void\r\n    {\r\n        this.batchSize = batchSize;\r\n        this.bufferByteSize = batchSize * this.entryByteSize;\r\n\r\n        if (this.vertexBuffer)\r\n        {\r\n            DeleteGLBuffer(this.vertexBuffer);\r\n        }\r\n\r\n        this.create();\r\n    }\r\n\r\n    create (): void\r\n    {\r\n        const data = new ArrayBuffer(this.bufferByteSize);\r\n\r\n        this.data = data;\r\n\r\n        this.vertexViewF32 = new Float32Array(data);\r\n\r\n        this.vertexBuffer = gl.createBuffer();\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\r\n        const type = (this.isDynamic) ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n        gl.bufferData(gl.ARRAY_BUFFER, data, type);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n        this.isBound = false;\r\n    }\r\n\r\n    add (count: number): void\r\n    {\r\n        this.count += count;\r\n        this.offset += (this.vertexElementSize * count);\r\n    }\r\n\r\n    reset (): void\r\n    {\r\n        this.count = 0;\r\n        this.offset = 0;\r\n    }\r\n\r\n    canContain (count: number): boolean\r\n    {\r\n        return ((this.count + count) <= this.batchSize);\r\n    }\r\n\r\n    free (): number\r\n    {\r\n        return Math.max(0, 1 - (this.count / this.batchSize));\r\n    }\r\n\r\n    bind (): void\r\n    {\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        DeleteGLBuffer(this.vertexBuffer);\r\n\r\n        this.data = null;\r\n        this.vertexViewF32 = null;\r\n        this.vertexBuffer = null;\r\n    }\r\n}\r\n", "import { DeleteGLBuffer } from './DeleteGLBuffer';\r\nimport { IIndexedVertexBuffer } from './IIndexedVertexBuffer';\r\nimport { IVertexBufferConfig } from './IVertexBufferConfig';\r\nimport { VertexBuffer } from './VertexBuffer';\r\nimport { gl } from '../GL';\r\n\r\nexport class IndexedVertexBuffer extends VertexBuffer implements IIndexedVertexBuffer\r\n{\r\n    /**\r\n     * The size, in bytes, per entry in the element index array.\r\n     *\r\n     * @type {number}\r\n     */\r\n    indexSize: number;\r\n\r\n    /**\r\n     * The total number of entries per entry in the element index array.\r\n     *\r\n     * For a quad, the IBO contains 6 entries per entry:\r\n     *\r\n     * 0, 1, 2\r\n     * 2, 3, 0\r\n     *\r\n     * @type {number}\r\n     */\r\n    entryIndexSize: number;\r\n\r\n    /**\r\n     * The Element Array Buffer.\r\n     *\r\n     * @type {Uint16Array}\r\n     */\r\n    index: Uint16Array;\r\n\r\n    /**\r\n     * The element array buffer.\r\n     *\r\n     * @type {WebGLBuffer}\r\n     */\r\n    indexBuffer: WebGLBuffer;\r\n\r\n    indexLayout: number[];\r\n\r\n    constructor (config: IVertexBufferConfig = {})\r\n    {\r\n        super(config);\r\n\r\n        const {\r\n            indexSize = 4,\r\n            entryIndexSize = 6,\r\n            indexLayout = null\r\n        } = config;\r\n\r\n        this.indexed = true;\r\n\r\n        this.indexSize = indexSize;\r\n        this.entryIndexSize = entryIndexSize;\r\n\r\n        const seededIndexBuffer = [];\r\n\r\n        if (indexLayout)\r\n        {\r\n            this.indexLayout = indexLayout;\r\n\r\n            //  Seed the index buffer\r\n            for (let i = 0; i < (this.batchSize * indexSize); i += indexSize)\r\n            {\r\n                for (let c = 0; c < indexLayout.length; c++)\r\n                {\r\n                    seededIndexBuffer.push(i + indexLayout[c]);\r\n                }\r\n            }\r\n        }\r\n\r\n        // this.create();\r\n\r\n        this.createIndexBuffer(seededIndexBuffer);\r\n    }\r\n\r\n    createIndexBuffer (seededIndex: number[]): void\r\n    {\r\n        this.index = new Uint16Array(seededIndex);\r\n\r\n        this.indexBuffer = gl.createBuffer();\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.index, gl.STATIC_DRAW);\r\n\r\n        //  Free memory\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n        seededIndex = [];\r\n    }\r\n\r\n    bind (): void\r\n    {\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        super.destroy();\r\n\r\n        DeleteGLBuffer(this.indexBuffer);\r\n\r\n        this.index = null;\r\n        this.indexLayout = null;\r\n        this.indexBuffer = null;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Checks if an array can be used as a matrix.\r\n *\r\n * A matrix is a two-dimensional array (array of arrays), where all sub-arrays (rows) have the same length. There must be at least two rows:\r\n *\r\n * ```\r\n *    [\r\n *        [ 1, 1, 1, 1, 1, 1 ],\r\n *        [ 2, 0, 0, 0, 0, 4 ],\r\n *        [ 2, 0, 1, 2, 0, 4 ],\r\n *        [ 2, 0, 3, 4, 0, 4 ],\r\n *        [ 2, 0, 0, 0, 0, 4 ],\r\n *        [ 3, 3, 3, 3, 3, 3 ]\r\n *    ]\r\n * ```\r\n */\r\nexport function CheckMatrix (matrix: unknown[][]): boolean\r\n{\r\n    if (!Array.isArray(matrix) || matrix.length < 2 || !Array.isArray(matrix[0]))\r\n    {\r\n        return false;\r\n    }\r\n\r\n    //  How long is the first row?\r\n    const size = matrix[0].length;\r\n\r\n    //  Validate the rest of the rows are the same length\r\n    for (let i = 1; i < matrix.length; i++)\r\n    {\r\n        if (matrix[i].length !== size)\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { CheckMatrix } from './CheckMatrix';\r\n\r\n/**\r\n * Generates a string (which you can pass to console.log) from the given Array Matrix.\r\n */\r\nexport function MatrixToString (matrix: unknown[][]): string\r\n{\r\n    let str = '';\r\n\r\n    if (!CheckMatrix(matrix))\r\n    {\r\n        return str;\r\n    }\r\n\r\n    for (let r = 0; r < matrix.length; r++)\r\n    {\r\n        for (let c = 0; c < matrix[r].length; c++)\r\n        {\r\n            const cell = matrix[r][c].toString();\r\n\r\n            if (cell !== 'undefined')\r\n            {\r\n                str = str.padEnd(2, cell);\r\n            }\r\n            else\r\n            {\r\n                str += '?';\r\n            }\r\n\r\n            if (c < matrix[r].length - 1)\r\n            {\r\n                str += ' |';\r\n            }\r\n        }\r\n\r\n        if (r < matrix.length - 1)\r\n        {\r\n            str += '\\n';\r\n\r\n            for (let i = 0; i < matrix[r].length; i++)\r\n            {\r\n                str += '---';\r\n\r\n                if (i < matrix[r].length - 1)\r\n                {\r\n                    str += '+';\r\n                }\r\n            }\r\n\r\n            str += '\\n';\r\n        }\r\n\r\n    }\r\n\r\n    return str;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Reverses the columns in the given Array Matrix.\r\n */\r\nexport function ReverseColumns (matrix: unknown[][]): unknown[][]\r\n{\r\n    return matrix.reverse();\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Reverses the rows in the given Array Matrix.\r\n */\r\nexport function ReverseRows (matrix: unknown[][]): unknown[][]\r\n{\r\n    for (let i = 0; i < matrix.length; i++)\r\n    {\r\n        matrix[i].reverse();\r\n    }\r\n\r\n    return matrix;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Transposes the elements of the given matrix (array of arrays).\r\n *\r\n * The transpose of a matrix is a new matrix whose rows are the columns of the original.\r\n */\r\nexport function TransposeMatrix (matrix: unknown[][]): unknown[][]\r\n{\r\n    const sourceRowCount = matrix.length;\r\n    const sourceColCount = matrix[0].length;\r\n\r\n    const result = new Array(sourceColCount);\r\n\r\n    for (let i = 0; i < sourceColCount; i++)\r\n    {\r\n        result[i] = new Array(sourceRowCount);\r\n\r\n        for (let j = sourceRowCount - 1; j > -1; j--)\r\n        {\r\n            result[i][j] = matrix[j][i];\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { CheckMatrix } from './CheckMatrix';\r\nimport { TransposeMatrix } from './TransposeMatrix';\r\n\r\n/**\r\n * Rotates the array matrix based on the given rotation value.\r\n *\r\n * The value can be given in degrees: 90, -90, 270, -270 or 180,\r\n * or a string command: `rotateLeft`, `rotateRight` or `rotate180`.\r\n *\r\n * Based on the routine from {@link http://jsfiddle.net/MrPolywhirl/NH42z/}.\r\n */\r\nexport function RotateMatrix (matrix: unknown[][], direction: number | string = 90): unknown[][]\r\n{\r\n    if (!CheckMatrix(matrix))\r\n    {\r\n        return matrix;\r\n    }\r\n\r\n    if (typeof direction !== 'string')\r\n    {\r\n        direction = ((direction % 360) + 360) % 360;\r\n    }\r\n\r\n    if (direction === 90 || direction === -270 || direction === 'rotateLeft')\r\n    {\r\n        matrix = TransposeMatrix(matrix);\r\n        matrix.reverse();\r\n    }\r\n    else if (direction === -90 || direction === 270 || direction === 'rotateRight')\r\n    {\r\n        matrix.reverse();\r\n        matrix = TransposeMatrix(matrix);\r\n    }\r\n    else if (Math.abs(direction as number) === 180 || direction === 'rotate180')\r\n    {\r\n        for (let i = 0; i < matrix.length; i++)\r\n        {\r\n            matrix[i].reverse();\r\n        }\r\n\r\n        matrix.reverse();\r\n    }\r\n\r\n    return matrix;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RotateMatrix } from './RotateMatrix';\r\n\r\n/**\r\n * Rotates the array matrix 180 degrees.\r\n *\r\n * @function Phaser.Utils.Array.Matrix.Rotate180\r\n * @since 3.0.0\r\n *\r\n * @generic T\r\n * @genericUse {T[][]} - [matrix,$return]\r\n *\r\n * @param {T[][]} [matrix] - The array to rotate.\r\n *\r\n * @return {T[][]} The rotated matrix array. The source matrix should be discard for the returned matrix.\r\n */\r\nexport function Rotate180 (matrix: unknown[][]): unknown[][]\r\n{\r\n    return RotateMatrix(matrix, 180);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RotateMatrix } from './RotateMatrix';\r\n\r\n/**\r\n * Rotates the array matrix to the left (or 90 degrees)\r\n *\r\n * @function Phaser.Utils.Array.Matrix.RotateLeft\r\n * @since 3.0.0\r\n *\r\n * @generic T\r\n * @genericUse {T[][]} - [matrix,$return]\r\n *\r\n * @param {T[][]} [matrix] - The array to rotate.\r\n *\r\n * @return {T[][]} The rotated matrix array. The source matrix should be discard for the returned matrix.\r\n */\r\nexport function RotateLeft (matrix: unknown[][]): unknown[][]\r\n{\r\n    return RotateMatrix(matrix, 90);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RotateMatrix } from './RotateMatrix';\r\n\r\n/**\r\n * Rotates the array matrix to the left (or -90 degrees)\r\n *\r\n * @function Phaser.Utils.Array.Matrix.RotateRight\r\n * @since 3.0.0\r\n *\r\n * @generic T\r\n * @genericUse {T[][]} - [matrix,$return]\r\n *\r\n * @param {T[][]} [matrix] - The array to rotate.\r\n *\r\n * @return {T[][]} The rotated matrix array. The source matrix should be discard for the returned matrix.\r\n */\r\nexport function RotateRight (matrix: unknown[][]): unknown[][]\r\n{\r\n    return RotateMatrix(matrix, -90);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Create an array representing the range of numbers (usually integers), between, and inclusive of,\r\n * the given `start` and `end` arguments. For example:\r\n *\r\n * `var array = numberArray(2, 4); // array = [2, 3, 4]`\r\n * `var array = numberArray(0, 9); // array = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`\r\n *\r\n * This is equivalent to `numberArrayStep(start, end, 1)`.\r\n *\r\n * You can optionally provide a prefix and / or suffix string. If given the array will contain\r\n * strings, not integers. For example:\r\n *\r\n * `var array = numberArray(1, 4, 'Level '); // array = [\"Level 1\", \"Level 2\", \"Level 3\", \"Level 4\"]`\r\n * `var array = numberArray(5, 7, 'HD-', '.png'); // array = [\"HD-5.png\", \"HD-6.png\", \"HD-7.png\"]`\r\n *\r\n * @param {number} start - The minimum value the array starts with.\r\n * @param {number} end - The maximum value the array contains.\r\n * @param {string} [prefix] - Optional prefix to place before the number. If provided the array will contain strings, not integers.\r\n * @param {string} [suffix] - Optional suffix to place after the number. If provided the array will contain strings, not integers.\r\n *\r\n * @return {(number[]|string[])} The array of number values, or strings if a prefix or suffix was provided.\r\n */\r\nexport function NumberArray (start: number, end: number, prefix?: string, suffix?: string): (string | number)[]\r\n{\r\n    const result: (string | number)[] = [];\r\n\r\n    for (let i = start; i <= end; i++)\r\n    {\r\n        if (prefix || suffix)\r\n        {\r\n            let key = (prefix) ? prefix + i.toString() : i.toString();\r\n\r\n            if (suffix)\r\n            {\r\n                key = key.concat(suffix);\r\n            }\r\n\r\n            result.push(key);\r\n        }\r\n        else\r\n        {\r\n            result.push(i);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Round a given number so it is further away from zero. That is, positive numbers are rounded up, and negative numbers are rounded down.\r\n *\r\n * @function Phaser.Math.RoundAwayFromZero\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The number to round.\r\n *\r\n * @return {number} The rounded number, rounded away from zero.\r\n */\r\nexport function RoundAwayFromZero (value: number): number\r\n{\r\n    // \"Opposite\" of truncate.\r\n    return (value > 0) ? Math.ceil(value) : Math.floor(value);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RoundAwayFromZero } from '../../math/RoundAwayFromZero';\r\n\r\n/**\r\n * Create an array of numbers (positive and/or negative) progressing from `start`\r\n * up to but not including `end` by advancing by `step`.\r\n *\r\n * If `start` is less than `end` a zero-length range is created unless a negative `step` is specified.\r\n *\r\n * Certain values for `start` and `end` (eg. NaN/undefined/null) are currently coerced to 0;\r\n * for forward compatibility make sure to pass in actual numbers.\r\n *\r\n * @example\r\n * NumberArrayStep(4);\r\n * // => [0, 1, 2, 3]\r\n *\r\n * NumberArrayStep(1, 5);\r\n * // => [1, 2, 3, 4]\r\n *\r\n * NumberArrayStep(0, 20, 5);\r\n * // => [0, 5, 10, 15]\r\n *\r\n * NumberArrayStep(0, -4, -1);\r\n * // => [0, -1, -2, -3]\r\n *\r\n * NumberArrayStep(1, 4, 0);\r\n * // => [1, 1, 1]\r\n *\r\n * NumberArrayStep(0);\r\n * // => []\r\n *\r\n * @param {number} [start=0] - The start of the range.\r\n * @param {number} [end=null] - The end of the range.\r\n * @param {number} [step=1] - The value to increment or decrement by.\r\n *\r\n * @return {number[]} The array of number values.\r\n */\r\nexport function NumberArrayStep (start: number, end: number, step: number): number[]\r\n{\r\n    const result: number[] = [];\r\n\r\n    const total = Math.max(RoundAwayFromZero((end - start) / (step || 1)), 0);\r\n\r\n    for (let i = 0; i < total; i++)\r\n    {\r\n        result.push(start);\r\n\r\n        start += step;\r\n    }\r\n\r\n    return result;\r\n}\r\n", "/**\r\n * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n/**\r\n * Converts an ArrayBuffer into a base64 string.\r\n *\r\n * The resulting string can optionally be a data uri if the `mediaType` argument is provided.\r\n *\r\n * See https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs for more details.\r\n *\r\n * @function Phaser.Utils.Base64.ArrayBufferToBase64\r\n * @since 3.18.0\r\n *\r\n * @param {ArrayBuffer} arrayBuffer - The Array Buffer to encode.\r\n * @param {string} [mediaType] - An optional media type, i.e. `audio/ogg` or `image/jpeg`. If included the resulting string will be a data URI.\r\n *\r\n * @return {string} The base64 encoded Array Buffer.\r\n */\r\nexport function ArrayBufferToBase64 (arrayBuffer: ArrayBuffer, mediaType: string): string\r\n{\r\n    const bytes = new Uint8Array(arrayBuffer);\r\n    const len = bytes.length;\r\n\r\n    let base64 = (mediaType) ? 'data:' + mediaType + ';base64,' : '';\r\n\r\n    for (let i = 0; i < len; i += 3)\r\n    {\r\n        base64 += chars[bytes[i] >> 2];\r\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\r\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\r\n        base64 += chars[bytes[i + 2] & 63];\r\n    }\r\n\r\n    if ((len % 3) === 2)\r\n    {\r\n        base64 = base64.substring(0, base64.length - 1) + '=';\r\n    }\r\n    else if (len % 3 === 1)\r\n    {\r\n        base64 = base64.substring(0, base64.length - 2) + '==';\r\n    }\r\n\r\n    return base64;\r\n}\r\n", "/**\r\n * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n//  Use a lookup table to find the index.\r\nconst lookup = new Uint8Array(256);\r\n\r\nfor (let i = 0; i < chars.length; i++)\r\n{\r\n    lookup[chars.charCodeAt(i)] = i;\r\n}\r\n\r\n/**\r\n * Converts a base64 string, either with or without a data uri, into an Array Buffer.\r\n *\r\n * @function Phaser.Utils.Base64.Base64ToArrayBuffer\r\n * @since 3.18.0\r\n *\r\n * @param {string} base64 - The base64 string to be decoded. Can optionally contain a data URI header, which will be stripped out prior to decoding.\r\n *\r\n * @return {ArrayBuffer} An ArrayBuffer decoded from the base64 data.\r\n */\r\nexport function Base64ToArrayBuffer (base64: string): ArrayBuffer\r\n{\r\n    //  Is it a data uri? if so, strip the header away\r\n    base64 = base64.substr(base64.indexOf(',') + 1);\r\n\r\n    const len = base64.length;\r\n    let bufferLength = len * 0.75;\r\n    let p = 0;\r\n    let encoded1;\r\n    let encoded2;\r\n    let encoded3;\r\n    let encoded4;\r\n\r\n    if (base64[len - 1] === '=')\r\n    {\r\n        bufferLength--;\r\n\r\n        if (base64[len - 2] === '=')\r\n        {\r\n            bufferLength--;\r\n        }\r\n    }\r\n\r\n    const arrayBuffer = new ArrayBuffer(bufferLength);\r\n    const bytes = new Uint8Array(arrayBuffer);\r\n\r\n    for (let i = 0; i < len; i += 4)\r\n    {\r\n        encoded1 = lookup[base64.charCodeAt(i)];\r\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\r\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\r\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\r\n\r\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\r\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\r\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\r\n    }\r\n\r\n    return arrayBuffer;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Takes a string and removes the character at the given index.\r\n *\r\n * @function Phaser.Utils.String.RemoveAt\r\n * @since 3.50.0\r\n *\r\n * @param {string} string - The string to be worked on.\r\n * @param {number} index - The index of the character to be removed.\r\n *\r\n * @return {string} The modified string.\r\n */\r\nexport function RemoveAt (string: string, index: number): string\r\n{\r\n    if (index === 0)\r\n    {\r\n        return string.slice(1);\r\n    }\r\n    else\r\n    {\r\n        return string.slice(0, index - 1) + string.slice(index);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Takes the given string and reverses it, returning the reversed string.\r\n * For example if given the string `Atari 520ST` it would return `TS025 iratA`.\r\n *\r\n * @function Phaser.Utils.String.Reverse\r\n * @since 3.0.0\r\n *\r\n * @param {string} string - The string to be reversed.\r\n *\r\n * @return {string} The reversed string.\r\n */\r\nexport function Reverse (string: string): string\r\n{\r\n    return string.split('').reverse().join('');\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Capitalizes the first letter of a string if there is one.\r\n * @example\r\n * UppercaseFirst('abc');\r\n * // returns 'Abc'\r\n * @example\r\n * UppercaseFirst('the happy family');\r\n * // returns 'The happy family'\r\n * @example\r\n * UppercaseFirst('');\r\n * // returns ''\r\n *\r\n * @function Phaser.Utils.String.UppercaseFirst\r\n * @since 3.0.0\r\n *\r\n * @param {string} str - The string to capitalize.\r\n *\r\n * @return {string} A new string, same as the first, but with the first letter capitalized.\r\n */\r\nexport function UppercaseFirst (str: string): string\r\n{\r\n    return str && str[0].toUpperCase() + str.slice(1);\r\n}\r\n", "export function NOOP (): void\r\n{\r\n    //  No-op\r\n}\r\n", "import { NOOP } from '../../utils';\r\n\r\n//  4x4 Matrix in column-major format\r\n\r\n/**\r\n * data[0] = m00\r\n * data[1] = m01\r\n * data[2] = m02\r\n * data[3] = m03\r\n * data[4] = m10\r\n * data[5] = m11\r\n * data[6] = m12\r\n * data[7] = m13\r\n * data[8] = m20\r\n * data[9] = m21\r\n * data[10] = m22\r\n * data[11] = m23\r\n * data[12] = m30\r\n * data[13] = m31\r\n * data[14] = m32\r\n * data[15] = m33\r\n */\r\n\r\nexport class Matrix4\r\n{\r\n    data: Float32Array;\r\n\r\n    onChange: (mat4: Matrix4) => void;\r\n\r\n    constructor (src?: Matrix4 | Float32List)\r\n    {\r\n        const data = new Float32Array(16);\r\n\r\n        this.data = data;\r\n        this.onChange = NOOP;\r\n\r\n        if (src)\r\n        {\r\n            if (Array.isArray(src))\r\n            {\r\n                this.fromArray(src);\r\n            }\r\n            else\r\n            {\r\n                this.fromArray((src as Matrix4).data);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            data[0] = 1;\r\n            data[5] = 1;\r\n            data[10] = 1;\r\n            data[15] = 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param m00 - 1st value of 1st row\r\n     * @param m01 - 2nd value of 1st row\r\n     * @param m02 - 3rd value of 1st row\r\n     * @param m03 - 4th value of 1st row\r\n     * @param m10 - 1st value of 2nd row\r\n     * @param m11 - 2nd value of 2nd row\r\n     * @param m12 - 3rd value of 2nd row\r\n     * @param m13 - 4th value of 2nd row\r\n     * @param m20 - 1st value of 3rd row\r\n     * @param m21 - 2nd value of 3rd row\r\n     * @param m22 - 3rd value of 3rd row\r\n     * @param m23 - 4th value of 3rd row\r\n     * @param m30 - 1st value of 4th row\r\n     * @param m31 - 2nd value of 4th row\r\n     * @param m32 - 3rd value of 4th row\r\n     * @param m33 - 4th value of 4th row\r\n     */\r\n    set (m00: number, m01: number, m02: number, m03: number, m10: number, m11: number, m12: number, m13: number, m20: number, m21: number, m22: number, m23: number, m30: number, m31: number, m32: number, m33: number): this\r\n    {\r\n        const data = this.data;\r\n\r\n        data[ 0 ] = m00;\r\n        data[ 1 ] = m01;\r\n        data[ 2 ] = m02;\r\n        data[ 3 ] = m03;\r\n\r\n        data[ 4 ] = m10;\r\n        data[ 5 ] = m11;\r\n        data[ 6 ] = m12;\r\n        data[ 7 ] = m13;\r\n\r\n        data[ 8 ] = m20;\r\n        data[ 9 ] = m21;\r\n        data[ 10 ] = m22;\r\n        data[ 11 ] = m23;\r\n\r\n        data[ 12 ] = m30;\r\n        data[ 13 ] = m31;\r\n        data[ 14 ] = m32;\r\n        data[ 15 ] = m33;\r\n\r\n        this.onChange(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    toArray (dst: Float32List = [], index: number = 0): Float32List\r\n    {\r\n        const data = this.data;\r\n\r\n        for (let i = 0; i < 16; i++)\r\n        {\r\n            dst[ index + i ] = data[i];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    fromArray (src: Float32List, index: number = 0): this\r\n    {\r\n        const data = this.data;\r\n\r\n        for (let i = 0; i < 16; i++)\r\n        {\r\n            data[i] = src[ index + i ];\r\n        }\r\n\r\n        this.onChange(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    toString (): string\r\n    {\r\n        return '[ mat4=' + this.data.join(', ') + ' ]';\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.onChange = NOOP;\r\n        this.data = null;\r\n    }\r\n}\r\n", "import { Matrix4 } from './Matrix4';\r\n\r\n// Generates a orthogonal projection matrix with the given bounds\r\n\r\nexport function Mat4Ortho (left: number, right: number, bottom: number, top: number, near: number, far: number, out: Matrix4 = new Matrix4()): Matrix4\r\n{\r\n    const lr = 1 / (left - right);\r\n    const bt = 1 / (bottom - top);\r\n    const nf = 1 / (near - far);\r\n\r\n    return out.set(\r\n        -2 * lr,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        -2 * bt,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        2 * nf,\r\n        0,\r\n        (left + right) * lr,\r\n        (top + bottom) * bt,\r\n        (far + near) * nf,\r\n        1\r\n    );\r\n}\r\n", "const BYTE                   = 0x1400;\r\nconst UNSIGNED_BYTE          = 0x1401;\r\nconst SHORT                  = 0x1402;\r\nconst UNSIGNED_SHORT         = 0x1403;\r\nconst INT                    = 0x1404;\r\nconst UNSIGNED_INT           = 0x1405;\r\nconst FLOAT                  = 0x1406;\r\nconst REPEAT                 = 0x2901;  // eslint-disable-line\r\nconst CLAMP_TO_EDGE          = 0x812F;\r\nconst MIRRORED_REPEAT        = 0x8370;  // eslint-disable-line\r\nconst NEAREST                = 0x2600;  // eslint-disable-line\r\nconst LINEAR                 = 0x2601;\r\nconst NEAREST_MIPMAP_NEAREST = 0x2700;  // eslint-disable-line\r\nconst LINEAR_MIPMAP_NEAREST  = 0x2701;  // eslint-disable-line\r\nconst NEAREST_MIPMAP_LINEAR  = 0x2702;  // eslint-disable-line\r\nconst LINEAR_MIPMAP_LINEAR   = 0x2703;  // eslint-disable-line\r\n\r\nexport {\r\n    BYTE,\r\n    UNSIGNED_BYTE,\r\n    SHORT,\r\n    UNSIGNED_SHORT,\r\n    INT,\r\n    UNSIGNED_INT,\r\n    FLOAT,\r\n    REPEAT,\r\n    CLAMP_TO_EDGE,\r\n    MIRRORED_REPEAT,\r\n    NEAREST,\r\n    LINEAR,\r\n    NEAREST_MIPMAP_NEAREST,\r\n    LINEAR_MIPMAP_NEAREST,\r\n    NEAREST_MIPMAP_LINEAR,\r\n    LINEAR_MIPMAP_LINEAR\r\n};\r\n", "import * as GL_CONST from '../GL_CONST';\r\n\r\nimport { IVertexAttribPointer } from './IVertexAttribPointer';\r\nimport { gl } from '../GL';\r\n\r\nexport type ShaderAttributeEntry = {\r\n    size: number;\r\n    type?: number;\r\n    normalized?: boolean;\r\n    stride?: number;\r\n};\r\n\r\nexport function CreateAttributes (program: WebGLProgram, attribs: Record<string, ShaderAttributeEntry>): Map<string, IVertexAttribPointer>\r\n{\r\n    const attributes = new Map();\r\n\r\n    const defaultSettings: ShaderAttributeEntry =\r\n    {\r\n        size: 1,\r\n        type: GL_CONST.FLOAT,\r\n        normalized: false,\r\n        stride: 0\r\n    };\r\n\r\n    let offset = 0;\r\n\r\n    for (const [ name, entry ] of Object.entries(attribs))\r\n    {\r\n        const index = gl.getAttribLocation(program, name);\r\n\r\n        if (index !== -1)\r\n        {\r\n            gl.enableVertexAttribArray(index);\r\n\r\n            const {\r\n\r\n                size = defaultSettings.size,\r\n                type = defaultSettings.type,\r\n                normalized = defaultSettings.normalized,\r\n                stride = defaultSettings.stride\r\n\r\n            } = entry;\r\n\r\n            attributes.set(name, { index, size, type, normalized, stride, offset });\r\n\r\n            //  Default value as used by FLOAT, UNSIGNED_INT and INT\r\n            let typeSize = 4;\r\n\r\n            if (type === GL_CONST.UNSIGNED_SHORT || type === GL_CONST.SHORT)\r\n            {\r\n                typeSize = 2;\r\n            }\r\n            else if (type === GL_CONST.UNSIGNED_BYTE || type === GL_CONST.BYTE)\r\n            {\r\n                typeSize = 1;\r\n            }\r\n\r\n            offset += size * typeSize;\r\n        }\r\n    }\r\n\r\n    return attributes;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function DeleteShaders (...shaders: WebGLShader[]): void\r\n{\r\n    shaders.forEach(shader =>\r\n    {\r\n        gl.deleteShader(shader);\r\n    });\r\n}\r\n", "import { DeleteShaders } from './DeleteShaders';\r\nimport { gl } from '../GL';\r\n\r\nexport function CreateProgram (...shaders: WebGLShader[]): WebGLProgram\r\n{\r\n    const program = gl.createProgram();\r\n\r\n    shaders.forEach(shader =>\r\n    {\r\n        gl.attachShader(program, shader);\r\n    });\r\n\r\n    gl.linkProgram(program);\r\n\r\n    const status = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n\r\n    if (!status)\r\n    {\r\n        const info = gl.getProgramInfoLog(program);\r\n\r\n        console.error(`Error linking program: ${info}`);\r\n\r\n        gl.deleteProgram(program);\r\n\r\n        DeleteShaders(...shaders);\r\n\r\n        return null;\r\n    }\r\n\r\n    return program;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport function CreateShader (source: string, type: GLenum): WebGLShader | null\r\n{\r\n    const shader = gl.createShader(type);\r\n\r\n    gl.shaderSource(shader, source);\r\n\r\n    gl.compileShader(shader);\r\n\r\n    const status = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\r\n    if (!status)\r\n    {\r\n        const info = gl.getShaderInfoLog(shader);\r\n\r\n        //  Adding line numbers idea borrowed from Gregg Tavares!\r\n        const sourceLines = source.split('\\n').map((line, index) =>\r\n        {\r\n            return `${index}: ${line}`;\r\n        });\r\n\r\n        console.error(`Error compiling shader: ${info}`, sourceLines.join('\\n'));\r\n\r\n        gl.deleteShader(shader);\r\n\r\n        return null;\r\n    }\r\n\r\n    return shader;\r\n}\r\n", "import { gl } from '../GL';\r\n\r\nexport type FloatSetter = (v: number) => void;\r\nexport type F32Setter = (v: Float32List) => void;\r\nexport type I32Setter = (v: Int32List) => void;\r\n\r\nexport function CreateUniformSetter (uniform: WebGLActiveInfo, location: WebGLUniformLocation, isArray: boolean = false): FloatSetter | F32Setter | I32Setter\r\n{\r\n    switch (uniform.type)\r\n    {\r\n        case gl.INT:\r\n        case gl.BOOL:\r\n        {\r\n            if (isArray)\r\n            {\r\n                return (v: Int32List): void =>\r\n                {\r\n                    gl.uniform1iv(location, v);\r\n                };\r\n            }\r\n            else\r\n            {\r\n                return (v: number): void =>\r\n                {\r\n                    gl.uniform1i(location, v);\r\n                };\r\n            }\r\n        }\r\n\r\n        case gl.INT_VEC2:\r\n        case gl.BOOL_VEC2:\r\n        {\r\n            return (v: Int32List): void =>\r\n            {\r\n                gl.uniform2iv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.INT_VEC3:\r\n        case gl.BOOL_VEC3:\r\n        {\r\n            return (v: Int32List): void =>\r\n            {\r\n                gl.uniform3iv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.INT_VEC4:\r\n        case gl.BOOL_VEC4:\r\n        {\r\n            return (v: Int32List): void =>\r\n            {\r\n                gl.uniform4iv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT:\r\n        {\r\n            if (isArray)\r\n            {\r\n                return (v: Float32List): void =>\r\n                {\r\n                    gl.uniform1fv(location, v);\r\n                };\r\n            }\r\n            else\r\n            {\r\n                return (v: number): void =>\r\n                {\r\n                    gl.uniform1f(location, v);\r\n                };\r\n            }\r\n        }\r\n\r\n        case gl.FLOAT_VEC2:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniform2fv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_VEC3:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniform3fv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_VEC4:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniform4fv(location, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_MAT2:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniformMatrix2fv(location, false, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_MAT3:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniformMatrix3fv(location, false, v);\r\n            };\r\n        }\r\n\r\n        case gl.FLOAT_MAT4:\r\n        {\r\n            return (v: Float32List): void =>\r\n            {\r\n                gl.uniformMatrix4fv(location, false, v);\r\n            };\r\n        }\r\n\r\n        case gl.SAMPLER_2D:\r\n        case gl.SAMPLER_CUBE:\r\n        {\r\n            if (uniform.size > 1)\r\n            {\r\n                return (v: Int32List): void =>\r\n                {\r\n                    gl.uniform1iv(location, v);\r\n                };\r\n            }\r\n            else\r\n            {\r\n                return (v: number): void =>\r\n                {\r\n                    gl.uniform1i(location, v);\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\n", "import { CreateUniformSetter } from './CreateUniformSetter';\r\nimport { gl } from '../GL';\r\n\r\nexport function CreateUniforms (program: WebGLProgram): Map<string, Function>\r\n{\r\n    const uniforms = new Map();\r\n\r\n    const total = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\r\n\r\n    for (let i = 0; i < total; i++)\r\n    {\r\n        const uniform = gl.getActiveUniform(program, i);\r\n\r\n        let name = uniform.name;\r\n\r\n        if (name.startsWith('gl_') || name.startsWith('webgl_'))\r\n        {\r\n            //  Skip built-in uniforms\r\n            continue;\r\n        }\r\n\r\n        const location = gl.getUniformLocation(program, uniform.name);\r\n\r\n        if (location)\r\n        {\r\n            let isArray = false;\r\n\r\n            //  If uniform name has [0] at the end, remove it\r\n            if (name.endsWith('[0]'))\r\n            {\r\n                name = name.slice(0, -3);\r\n\r\n                isArray = (uniform.size > 1);\r\n            }\r\n\r\n            uniforms.set(name, CreateUniformSetter(uniform, location, isArray));\r\n        }\r\n    }\r\n\r\n    return uniforms;\r\n}\r\n", "import * as GL_CONST from '../GL_CONST';\r\n\r\nimport { ShaderAttributeEntry } from './CreateAttributes';\r\n\r\nexport const DefaultQuadAttributes: Record<string, ShaderAttributeEntry> =\r\n{\r\n    aVertexPosition: { size: 2 },\r\n    aTextureCoord: { size: 2 },\r\n    aTextureId: { size: 1 },\r\n    aTintColor: { size: 4 }\r\n};\r\n", "export const DefaultQuadUniforms: Record<string, Number | Float32List> =\r\n{\r\n    uProjectionMatrix: new Float32Array(),\r\n    uCameraMatrix: new Float32Array(),\r\n    uTexture: 0\r\n};\r\n", "import { gl } from '../GL';\r\n\r\nexport function CreateDepthBuffer (framebuffer: WebGLFramebuffer, textureWidth: number, textureHeight: number): WebGLRenderbuffer\r\n{\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n\r\n    const depthBuffer = gl.createRenderbuffer();\r\n\r\n    gl.bindRenderbuffer(gl.RENDERBUFFER, depthBuffer);\r\n\r\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, textureWidth, textureHeight);\r\n\r\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthBuffer);\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\r\n    return depthBuffer;\r\n}\r\n", "export const SINGLE_QUAD_FRAG =\r\n`#define SHADER_NAME SINGLE_QUAD_FRAG\r\n\r\nprecision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture;\r\n\r\nvoid main (void)\r\n{\r\n    vec4 color = texture2D(uTexture, vTextureCoord);\r\n\r\n    gl_FragColor = color * vec4(vTintColor.rgb * vTintColor.a, vTintColor.a);\r\n}`;\r\n", "export const SINGLE_QUAD_VERT =\r\n`#define SHADER_NAME SINGLE_QUAD_VERT\r\n\r\nprecision highp float;\r\n\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute float aTextureId;\r\nattribute vec4 aTintColor;\r\n\r\nuniform mat4 uProjectionMatrix;\r\nuniform mat4 uCameraMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nvoid main (void)\r\n{\r\n    vTextureCoord = aTextureCoord;\r\n    vTextureId = aTextureId;\r\n    vTintColor = aTintColor;\r\n\r\n    gl_Position = uProjectionMatrix * uCameraMatrix * vec4(aVertexPosition, 0.0, 1.0);\r\n}`;\r\n", "export const TYPES_ENUM = {\r\n  i8: 'i8',\r\n  ui8: 'ui8',\r\n  ui8c: 'ui8c',\r\n  i16: 'i16',\r\n  ui16: 'ui16',\r\n  i32: 'i32',\r\n  ui32: 'ui32',\r\n  f32: 'f32',\r\n  f64: 'f64'\r\n}\r\n\r\nexport const TYPES_NAMES = {\r\n  i8: 'Int8',\r\n  ui8: 'Uint8',\r\n  ui8c: 'Uint8Clamped',\r\n  i16: 'Int16',\r\n  ui16: 'Uint16',\r\n  i32: 'Int32',\r\n  ui32: 'Uint32',\r\n  f32: 'Float32',\r\n  f64: 'Float64'\r\n}\r\n\r\nexport const TYPES = {\r\n  i8: Int8Array,\r\n  ui8: Uint8Array,\r\n  ui8c: Uint8ClampedArray,\r\n  i16: Int16Array,\r\n  ui16: Uint16Array,\r\n  i32: Int32Array,\r\n  ui32: Uint32Array,\r\n  f32: Float32Array,\r\n  f64: Float64Array\r\n}\r\n\r\nconst UNSIGNED_MAX = {\r\n  uint8: 2**8,\r\n  uint16: 2**16,\r\n  uint32: 2**32\r\n}\r\n\r\nconst roundToMultiple4 = x => Math.ceil(x / 4) * 4\r\n\r\nexport const $storeRef = Symbol('storeRef')\r\nexport const $storeSize = Symbol('storeSize')\r\nexport const $storeMaps = Symbol('storeMaps')\r\nexport const $storeFlattened = Symbol('storeFlattened')\r\nexport const $storeBase = Symbol('storeBase')\r\nexport const $storeType = Symbol('storeType')\r\n\r\nexport const $storeArrayCounts = Symbol('storeArrayCount')\r\nexport const $storeSubarrays = Symbol('storeSubarrays')\r\nexport const $storeCursor = Symbol('storeCursor')\r\nexport const $subarrayCursors = Symbol('subarrayCursors')\r\nexport const $subarray = Symbol('subarray')\r\nexport const $subarrayFrom = Symbol('subarrayFrom')\r\nexport const $subarrayTo = Symbol('subarrayTo')\r\nexport const $parentArray = Symbol('subStore')\r\nexport const $tagStore = Symbol('tagStore')\r\n\r\nexport const $queryShadow = Symbol('queryShadow')\r\nexport const $serializeShadow = Symbol('serializeShadow')\r\n\r\nexport const $indexType = Symbol('indexType')\r\nexport const $indexBytes = Symbol('indexBytes')\r\n\r\nconst stores = {}\r\n\r\nexport const resize = (ta, size) => {\r\n  const newBuffer = new ArrayBuffer(size * ta.BYTES_PER_ELEMENT)\r\n  const newTa = new ta.constructor(newBuffer)\r\n  newTa.set(ta, 0)\r\n  return newTa\r\n}\r\n\r\nexport const createShadow = (store, key) => {\r\n  if (!ArrayBuffer.isView(store)) {\r\n    const shadow = store[$parentArray].slice(0).fill(0)\r\n    for (const k in store[key]) {\r\n      const from = store[key][k][$subarrayFrom]\r\n      const to = store[key][k][$subarrayTo]\r\n      store[key][k] = shadow.subarray(from, to)\r\n    }\r\n  } else {\r\n    store[key] = store.slice(0).fill(0)\r\n  }\r\n}\r\n\r\nconst resizeSubarray = (metadata, store, size) => {\r\n  const cursors = metadata[$subarrayCursors]\r\n  const type = store[$storeType]\r\n  const length = store[0].length\r\n  const indexType =\r\n    length <= UNSIGNED_MAX.uint8\r\n      ? 'ui8'\r\n      : length <= UNSIGNED_MAX.uint16\r\n        ? 'ui16'\r\n        : 'ui32'\r\n        \r\n  const arrayCount = metadata[$storeArrayCounts][type]\r\n  const summedLength = Array(arrayCount).fill(0).reduce((a, p) => a + length, 0)\r\n  \r\n  // for threaded impl\r\n  // const summedBytesPerElement = Array(arrayCount).fill(0).reduce((a, p) => a + TYPES[type].BYTES_PER_ELEMENT, 0)\r\n  // const totalBytes = roundToMultiple4(summedBytesPerElement * summedLength * size)\r\n  // const buffer = new ArrayBuffer(totalBytes)\r\n\r\n  const array = new TYPES[type](summedLength * size)\r\n\r\n  array.set(metadata[$storeSubarrays][type])\r\n  \r\n  metadata[$storeSubarrays][type] = array\r\n  createShadow(metadata[$storeSubarrays][type], $queryShadow)\r\n  createShadow(metadata[$storeSubarrays][type], $serializeShadow)\r\n  \r\n  array[$indexType] = TYPES_NAMES[indexType]\r\n  array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT\r\n\r\n  const start = cursors[type]\r\n  let end = 0\r\n  for (let eid = 0; eid < size; eid++) {\r\n    const from = cursors[type] + (eid * length)\r\n    const to = from + length\r\n\r\n    store[eid] = metadata[$storeSubarrays][type].subarray(from, to)\r\n    \r\n    store[eid][$subarrayFrom] = from\r\n    store[eid][$subarrayTo] = to\r\n    store[eid][$queryShadow] = metadata[$storeSubarrays][type][$queryShadow].subarray(from, to)\r\n    store[eid][$serializeShadow] = metadata[$storeSubarrays][type][$serializeShadow].subarray(from, to)\r\n    store[eid][$subarray] = true\r\n    store[eid][$indexType] = array[$indexType]\r\n    store[eid][$indexBytes] = array[$indexBytes]\r\n    \r\n    end = to\r\n  }\r\n\r\n  cursors[type] = end\r\n\r\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end)\r\n}\r\n\r\nconst resizeRecursive = (metadata, store, size) => {\r\n  Object.keys(store).forEach(key => {\r\n    const ta = store[key]\r\n    if (Array.isArray(ta)) {\r\n      resizeSubarray(metadata, ta, size)\r\n      store[$storeFlattened].push(ta)\r\n    } else if (ArrayBuffer.isView(ta)) {\r\n      store[key] = resize(ta, size)\r\n      store[$storeFlattened].push(store[key])\r\n      store[key][$queryShadow] = resize(ta[$queryShadow], size)\r\n      store[key][$serializeShadow] = resize(ta[$serializeShadow], size)\r\n    } else if (typeof ta === 'object') {\r\n      resizeRecursive(metadata, store[key], size)\r\n    }\r\n  })\r\n}\r\n\r\nexport const resizeStore = (store, size) => {\r\n  if (store[$tagStore]) return\r\n  store[$storeSize] = size\r\n  store[$storeFlattened].length = 0\r\n  Object.keys(store[$subarrayCursors]).forEach(k => {\r\n    store[$subarrayCursors][k] = 0\r\n  })\r\n  resizeRecursive(store, store, size)\r\n}\r\n\r\nexport const resetStore = store => {\r\n  if (store[$storeFlattened]) {\r\n    store[$storeFlattened].forEach(ta => {\r\n      ta.fill(0)\r\n    })\r\n    Object.keys(store[$storeSubarrays]).forEach(key => {\r\n      store[$storeSubarrays][key].fill(0)\r\n    })\r\n  }\r\n}\r\n\r\nexport const resetStoreFor = (store, eid) => {\r\n  if (store[$storeFlattened]) {\r\n    store[$storeFlattened].forEach(ta => {\r\n      if (ArrayBuffer.isView(ta)) ta[eid] = 0\r\n      else ta[eid].fill(0)\r\n    })\r\n  }\r\n}\r\n\r\nconst createTypeStore = (type, length) => {\r\n  const totalBytes = length * TYPES[type].BYTES_PER_ELEMENT\r\n  const buffer = new ArrayBuffer(totalBytes)\r\n  return new TYPES[type](buffer)\r\n}\r\n\r\nexport const parentArray = store => store[$parentArray]\r\n\r\nconst createArrayStore = (metadata, type, length) => {\r\n  const size = metadata[$storeSize]\r\n  const store = Array(size).fill(0)\r\n  store[$storeType] = type\r\n\r\n  const cursors = metadata[$subarrayCursors]\r\n  const indexType =\r\n    length < UNSIGNED_MAX.uint8\r\n      ? 'ui8'\r\n      : length < UNSIGNED_MAX.uint16\r\n        ? 'ui16'\r\n        : 'ui32'\r\n\r\n  if (!length) throw new Error('\u274C Must define a length for component array.')\r\n  if (!TYPES[type]) throw new Error(`\u274C Invalid component array property type ${type}.`)\r\n\r\n  // create buffer for type if it does not already exist\r\n  if (!metadata[$storeSubarrays][type]) {\r\n    const arrayCount = metadata[$storeArrayCounts][type]\r\n    const summedLength = Array(arrayCount).fill(0).reduce((a, p) => a + length, 0)\r\n    \r\n    // for threaded impl\r\n    // const summedBytesPerElement = Array(arrayCount).fill(0).reduce((a, p) => a + TYPES[type].BYTES_PER_ELEMENT, 0)\r\n    // const totalBytes = roundToMultiple4(summedBytesPerElement * summedLength * size)\r\n    // const buffer = new ArrayBuffer(totalBytes)\r\n\r\n    const array = new TYPES[type](summedLength * size)\r\n\r\n    metadata[$storeSubarrays][type] = array\r\n    createShadow(metadata[$storeSubarrays][type], $queryShadow)\r\n    createShadow(metadata[$storeSubarrays][type], $serializeShadow)\r\n    \r\n    array[$indexType] = TYPES_NAMES[indexType]\r\n    array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT\r\n  }\r\n\r\n  // pre-generate subarrays for each eid\r\n  const start = cursors[type]\r\n  let end = 0\r\n  for (let eid = 0; eid < size; eid++) {\r\n    const from = cursors[type] + (eid * length)\r\n    const to = from + length\r\n\r\n    store[eid] = metadata[$storeSubarrays][type].subarray(from, to)\r\n    \r\n    store[eid][$subarrayFrom] = from\r\n    store[eid][$subarrayTo] = to\r\n    store[eid][$queryShadow] = metadata[$storeSubarrays][type][$queryShadow].subarray(from, to)\r\n    store[eid][$serializeShadow] = metadata[$storeSubarrays][type][$serializeShadow].subarray(from, to)\r\n    store[eid][$subarray] = true\r\n    store[eid][$indexType] = TYPES_NAMES[indexType]\r\n    store[eid][$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT\r\n    \r\n    end = to\r\n  }\r\n\r\n  cursors[type] = end\r\n\r\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end)\r\n\r\n  return store\r\n}\r\n\r\nconst isArrayType = x => Array.isArray(x) && typeof x[0] === 'string' && typeof x[1] === 'number'\r\n\r\nexport const createStore = (schema, size) => {\r\n  const $store = Symbol('store')\r\n\r\n  if (!schema || !Object.keys(schema).length) {\r\n    // tag component\r\n    stores[$store] = {\r\n      [$storeSize]: size,\r\n      [$tagStore]: true,\r\n      [$storeBase]: () => stores[$store]\r\n    }\r\n    return stores[$store]\r\n  }\r\n\r\n  schema = JSON.parse(JSON.stringify(schema))\r\n\r\n  const arrayCounts = {}\r\n  const collectArrayCounts = s => {\r\n    const keys = Object.keys(s)\r\n    for (const k of keys) {\r\n      if (isArrayType(s[k])) {\r\n        if (!arrayCounts[s[k][0]]) arrayCounts[s[k][0]] = 0\r\n        arrayCounts[s[k][0]]++\r\n      } else if (s[k] instanceof Object) {\r\n        collectArrayCounts(s[k])\r\n      }\r\n    }\r\n  }\r\n  collectArrayCounts(schema)\r\n\r\n  const metadata = {\r\n    [$storeSize]: size,\r\n    [$storeMaps]: {},\r\n    [$storeSubarrays]: {},\r\n    [$storeRef]: $store,\r\n    [$storeCursor]: 0,\r\n    [$subarrayCursors]: Object.keys(TYPES).reduce((a, type) => ({ ...a, [type]: 0 }), {}),\r\n    [$storeFlattened]: [],\r\n    [$storeArrayCounts]: arrayCounts\r\n  }\r\n\r\n  if (schema instanceof Object && Object.keys(schema).length) {\r\n\r\n    const recursiveTransform = (a, k) => {\r\n\r\n      if (typeof a[k] === 'string') {\r\n\r\n        a[k] = createTypeStore(a[k], size)\r\n        createShadow(a[k], $queryShadow)\r\n        createShadow(a[k], $serializeShadow)\r\n        a[k][$storeBase] = () => stores[$store]\r\n        metadata[$storeFlattened].push(a[k])\r\n\r\n      } else if (isArrayType(a[k])) {\r\n        \r\n        const [type, length] = a[k]\r\n        a[k] = createArrayStore(metadata, type, length)\r\n        a[k][$storeBase] = () => stores[$store]\r\n        metadata[$storeFlattened].push(a[k])\r\n        // Object.seal(a[k])\r\n\r\n      } else if (a[k] instanceof Object) {\r\n        \r\n        a[k] = Object.keys(a[k]).reduce(recursiveTransform, a[k])\r\n        // Object.seal(a[k])\r\n        \r\n      }\r\n\r\n      return a\r\n    }\r\n\r\n    stores[$store] = Object.assign(Object.keys(schema).reduce(recursiveTransform, schema), metadata)\r\n    stores[$store][$storeBase] = () => stores[$store]\r\n\r\n    // Object.seal(stores[$store])\r\n\r\n    return stores[$store]\r\n\r\n  }\r\n}\r\n\r\nexport const free = (store) => {\r\n  delete stores[store[$storeRef]]\r\n}", "export const Uint32SparseSet = (length) => {\r\n  const dense = new Uint32Array(length)\r\n  const sparse = new Uint32Array(length)\r\n\r\n  let cursor = 0\r\n  dense.count = () => cursor + 1\r\n\r\n  const has = val => dense[sparse[val]] === val\r\n\r\n  const add = val => {\r\n    if (has(val)) return\r\n    sparse[val] = cursor\r\n    dense[cursor] = val\r\n\r\n    cursor++\r\n  }\r\n\r\n  const remove = val => {\r\n    if (!has(val)) return\r\n    const index = sparse[val]\r\n    const swapped = dense[cursor]\r\n    if (swapped !== val) {\r\n      dense[index] = swapped\r\n      sparse[swapped] = index\r\n    }\r\n\r\n    cursor--\r\n  }\r\n\r\n  return {\r\n    add,\r\n    remove,\r\n    has,\r\n    sparse,\r\n    dense,\r\n  }\r\n}\r\n\r\nexport const SparseSet = () => {\r\n  const dense = []\r\n  const sparse = []\r\n\r\n  dense.count = () => dense.length\r\n\r\n  const has = val => dense[sparse[val]] === val\r\n\r\n  const add = val => {\r\n    if (has(val)) return\r\n    sparse[val] = dense.push(val) - 1\r\n  }\r\n\r\n  const remove = val => {\r\n    if (!has(val)) return\r\n    const index = sparse[val]\r\n    const swapped = dense.pop()\r\n    if (swapped !== val) {\r\n      dense[index] = swapped\r\n      sparse[swapped] = index\r\n    }\r\n  }\r\n\r\n  return {\r\n    add,\r\n    remove,\r\n    has,\r\n    sparse,\r\n    dense,\r\n  }\r\n}", "import { $indexBytes, $indexType, $serializeShadow, $storeBase, $storeFlattened, $tagStore, createShadow } from \"./Storage.js\"\r\nimport { $componentMap, addComponent, hasComponent } from \"./Component.js\"\r\nimport { $entityArray, $entityEnabled, $entitySparseSet, addEntity, eidToWorld } from \"./Entity.js\"\r\nimport { $localEntities } from \"./World.js\"\r\n\r\nexport const DESERIALIZE_MODE = {\r\n  REPLACE: 0,\r\n  APPEND: 1,\r\n  MAP: 2\r\n}\r\n\r\nlet resized = false\r\n\r\nexport const setSerializationResized = v => { resized = v }\r\n\r\nconst canonicalize = (target) => {\r\n  let componentProps = []\r\n  let changedProps = new Map()\r\n  if (Array.isArray(target)) {\r\n    componentProps = target\r\n      .map(p => {\r\n        if (!p) throw new Error('\uD83D\uDC7E bitECS - undefined component passed into serializer.')\r\n        if (typeof p === 'function' && p.name === 'QueryChanged') {\r\n          p()[$storeFlattened].forEach(prop => {\r\n            const $ = Symbol()\r\n            createShadow(prop, $)\r\n            changedProps.set(prop, $)\r\n          })\r\n          return p()[$storeFlattened]\r\n        }\r\n        if (Object.getOwnPropertySymbols(p).includes($storeFlattened)) {\r\n          return p[$storeFlattened]\r\n        }\r\n        if (Object.getOwnPropertySymbols(p).includes($storeBase)) {\r\n          return p\r\n        }\r\n      })\r\n      .reduce((a,v) => a.concat(v), [])\r\n  }\r\n  return [componentProps, changedProps]\r\n}\r\n\r\nexport const defineSerializer = (target, maxBytes = 20000000) => {\r\n  const isWorld = Object.getOwnPropertySymbols(target).includes($componentMap)\r\n\r\n  let [componentProps, changedProps] = canonicalize(target)\r\n\r\n  // TODO: calculate max bytes based on target & recalc upon resize\r\n\r\n  const buffer = new ArrayBuffer(maxBytes)\r\n  const view = new DataView(buffer)\r\n\r\n  return (ents) => {\r\n\r\n    if (resized) {\r\n      [componentProps, changedProps] = canonicalize(target)\r\n      resized = false\r\n    }\r\n\r\n    if (isWorld) {\r\n      componentProps = []\r\n      target[$componentMap].forEach((c, component) => {\r\n        if (component[$storeFlattened])\r\n          componentProps.push(...component[$storeFlattened])\r\n        else componentProps.push(component)\r\n      })\r\n    }\r\n    \r\n    let world\r\n    if (Object.getOwnPropertySymbols(ents).includes($componentMap)) {\r\n      world = ents\r\n      ents = ents[$entityArray]\r\n    } else {\r\n      world = eidToWorld.get(ents[0])\r\n    }\r\n\r\n    if (!ents.length) return\r\n\r\n    let where = 0\r\n\r\n    // iterate over component props\r\n    for (let pid = 0; pid < componentProps.length; pid++) {\r\n      const prop = componentProps[pid]\r\n      const diff = changedProps.get(prop)\r\n      \r\n      // write pid\r\n      view.setUint8(where, pid)\r\n      where += 1\r\n\r\n      // save space for entity count\r\n      const countWhere = where\r\n      where += 4\r\n      \r\n      let count = 0\r\n      // write eid,val\r\n      for (let i = 0; i < ents.length; i++) {\r\n        const eid = ents[i]\r\n\r\n        // skip if entity doesn't have this component\r\n        if (!hasComponent(world, prop[$storeBase](), eid)) {\r\n          continue\r\n        }\r\n\r\n        // skip if diffing and no change\r\n        // TODO: optimize array diff\r\n        if (diff) {\r\n          if (ArrayBuffer.isView(prop[eid])) {\r\n            let dirty = false\r\n            for (let i = 0; i < prop[eid].length; i++) {\r\n              if(prop[eid][i] !== prop[eid][$serializeShadow][i]) {\r\n                dirty = true\r\n                break\r\n              }\r\n            }\r\n            if (dirty) continue\r\n          } else if (prop[eid] === prop[diff][eid]) continue\r\n        }\r\n\r\n        count++\r\n\r\n        // write eid\r\n        view.setUint32(where, eid)\r\n        where += 4\r\n\r\n        if (prop[$tagStore]) {\r\n          continue\r\n        }\r\n\r\n        // if property is an array\r\n        if (ArrayBuffer.isView(prop[eid])) {\r\n          const type = prop[eid].constructor.name.replace('Array', '')\r\n          const indexType = prop[eid][$indexType]\r\n          const indexBytes = prop[eid][$indexBytes]\r\n\r\n          // add space for count of dirty array elements\r\n          const countWhere2 = where\r\n          where += 1\r\n\r\n          let count2 = 0\r\n\r\n          // write index,value\r\n          for (let i = 0; i < prop[eid].length; i++) {\r\n            const value = prop[eid][i]\r\n\r\n            if (diff && prop[eid][i] === prop[eid][$serializeShadow][i]) {\r\n              continue\r\n            }\r\n\r\n            // write array index\r\n            view[`set${indexType}`](where, i)\r\n            where += indexBytes\r\n\r\n            // write value at that index\r\n            view[`set${type}`](where, value)\r\n            where += prop[eid].BYTES_PER_ELEMENT\r\n            count2++\r\n          }\r\n\r\n          // write total element count\r\n          view[`set${indexType}`](countWhere2, count2)\r\n\r\n        } else {\r\n          // regular property values\r\n          const type = prop.constructor.name.replace('Array', '')\r\n          // set value next [type] bytes\r\n          view[`set${type}`](where, prop[eid])\r\n          where += prop.BYTES_PER_ELEMENT\r\n\r\n          // sync shadow state\r\n          prop[$serializeShadow][eid] = prop[eid]\r\n        }\r\n      }\r\n\r\n      view.setUint32(countWhere, count)\r\n    }\r\n    return buffer.slice(0, where)\r\n  }\r\n}\r\n\r\nconst newEntities = new Map()\r\n\r\nexport const defineDeserializer = (target) => {\r\n  const isWorld = Object.getOwnPropertySymbols(target).includes($componentMap)\r\n  let [componentProps] = canonicalize(target)\r\n\r\n\r\n  return (world, packet, mode=0) => {\r\n\r\n    newEntities.clear()\r\n    \r\n    if (resized) {\r\n      [componentProps] = canonicalize(target)\r\n      resized = false\r\n    }\r\n\r\n    if (isWorld) {\r\n      componentProps = []\r\n      target[$componentMap].forEach((c, component) => {\r\n        if (component[$storeFlattened])\r\n          componentProps.push(...component[$storeFlattened])\r\n        else componentProps.push(component)\r\n      })\r\n    }\r\n\r\n    const localEntities = world[$localEntities]\r\n\r\n    const view = new DataView(packet)\r\n    let where = 0\r\n\r\n    while (where < packet.byteLength) {\r\n\r\n      // pid\r\n      const pid = view.getUint8(where)\r\n      where += 1\r\n\r\n      // entity count\r\n      const entityCount = view.getUint32(where)\r\n      where += 4\r\n\r\n      // component property\r\n      const prop = componentProps[pid]\r\n\r\n      // Get the entities and set their prop values\r\n      for (let i = 0; i < entityCount; i++) {\r\n        let eid = view.getUint32(where)\r\n        where += 4\r\n\r\n        let newEid = newEntities.get(eid)\r\n        if (newEid !== undefined) {\r\n          eid = newEid\r\n        }\r\n\r\n\r\n        if (mode === DESERIALIZE_MODE.MAP) {\r\n          if (localEntities.has(eid)) {\r\n            eid = localEntities.get(eid)\r\n          } else if (newEntities.has(eid)) {\r\n              eid = newEntities.get(eid)\r\n          } else {\r\n            const newEid = addEntity(world)\r\n            localEntities.set(eid, newEid)\r\n            newEntities.set(eid, newEid)\r\n            eid = newEid\r\n          }\r\n        }\r\n\r\n        if (mode === DESERIALIZE_MODE.APPEND ||  \r\n          mode === DESERIALIZE_MODE.REPLACE && !world[$entitySparseSet].has(eid)\r\n        ) {\r\n          const newEid = addEntity(world)\r\n          newEntities.set(eid, newEid)\r\n          eid = newEid\r\n        }\r\n\r\n        const component = prop[$storeBase]()\r\n        if (!hasComponent(world, component, eid)) {\r\n          addComponent(world, component, eid)\r\n        }\r\n\r\n        if (component[$tagStore]) {\r\n          continue\r\n        }\r\n        \r\n        if (ArrayBuffer.isView(prop[eid])) {\r\n          const array = prop[eid]\r\n          const count = view[`get${array[$indexType]}`](where)\r\n          where += array[$indexBytes]\r\n\r\n          // iterate over count\r\n          for (let i = 0; i < count; i++) {\r\n            const index = view[`get${array[$indexType]}`](where)\r\n            where += array[$indexBytes]\r\n\r\n            const value = view[`get${array.constructor.name.replace('Array', '')}`](where)\r\n            where += array.BYTES_PER_ELEMENT\r\n\r\n            prop[eid][index] = value\r\n          }\r\n        } else {\r\n          const value = view[`get${prop.constructor.name.replace('Array', '')}`](where)\r\n          where += prop.BYTES_PER_ELEMENT\r\n\r\n          prop[eid] = value\r\n        }\r\n      }\r\n    }\r\n  }\r\n}", "import { $componentMap, resizeComponents } from './Component.js'\r\nimport { $queries, $queryMap, queryRemoveEntity } from './Query.js'\r\nimport { resize, resizeStore } from './Storage.js'\r\nimport { $size, $resizeThreshold, worlds, resizeWorlds } from './World.js'\r\nimport { setSerializationResized } from './Serialize.js'\r\n\r\nexport const $entityMasks = Symbol('entityMasks')\r\nexport const $entityEnabled = Symbol('entityEnabled')\r\nexport const $entitySparseSet = Symbol('entitySparseSet')\r\nexport const $entityArray = Symbol('entityArray')\r\nexport const $entityIndices = Symbol('entityIndices')\r\nexport const $removedEntities = Symbol('removedEntities')\r\n\r\nlet defaultSize = 100000\r\n\r\n// need a global EID cursor which all worlds and all components know about\r\n// so that world entities can posess entire rows spanning all component tables\r\nlet globalEntityCursor = 0\r\nlet globalSize = defaultSize\r\nconst threshold = globalSize - (globalSize / 5)\r\nlet resizeThreshold = () => threshold\r\n\r\nexport const getGlobalSize = () => globalSize\r\n\r\n// removed eids should also be global to prevent memory leaks\r\nconst removed = []\r\n\r\nexport const resetGlobals = () => {\r\n  globalSize = defaultSize\r\n  globalEntityCursor = 0\r\n  removed.length = 0\r\n}\r\n\r\nexport const getDefaultSize = () => defaultSize\r\nexport const setDefaultSize = x => { \r\n  defaultSize = x\r\n  resetGlobals()\r\n}\r\n\r\nexport const getEntityCursor = () => globalEntityCursor\r\nexport const getRemovedEntities = () => removed\r\n\r\nexport const eidToWorld = new Map()\r\n\r\nexport const addEntity = (world) => {\r\n  \r\n  const eid = removed.length > 0 ? removed.shift() : globalEntityCursor++\r\n  world[$entitySparseSet].add(eid)\r\n  eidToWorld.set(eid, world)\r\n\r\n  // if data stores are 80% full\r\n  if (globalEntityCursor >= resizeThreshold()) {\r\n    // grow by half the original size rounded up to a multiple of 4\r\n    const size = globalSize\r\n    const amount = Math.ceil((size/2) / 4) * 4\r\n    const newSize = size + amount\r\n    globalSize = newSize\r\n    resizeWorlds(newSize)\r\n    resizeComponents(newSize)\r\n    setSerializationResized(true)\r\n    console.info(`\uD83D\uDC7E bitECS - resizing all worlds from ${size} to ${size+amount}`)\r\n  }\r\n\r\n  return eid\r\n}\r\n\r\nexport const removeEntity = (world, eid) => {\r\n  // Check if entity is already removed\r\n  if (!world[$entitySparseSet].has(eid)) return\r\n\r\n  // Remove entity from all queries\r\n  // TODO: archetype graph\r\n  world[$queries].forEach(q => {\r\n    queryRemoveEntity(world, q, eid)\r\n  })\r\n\r\n  // Free the entity\r\n  removed.push(eid)\r\n\r\n  // pop swap\r\n  world[$entitySparseSet].remove(eid)\r\n\r\n  // Clear entity bitmasks\r\n  for (let i = 0; i < world[$entityMasks].length; i++) world[$entityMasks][i][eid] = 0\r\n}", "import { SparseSet, Uint32SparseSet } from './Util.js'\r\nimport { $queryShadow, $storeFlattened, $storeSize, $tagStore, createShadow, parentArray } from './Storage.js'\r\nimport { $componentMap, registerComponent } from './Component.js'\r\nimport { $entityMasks, $entityEnabled, $entityArray, getEntityCursor, getDefaultSize, $entitySparseSet, getGlobalSize } from './Entity.js'\r\nimport { $size } from './World.js'\r\n\r\nexport function Not(c) { return function QueryNot() { return c } }\r\nexport function Or(c) { return function QueryOr() { return c } }\r\nexport function Changed(c) { return function QueryChanged() { return c } }\r\n\r\nexport const $queries = Symbol('queries')\r\nexport const $queryMap = Symbol('queryMap')\r\nexport const $dirtyQueries = Symbol('$dirtyQueries')\r\nexport const $queryComponents = Symbol('queryComponents')\r\nexport const $enterQuery = Symbol('enterQuery')\r\nexport const $exitQuery = Symbol('exitQuery')\r\n\r\nexport const enterQuery = query => world => {\r\n  if (!world[$queryMap].has(query)) registerQuery(world, query)\r\n  const q = world[$queryMap].get(query)\r\n  return q.entered.splice(0)\r\n}\r\n\r\nexport const exitQuery = query => world => {\r\n  if (!world[$queryMap].has(query)) registerQuery(world, query)\r\n  const q = world[$queryMap].get(query)\r\n  return q.exited.splice(0)\r\n}\r\n\r\nexport const registerQuery = (world, query) => {\r\n\r\n  const components = []\r\n  const notComponents = []\r\n  const changedComponents = []\r\n\r\n  query[$queryComponents].forEach(c => {\r\n    if (typeof c === 'function') {\r\n      const comp = c()\r\n      if (!world[$componentMap].has(comp)) registerComponent(world, comp)\r\n      if (c.name === 'QueryNot') {\r\n        notComponents.push(comp)\r\n      }\r\n      if (c.name === 'QueryChanged') {\r\n        changedComponents.push(comp)\r\n        components.push(comp)\r\n      }\r\n    } else {\r\n      if (!world[$componentMap].has(c)) registerComponent(world, c)\r\n      components.push(c)\r\n    }\r\n  })\r\n\r\n  const mapComponents = c => world[$componentMap].get(c)\r\n\r\n  // const sparseSet = Uint32SparseSet(getGlobalSize())\r\n  const sparseSet = SparseSet()\r\n\r\n  const archetypes = []\r\n  const changed = []\r\n  const toRemove = []\r\n  const entered = []\r\n  const exited = []\r\n\r\n  const generations = components\r\n    .concat(notComponents)\r\n    .map(mapComponents)\r\n    .map(c => c.generationId)\r\n    .reduce((a,v) => {\r\n      if (a.includes(v)) return a\r\n      a.push(v)\r\n      return a\r\n    }, [])\r\n\r\n  const reduceBitflags = (a,c) => {\r\n    if (!a[c.generationId]) a[c.generationId] = 0\r\n    a[c.generationId] |= c.bitflag\r\n    return a\r\n  }\r\n  const masks = components\r\n    .map(mapComponents)\r\n    .reduce(reduceBitflags, {})\r\n\r\n  const notMasks = notComponents\r\n    .map(mapComponents)\r\n    .reduce((a,c) => {\r\n      if (!a[c.generationId]) {\r\n        a[c.generationId] = 0\r\n        a[c.generationId] |= c.bitflag\r\n      }\r\n      return a\r\n    }, {})\r\n\r\n  // const orMasks = orComponents\r\n  //   .map(mapComponents)\r\n  //   .reduce(reduceBitmasks, {})\r\n\r\n  const flatProps = components\r\n    .filter(c => !c[$tagStore])\r\n    .map(c => Object.getOwnPropertySymbols(c).includes($storeFlattened) ? c[$storeFlattened] : [c])\r\n    .reduce((a,v) => a.concat(v), [])\r\n\r\n  const shadows = flatProps.map(prop => {\r\n      const $ = Symbol()\r\n      createShadow(prop, $)\r\n      return prop[$]\r\n  }, [])\r\n\r\n  const q = Object.assign(sparseSet, {\r\n    archetypes,\r\n    changed,\r\n    components,\r\n    notComponents,\r\n    changedComponents,\r\n    masks,\r\n    notMasks,\r\n    // orMasks,\r\n    generations,\r\n    flatProps,\r\n    toRemove,\r\n    entered,\r\n    exited,\r\n    shadows,\r\n  })\r\n\r\n  world[$queryMap].set(query, q)\r\n  \r\n  world[$queries].add(q)\r\n\r\n  for (let eid = 0; eid < getEntityCursor(); eid++) {\r\n    if (!world[$entitySparseSet].has(eid)) continue\r\n    if (queryCheckEntity(world, q, eid)) {\r\n      queryAddEntity(q, eid)\r\n    }\r\n  }\r\n}\r\n\r\nconst diff = (q, clearDiff) => {\r\n  if (clearDiff) q.changed.length = 0\r\n  const { flatProps, shadows } = q\r\n  for (let i = 0; i < q.dense.count(); i++) {\r\n    const eid = q.dense[i]\r\n    let dirty = false\r\n    for (let pid = 0; pid < flatProps.length; pid++) {\r\n      const prop = flatProps[pid]\r\n      const shadow = shadows[pid]\r\n      if (ArrayBuffer.isView(prop[eid])) {\r\n        for (let i = 0; i < prop[eid].length; i++) {\r\n          if (prop[eid][i] !== prop[eid][$queryShadow][i]) {\r\n            dirty = true\r\n            prop[eid][$queryShadow][i] = prop[eid][i]\r\n          }\r\n        }\r\n      } else {\r\n        if (prop[eid] !== shadow[eid]) {\r\n          dirty = true\r\n          shadow[eid] = prop[eid]\r\n        }\r\n      }\r\n    }\r\n    if (dirty) q.changed.push(eid)\r\n  }\r\n  return q.changed\r\n}\r\n\r\nexport const defineQuery = (components) => {\r\n  if (components === undefined || components[$componentMap] !== undefined) {\r\n    return world => world ? world[$entityArray] : components[$entityArray]\r\n  }\r\n\r\n  const query = function (world, clearDiff=true) {\r\n    if (!world[$queryMap].has(query)) registerQuery(world, query)\r\n\r\n    const q = world[$queryMap].get(query)\r\n\r\n    queryCommitRemovals(q)\r\n\r\n    if (q.changedComponents.length) return diff(q, clearDiff)\r\n\r\n    return q.dense\r\n  }\r\n  query[$queryComponents] = components\r\n  return query\r\n}\r\n\r\n// TODO: archetype graph\r\nexport const queryCheckEntity = (world, q, eid) => {\r\n  const { masks, notMasks, generations } = q\r\n  // let or = true\r\n  for (let i = 0; i < generations.length; i++) {\r\n    const generationId = generations[i]\r\n    const qMask = masks[generationId]\r\n    const qNotMask = notMasks[generationId]\r\n    // const qOrMask = orMasks[generationId]\r\n    const eMask = world[$entityMasks][generationId][eid]\r\n    \r\n    if (qNotMask && (eMask & qNotMask) !== 0) {\r\n      return false\r\n    }\r\n    // if (qOrMask && (eMask & qOrMask) !== qOrMask) {\r\n    //   continue\r\n    // }\r\n    if (qMask && (eMask & qMask) !== qMask) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\nexport const queryCheckComponent = (world, q, component) => {\r\n  const { generationId, bitflag } = world[$componentMap].get(component)\r\n  const { masks } = q\r\n  const mask = masks[generationId]\r\n  return (mask & bitflag) === bitflag\r\n}\r\n\r\nexport const queryAddEntity = (q, eid) => {\r\n  if (q.has(eid)) return\r\n  q.add(eid)\r\n  q.entered.push(eid)\r\n}\r\n\r\nconst queryCommitRemovals = (q) => {\r\n  while (q.toRemove.length) {\r\n    q.remove(q.toRemove.pop())\r\n  }\r\n}\r\n\r\nexport const commitRemovals = (world) => {\r\n  world[$dirtyQueries].forEach(queryCommitRemovals)\r\n  world[$dirtyQueries].clear()\r\n}\r\n\r\nexport const queryRemoveEntity = (world, q, eid) => {\r\n  if (!q.has(eid)) return\r\n  q.toRemove.push(eid)\r\n  world[$dirtyQueries].add(q)\r\n  q.exited.push(eid)\r\n}\r\n\r\nexport const resetChangedQuery = (world, query) => {\r\n  const q = world[$queryMap].get(query)\r\n  q.changed.length = 0\r\n}\r\n\r\nexport const removeQuery = (world, query) => {\r\n  const q = world[$queryMap].get(query)\r\n  world[$queries].delete(q)\r\n  world[$queryMap].delete(query)\r\n}", "import { $storeSize, createStore, resetStoreFor, resizeStore } from './Storage.js'\r\nimport { $queries, queryAddEntity, queryRemoveEntity, queryCheckEntity, queryCheckComponent } from './Query.js'\r\nimport { $bitflag, $size } from './World.js'\r\nimport { $entityMasks, getDefaultSize, eidToWorld } from './Entity.js'\r\n\r\nexport const $componentMap = Symbol('componentMap')\r\n\r\nexport const components = []\r\n\r\nexport const resizeComponents = (size) => {\r\n  components.forEach(component => resizeStore(component, size))\r\n}\r\n\r\nexport const defineComponent = (schema) => {\r\n  const component = createStore(schema, getDefaultSize())\r\n  if (schema && Object.keys(schema).length) components.push(component)\r\n  return component\r\n}\r\n\r\nexport const incrementBitflag = (world) => {\r\n  world[$bitflag] *= 2\r\n  if (world[$bitflag] >= 2**32) {\r\n    world[$bitflag] = 1\r\n    world[$entityMasks].push(new Uint32Array(world[$size]))\r\n  }\r\n}\r\n\r\nexport const registerComponent = (world, component) => {\r\n  if (!component) throw new Error(`\uD83D\uDC7E bitECS - cannot register component as it is null or undefined.`)\r\n\r\n  world[$componentMap].set(component, { \r\n    generationId: world[$entityMasks].length - 1,\r\n    bitflag: world[$bitflag],\r\n    store: component\r\n  })\r\n\r\n  if (component[$storeSize] < world[$size]) {\r\n    resizeStore(component, world[$size])\r\n  }\r\n\r\n  incrementBitflag(world)\r\n}\r\n\r\nexport const registerComponents = (world, components) => {\r\n  components.forEach(c => registerComponent(world, c))\r\n}\r\n\r\nexport const hasComponent = (world, component, eid) => {\r\n  const registeredComponent = world[$componentMap].get(component)\r\n  if (!registeredComponent) return\r\n  const { generationId, bitflag } = registeredComponent\r\n  const mask = world[$entityMasks][generationId][eid]\r\n  return (mask & bitflag) === bitflag\r\n}\r\n\r\nexport const addComponent = (world, component, eid, reset=false) => {\r\n  if (!Number.isInteger(eid)) {\r\n    component = world\r\n    world = eidToWorld.get(eid)\r\n    reset = eid || reset\r\n  }\r\n  if (!world[$componentMap].has(component)) registerComponent(world, component)\r\n  if (hasComponent(world, component, eid)) return\r\n  // Add bitflag to entity bitmask\r\n  const { generationId, bitflag } = world[$componentMap].get(component)\r\n  world[$entityMasks][generationId][eid] |= bitflag\r\n\r\n  // todo: archetype graph\r\n  world[$queries].forEach(q => {\r\n    if (!queryCheckComponent(world, q, component)) return\r\n    const match = queryCheckEntity(world, q, eid)\r\n    if (match) queryAddEntity(q, eid)\r\n  })\r\n  \r\n  // Zero out each property value\r\n  if (reset) resetStoreFor(component, eid)\r\n}\r\n\r\nexport const removeComponent = (world, component, eid, reset=true) => {\r\n  if (!Number.isInteger(eid)) {\r\n    component = world\r\n    world = eidToWorld.get(eid)\r\n    reset = eid || reset\r\n  }\r\n  const { generationId, bitflag } = world[$componentMap].get(component)\r\n\r\n  if (!(world[$entityMasks][generationId][eid] & bitflag)) return\r\n\r\n  // todo: archetype graph\r\n  world[$queries].forEach(q => {\r\n    if (!queryCheckComponent(world, q, component)) return\r\n    const match = queryCheckEntity(world, q, eid)\r\n    if (match) queryRemoveEntity(world, q, eid)\r\n  })\r\n\r\n  // Remove flag from entity bitmask\r\n  world[$entityMasks][generationId][eid] &= ~bitflag\r\n  \r\n  // Zero out each property value\r\n  if (reset) resetStoreFor(component, eid)\r\n}\r\n", "import { $componentMap } from './Component.js'\r\nimport { $queryMap, $queries, $dirtyQueries } from './Query.js'\r\nimport { $entityArray, $entityIndices, $entityEnabled, $entityMasks, $entitySparseSet, getGlobalSize, removeEntity } from './Entity.js'\r\nimport { resize } from './Storage.js'\r\nimport { SparseSet, Uint32SparseSet } from './Util.js'\r\n\r\nexport const $size = Symbol('size')\r\nexport const $resizeThreshold = Symbol('resizeThreshold')\r\nexport const $bitflag = Symbol('bitflag')\r\nexport const $archetypes = Symbol('archetypes')\r\nexport const $localEntities = Symbol('localEntities')\r\n\r\nexport const worlds = []\r\n\r\nexport const resizeWorlds = (size) => {\r\n  worlds.forEach(world => {\r\n    world[$size] = size\r\n\r\n    // resize(world[$entitySparseSet].sparse, size)\r\n    // resize(world[$entitySparseSet].dense, size)\r\n    \r\n    for (let i = 0; i < world[$entityMasks].length; i++) {\r\n      const masks = world[$entityMasks][i];\r\n      world[$entityMasks][i] = resize(masks, size)\r\n    }\r\n    \r\n    world[$resizeThreshold] = world[$size] - (world[$size] / 5)\r\n  })\r\n}\r\n\r\nexport const createWorld = () => {\r\n  const world = {}\r\n  resetWorld(world)\r\n  worlds.push(world)\r\n  return world\r\n}\r\n\r\nexport const resetWorld = (world) => {\r\n  const size = getGlobalSize()\r\n  world[$size] = size\r\n\r\n  if (world[$entityArray]) world[$entityArray].forEach(eid => removeEntity(world, eid))\r\n\r\n  world[$entityMasks] = [new Uint32Array(size)]\r\n  world[$archetypes] = []\r\n\r\n  world[$entitySparseSet] = SparseSet()\r\n  // world[$entitySparseSet] = Uint32SparseSet(size)\r\n  world[$entityArray] = world[$entitySparseSet].dense\r\n\r\n  world[$bitflag] = 1\r\n\r\n  world[$componentMap] = new Map()\r\n\r\n  world[$queryMap] = new Map()\r\n  world[$queries] = new Set()\r\n  world[$dirtyQueries] = new Set()\r\n\r\n  world[$localEntities] = new Map()\r\n\r\n  return world\r\n}\r\n\r\nexport const deleteWorld = (world) => {\r\n  delete world[$size]\r\n  delete world[$archetypes]\r\n  delete world[$entityMasks]\r\n  delete world[$entityArray]\r\n  delete world[$entityIndices]\r\n  delete world[$bitflag]\r\n  delete world[$componentMap]\r\n  delete world[$queryMap]\r\n  delete world[$queries]\r\n  delete world[$dirtyQueries]\r\n  Object.keys(world).forEach(key => {\r\n    delete world[key]\r\n  })\r\n  worlds.splice(worlds.indexOf(world), 1)\r\n}\r\n", "import { commitRemovals } from './Query.js'\r\n\r\nexport const defineSystem = (fn1, fn2) => {\r\n  const update = fn2 !== undefined ? fn2 : fn1\r\n  const create = fn2 !== undefined ? fn1 : undefined\r\n  const init = new Set()\r\n  const system = (world, ...args) => {\r\n    if (create && !init.has(world)) {\r\n      create(world, ...args)\r\n      init.add(world)\r\n    }\r\n    update(world, ...args)\r\n    commitRemovals(world)\r\n    return world\r\n  }\r\n\r\n  Object.defineProperty(system, 'name', {\r\n    value: (update.name || \"AnonymousSystem\") + \"_internal\",\r\n    configurable: true,\r\n  })\r\n\r\n  return system\r\n}", "import { createWorld, resetWorld, deleteWorld } from './World.js'\r\nimport { addEntity, removeEntity, setDefaultSize } from './Entity.js'\r\nimport { defineComponent, registerComponent, registerComponents, hasComponent, addComponent, removeComponent } from './Component.js'\r\nimport { defineSystem } from './System.js'\r\nimport { defineQuery, enterQuery, exitQuery, Changed, Not, commitRemovals, resetChangedQuery, removeQuery } from './Query.js'\r\nimport { defineSerializer, defineDeserializer, DESERIALIZE_MODE } from './Serialize.js'\r\nimport { TYPES_ENUM, parentArray } from './Storage.js'\r\n\r\nexport const pipe = (...fns) => (...args) => {\r\n  const input = Array.isArray(args[0]) ? args[0] : args\r\n  if (!input || input.length === 0) return\r\n  fns = Array.isArray(fns[0]) ? fns[0] : fns\r\n  let tmp = input\r\n  for (let i = 0; i < fns.length; i++) {\r\n    const fn = fns[i]\r\n    if (Array.isArray(tmp)) {\r\n      // tmp = tmp.reduce((a,v) => a.concat(fn(v)),[])\r\n      tmp = fn(...tmp)\r\n    } else {\r\n      tmp = fn(tmp)\r\n    }\r\n  }\r\n  return tmp\r\n}\r\n\r\nexport const Types = TYPES_ENUM\r\n\r\nexport {\r\n\r\n  setDefaultSize,\r\n  createWorld,\r\n  resetWorld,\r\n  deleteWorld,\r\n  addEntity,\r\n  removeEntity,\r\n\r\n  registerComponent,\r\n  registerComponents,\r\n  defineComponent,\r\n  addComponent,\r\n  removeComponent,\r\n  hasComponent,\r\n  \r\n  defineQuery,\r\n  Changed,\r\n  Not,\r\n  // Or,\r\n  enterQuery,\r\n  exitQuery,\r\n  commitRemovals,\r\n  resetChangedQuery,\r\n  removeQuery,\r\n\r\n  defineSystem,\r\n  \r\n  defineSerializer,\r\n  defineDeserializer,\r\n  DESERIALIZE_MODE,\r\n\r\n  parentArray,\r\n\r\n}\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst Extent2D = defineComponent({\r\n    x: Types.f32,\r\n    y: Types.f32,\r\n    width: Types.f32,\r\n    height: Types.f32,\r\n    right: Types.f32,\r\n    bottom: Types.f32\r\n});\r\n\r\nexport const Extent2DComponent = Extent2D;\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst Dirty = defineComponent({\r\n    frame: Types.ui32,\r\n    transform: Types.ui32,\r\n    update: Types.ui32,\r\n    childCache: Types.ui32,\r\n    postRender: Types.ui32,\r\n    bounds: Types.ui32,\r\n    texture: Types.ui32,\r\n    textureFrame: Types.ui32,\r\n    child: Types.ui32,\r\n    displayList: Types.ui32\r\n});\r\n\r\nexport const DirtyComponent = Dirty;\r\n", "import { createWorld } from 'bitecs';\r\n\r\nconst world = createWorld();\r\n\r\nexport const GameObjectWorld = world;\r\n", "import { DirtyComponent } from './DirtyComponent';\r\nimport { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddDirtyComponent (id: number): void\r\n{\r\n    addComponent(GameObjectWorld, DirtyComponent, id);\r\n\r\n    DirtyComponent.frame[id] = 0;\r\n    DirtyComponent.transform[id] = 1;\r\n    DirtyComponent.update[id] = 1;\r\n    DirtyComponent.childCache[id] = 0;\r\n    DirtyComponent.postRender[id] = 0;\r\n    DirtyComponent.bounds[id] = 1;\r\n    DirtyComponent.texture[id] = 0;\r\n    DirtyComponent.textureFrame[id] = 0;\r\n    DirtyComponent.child[id] = 0;\r\n    DirtyComponent.displayList[id] = 0;\r\n}\r\n", "import { DirtyComponent } from './DirtyComponent';\r\n\r\nexport function ClearDirtyDisplayList (id: number): void\r\n{\r\n    DirtyComponent.displayList[id] = 0;\r\n}\r\n", "import { DirtyComponent } from './DirtyComponent';\r\n\r\nexport function HasDirtyChildCache (id: number): boolean\r\n{\r\n    return Boolean(DirtyComponent.childCache[id]);\r\n}\r\n", "import { DirtyComponent } from './DirtyComponent';\r\n\r\nexport function HasDirtyDisplayList (id: number): boolean\r\n{\r\n    return Boolean(DirtyComponent.displayList[id]);\r\n}\r\n", "import { DirtyComponent } from './DirtyComponent';\r\n\r\nexport function SetDirtyChildCache (id: number): void\r\n{\r\n    DirtyComponent.childCache[id] = 1;\r\n}\r\n", "import { DirtyComponent } from './DirtyComponent';\r\n\r\nexport function SetDirtyDisplayList (id: number): void\r\n{\r\n    DirtyComponent.displayList[id] = 1;\r\n}\r\n", "import { Game } from './Game';\r\n\r\nexport let instance: Game;\r\nexport let frame: number = 0;\r\nexport let elapsed: number = 0;\r\n\r\nexport const GameInstance =\r\n{\r\n    get: (): Game =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (game: Game | undefined): void =>\r\n    {\r\n        instance = game;\r\n    },\r\n\r\n    getFrame: (): number =>\r\n    {\r\n        return frame;\r\n    },\r\n\r\n    setFrame: (current: number): void =>\r\n    {\r\n        frame = current;\r\n    },\r\n\r\n    getElapsed: (): number =>\r\n    {\r\n        return elapsed;\r\n    },\r\n\r\n    setElapsed: (current: number): void =>\r\n    {\r\n        elapsed = current;\r\n    }\r\n\r\n};\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst Hierarchy = defineComponent({\r\n    worldID: Types.ui32,\r\n    parentID: Types.ui32,\r\n    numChildren: Types.ui32,\r\n    depth: Types.ui32\r\n});\r\n\r\nexport const HierarchyComponent = Hierarchy;\r\n", "import { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { HierarchyComponent } from './HierarchyComponent';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddHierarchyComponent (id: number): void\r\n{\r\n    addComponent(GameObjectWorld, HierarchyComponent, id);\r\n}\r\n", "import { IGameObject } from './IGameObject';\r\n\r\nexport const GameObjectCache: Map<number, IGameObject> = new Map();\r\n", "import { GetParentID, GetWorldID, HierarchyComponent, UpdateNumChildren } from './';\r\nimport { hasComponent, removeComponent } from 'bitecs';\r\n\r\nimport { GameObjectCache } from '../../gameobjects/GameObjectCache';\r\nimport { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { IBaseWorld } from '../../world/IBaseWorld';\r\nimport { SetDirtyParents } from '../dirty';\r\n\r\nexport function ClearWorldAndParentID (id: number): void\r\n{\r\n    const worldID = GetWorldID(id);\r\n    const parentID = GetParentID(id);\r\n    const world = GameObjectCache.get(worldID) as IBaseWorld;\r\n\r\n    HierarchyComponent.worldID[id] = 0;\r\n    HierarchyComponent.parentID[id] = 0;\r\n\r\n    if (world && hasComponent(GameObjectWorld, world.tag, id))\r\n    {\r\n        removeComponent(GameObjectWorld, world.tag, id);\r\n    }\r\n\r\n    UpdateNumChildren(parentID);\r\n\r\n    SetDirtyParents(id);\r\n}\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst Bounds = defineComponent({\r\n    x: Types.f32,\r\n    y: Types.f32,\r\n    width: Types.f32,\r\n    height: Types.f32,\r\n    right: Types.f32,\r\n    bottom: Types.f32\r\n});\r\n\r\nexport const BoundsComponent = Bounds;\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst Color = defineComponent({\r\n    red: Types.f32,\r\n    green: Types.f32,\r\n    blue: Types.f32,\r\n    alpha: Types.f32\r\n});\r\n\r\nexport const ColorComponent = Color;\r\n", "import { ColorComponent } from './ColorComponent';\r\nimport { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddColorComponent (id: number): void\r\n{\r\n    addComponent(GameObjectWorld, ColorComponent, id);\r\n\r\n    ColorComponent.red[id] = 1;\r\n    ColorComponent.green[id] = 1;\r\n    ColorComponent.blue[id] = 1;\r\n    ColorComponent.alpha[id] = 1;\r\n}\r\n", "import { AddVertex, QuadVertexComponent } from '.';\r\n\r\nimport { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddQuadVertex (id: number, width: number = 0, height: number = 0, flipY: boolean = true): void\r\n{\r\n    addComponent(GameObjectWorld, QuadVertexComponent, id);\r\n\r\n    /*\r\n    if (width || height)\r\n    {\r\n        QuadVertexComponent.tl[id] = AddVertex(0, 0, 0, 0, 1);\r\n        QuadVertexComponent.bl[id] = AddVertex(0, height, 0, 0, 0);\r\n        QuadVertexComponent.br[id] = AddVertex(width, height, 0, 1, 0);\r\n        QuadVertexComponent.tr[id] = AddVertex(width, 0, 0, 1, 1);\r\n    }\r\n    else\r\n    {\r\n        QuadVertexComponent.tl[id] = AddVertex();\r\n        QuadVertexComponent.bl[id] = AddVertex();\r\n        QuadVertexComponent.br[id] = AddVertex();\r\n        QuadVertexComponent.tr[id] = AddVertex();\r\n    }\r\n    */\r\n}\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\n/**\r\n * Buffer Structure:\r\n *\r\n * Triangle 1:\r\n *\r\n * Top Left Vert\r\n *\r\n * 0 - x position\r\n * 1 - y position\r\n * 2 - u0\r\n * 3 - v0\r\n * 4 - Texture Index\r\n * 5 - Red Component\r\n * 6 - Green Component\r\n * 7 - Blue Component\r\n * 8 - Alpha Component\r\n *\r\n * Bottom Left Vert\r\n *\r\n * 9 - x position\r\n * 10 - y position\r\n * 11 - u0\r\n * 12 - v1\r\n * 13 - Texture Index\r\n * 14 - Red Component\r\n * 15 - Green Component\r\n * 16 - Blue Component\r\n * 17 - Alpha Component\r\n *\r\n * Bottom Right Vert\r\n *\r\n * 18 - x position\r\n * 19 - y position\r\n * 20 - u1\r\n * 21 - v1\r\n * 22 - Texture Index\r\n * 23 - Red Component\r\n * 24 - Green Component\r\n * 25 - Blue Component\r\n * 26 - Alpha Component\r\n *\r\n * Triangle 2:\r\n *\r\n * Top Left Vert\r\n *\r\n * 27 - x position\r\n * 28 - y position\r\n * 29 - u0\r\n * 30 - v0\r\n * 31 - Texture Index\r\n * 32 - Red Component\r\n * 33 - Green Component\r\n * 34 - Blue Component\r\n * 35 - Alpha Component\r\n *\r\n * Bottom Right Vert\r\n *\r\n * 36 - x position\r\n * 37 - y position\r\n * 38 - u1\r\n * 39 - v1\r\n * 40 - Texture Index\r\n * 41 - Red Component\r\n * 42 - Green Component\r\n * 43 - Blue Component\r\n * 44 - Alpha Component\r\n *\r\n * Top Right Vert\r\n *\r\n * 45 - x position\r\n * 46 - y position\r\n * 47 - u1\r\n * 48 - v0\r\n * 49 - Texture Index\r\n * 50 - Red Component\r\n * 51 - Green Component\r\n * 52 - Blue Component\r\n * 53 - Alpha Component\r\n */\r\n\r\nconst QuadVertex = defineComponent({\r\n    values: [ Types.f32, 54 ]\r\n});\r\n\r\nexport const QuadVertexComponent = QuadVertex;\r\n", "import { QuadVertexComponent } from './QuadVertexComponent';\r\n\r\nexport function SetQuadPosition (id: number, x0: number, y0: number, x1: number, y1: number, x2: number, y2: number, x3: number, y3: number): void\r\n{\r\n    const data = QuadVertexComponent.values[id];\r\n\r\n    data[0] = x0;\r\n    data[1] = y0;\r\n\r\n    data[9] = x1;\r\n    data[10] = y1;\r\n\r\n    data[18] = x2;\r\n    data[19] = y2;\r\n\r\n    data[27] = x0;\r\n    data[28] = y0;\r\n\r\n    data[36] = x2;\r\n    data[37] = y2;\r\n\r\n    data[45] = x3;\r\n    data[46] = y3;\r\n}\r\n", "import { QuadVertexComponent } from './QuadVertexComponent';\r\n\r\nexport function SetUV (id: number, u0: number, v0: number,u1: number, v1: number): void\r\n{\r\n    const data = QuadVertexComponent.values[id];\r\n\r\n    data[2] = u0;\r\n    data[3] = v0;\r\n\r\n    data[11] = u0;\r\n    data[12] = v1;\r\n\r\n    data[20] = u1;\r\n    data[21] = v1;\r\n\r\n    data[29] = u0;\r\n    data[30] = v0;\r\n\r\n    data[38] = u1;\r\n    data[39] = v1;\r\n\r\n    data[47] = u1;\r\n    data[48] = v0;\r\n}\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst WorldMatrix2D = defineComponent({\r\n    a: Types.f32,\r\n    b: Types.f32,\r\n    c: Types.f32,\r\n    d: Types.f32,\r\n    tx: Types.f32,\r\n    ty: Types.f32\r\n});\r\n\r\nexport const WorldMatrix2DComponent = WorldMatrix2D;\r\n", "import { Changed, IWorld, defineQuery, defineSystem } from 'bitecs';\r\n\r\nimport { BoundsComponent } from '../bounds/BoundsComponent';\r\nimport { Extent2DComponent } from '../transform/Extent2DComponent';\r\nimport { QuadVertexComponent } from './QuadVertexComponent';\r\nimport { SetQuadPosition } from './SetQuadPosition';\r\nimport { WorldMatrix2DComponent } from '../transform/WorldMatrix2DComponent';\r\n\r\nconst changedWorldExtentQuery = defineQuery([\r\n    Changed(WorldMatrix2DComponent),\r\n    Changed(Extent2DComponent)\r\n]);\r\n\r\nlet entities: number[];\r\n\r\nconst updateVertexPositionSystem = defineSystem(world =>\r\n{\r\n    for (let i = 0; i < entities.length; i++)\r\n    {\r\n        const id = entities[i];\r\n\r\n        const a = WorldMatrix2DComponent.a[id];\r\n        const b = WorldMatrix2DComponent.b[id];\r\n        const c = WorldMatrix2DComponent.c[id];\r\n        const d = WorldMatrix2DComponent.d[id];\r\n        const tx = WorldMatrix2DComponent.tx[id];\r\n        const ty = WorldMatrix2DComponent.ty[id];\r\n\r\n        const x = Extent2DComponent.x[id];\r\n        const y = Extent2DComponent.y[id];\r\n        const right = Extent2DComponent.right[id];\r\n        const bottom = Extent2DComponent.bottom[id];\r\n\r\n        const x0 = (x * a) + (y * c) + tx;\r\n        const y0 = (x * b) + (y * d) + ty;\r\n\r\n        const x1 = (x * a) + (bottom * c) + tx;\r\n        const y1 = (x * b) + (bottom * d) + ty;\r\n\r\n        const x2 = (right * a) + (bottom * c) + tx;\r\n        const y2 = (right * b) + (bottom * d) + ty;\r\n\r\n        const x3 = (right * a) + (y * c) + tx;\r\n        const y3 = (right * b) + (y * d) + ty;\r\n\r\n        SetQuadPosition(id, x0, y0, x1, y1, x2, y2, x3, y3);\r\n\r\n        /*\r\n        const data = QuadVertexComponent.values[id];\r\n\r\n        data[0] = x0;\r\n        data[1] = y0;\r\n\r\n        data[9] = x1;\r\n        data[10] = y1;\r\n\r\n        data[18] = x2;\r\n        data[19] = y2;\r\n\r\n        data[27] = x0;\r\n        data[28] = y0;\r\n\r\n        data[36] = x2;\r\n        data[37] = y2;\r\n\r\n        data[45] = x3;\r\n        data[46] = y3;\r\n        */\r\n\r\n        BoundsComponent.x[id] = Math.min(x0, x1, x2, x3);\r\n        BoundsComponent.y[id] = Math.min(y0, y1, y2, y3);\r\n        BoundsComponent.right[id] = Math.max(x0, x1, x2, x3);\r\n        BoundsComponent.bottom[id] = Math.max(y0, y1, y2, y3);\r\n        BoundsComponent.width[id] = BoundsComponent.right[id] - BoundsComponent.x[id];\r\n        BoundsComponent.height[id] = BoundsComponent.bottom[id] - BoundsComponent.y[id];\r\n    }\r\n\r\n    return world;\r\n});\r\n\r\nexport const UpdateVertexPositionSystem = (world: IWorld): number[] =>\r\n{\r\n    entities = changedWorldExtentQuery(world);\r\n\r\n    updateVertexPositionSystem(world);\r\n\r\n    return entities;\r\n};\r\n\r\n", "import { QuadVertexComponent } from './QuadVertexComponent';\r\n\r\nexport function SetQuadColor (id: number, red: number, green: number, blue: number, alpha: number): void\r\n{\r\n    const data = QuadVertexComponent.values[id];\r\n\r\n    data[5] = red;\r\n    data[6] = green;\r\n    data[7] = blue;\r\n    data[8] = alpha;\r\n\r\n    data[14] = red;\r\n    data[15] = green;\r\n    data[16] = blue;\r\n    data[17] = alpha;\r\n\r\n    data[23] = red;\r\n    data[24] = green;\r\n    data[25] = blue;\r\n    data[26] = alpha;\r\n\r\n    data[32] = red;\r\n    data[33] = green;\r\n    data[34] = blue;\r\n    data[35] = alpha;\r\n\r\n    data[41] = red;\r\n    data[42] = green;\r\n    data[43] = blue;\r\n    data[44] = alpha;\r\n\r\n    data[50] = red;\r\n    data[51] = green;\r\n    data[52] = blue;\r\n    data[53] = alpha;\r\n}\r\n", "import { Changed, defineQuery, defineSystem } from 'bitecs';\r\n\r\nimport { ColorComponent } from './ColorComponent';\r\nimport { QuadVertexComponent } from '../vertices';\r\nimport { SetQuadColor } from '../vertices/SetQuadColor';\r\n\r\nconst changedColorQuery = defineQuery([ Changed(ColorComponent), QuadVertexComponent ]);\r\n\r\nconst packQuadColorsSystem = defineSystem(world =>\r\n{\r\n    const entities = changedColorQuery(world);\r\n\r\n    for (let i = 0; i < entities.length; i++)\r\n    {\r\n        const id = entities[i];\r\n\r\n        const red = ColorComponent.red[id];\r\n        const green = ColorComponent.green[id];\r\n        const blue = ColorComponent.blue[id];\r\n        const alpha = ColorComponent.alpha[id];\r\n\r\n        SetQuadColor(id, red, green, blue, alpha);\r\n    }\r\n\r\n    return world;\r\n});\r\n\r\nexport const PackQuadColorsSystem = packQuadColorsSystem;\r\n", "import { ColorComponent } from './ColorComponent';\r\nimport { SetDirtyParents } from '../dirty';\r\n\r\nexport function SetTint (id: number, value: number): void\r\n{\r\n    ColorComponent.tint[id] = value;\r\n\r\n    SetDirtyParents(id);\r\n}\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst Permissions = defineComponent({\r\n    visible: Types.ui8,\r\n    visibleChildren: Types.ui8,\r\n    willUpdate: Types.ui8,\r\n    willUpdateChildren: Types.ui8,\r\n    willRender: Types.ui8,\r\n    willRenderChildren: Types.ui8,\r\n    willCacheChildren: Types.ui8,\r\n    willTransformChildren: Types.ui8\r\n});\r\n\r\nexport const PermissionsComponent = Permissions;\r\n", "import { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { PermissionsComponent } from './PermissionsComponent';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddPermissionsComponent (id: number): void\r\n{\r\n    addComponent(GameObjectWorld, PermissionsComponent, id);\r\n\r\n    PermissionsComponent.visible[id] = 1;\r\n    PermissionsComponent.visibleChildren[id] = 1;\r\n    PermissionsComponent.willUpdate[id] = 1;\r\n    PermissionsComponent.willUpdateChildren[id] = 1;\r\n    PermissionsComponent.willRender[id] = 1;\r\n    PermissionsComponent.willRenderChildren[id] = 1;\r\n    PermissionsComponent.willCacheChildren[id] = 0;\r\n    PermissionsComponent.willTransformChildren[id] = 1;\r\n}\r\n", "import { PermissionsComponent } from './PermissionsComponent';\r\n\r\nexport function WillCacheChildren (id: number): boolean\r\n{\r\n    return Boolean(PermissionsComponent.willCacheChildren[id]);\r\n}\r\n", "import { PermissionsComponent } from './PermissionsComponent';\r\n\r\nexport function WillRender (id: number): boolean\r\n{\r\n    return Boolean(PermissionsComponent.visible[id]) && Boolean(PermissionsComponent.willRender[id]);\r\n}\r\n", "import { PermissionsComponent } from './PermissionsComponent';\r\n\r\nexport function WillRenderChildren (id: number): boolean\r\n{\r\n    return Boolean(PermissionsComponent.visibleChildren[id]) && Boolean(PermissionsComponent.willRenderChildren[id]);\r\n}\r\n", "import { PermissionsComponent } from './PermissionsComponent';\r\n\r\nexport function WillUpdate (id: number): boolean\r\n{\r\n    return Boolean(PermissionsComponent.willUpdate[id]);\r\n}\r\n", "import { PermissionsComponent } from './PermissionsComponent';\r\n\r\nexport function WillUpdateChildren (id: number): boolean\r\n{\r\n    return Boolean(PermissionsComponent.willUpdateChildren[id]);\r\n}\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst LocalMatrix2D = defineComponent({\r\n    a: Types.f32,\r\n    b: Types.f32,\r\n    c: Types.f32,\r\n    d: Types.f32,\r\n    tx: Types.f32,\r\n    ty: Types.f32,\r\n    dirty: Types.ui32\r\n});\r\n\r\nexport const LocalMatrix2DComponent = LocalMatrix2D;\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst Transform2D = defineComponent({\r\n    x: Types.f32,\r\n    y: Types.f32,\r\n    rotation: Types.f32,\r\n    scaleX: Types.f32,\r\n    scaleY: Types.f32,\r\n    skewX: Types.f32,\r\n    skewY: Types.f32,\r\n    originX: Types.f32,\r\n    originY: Types.f32\r\n});\r\n\r\nexport const Transform2DComponent = Transform2D;\r\n", "import { Extent2DComponent } from './Extent2DComponent';\r\nimport { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { LocalMatrix2DComponent } from './LocalMatrix2DComponent';\r\nimport { Transform2DComponent } from './Transform2DComponent';\r\nimport { WorldMatrix2DComponent } from './WorldMatrix2DComponent';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddTransform2DComponent (id: number, x: number = 0, y: number = 0, originX: number = 0, originY: number = 0): void\r\n{\r\n    addComponent(GameObjectWorld, Transform2DComponent, id);\r\n    addComponent(GameObjectWorld, Extent2DComponent, id);\r\n    addComponent(GameObjectWorld, LocalMatrix2DComponent, id);\r\n    addComponent(GameObjectWorld, WorldMatrix2DComponent, id);\r\n\r\n    //  Component defaults to zero, so we only need to set the other values\r\n\r\n    Transform2DComponent.x[id] = x;\r\n    Transform2DComponent.y[id] = y;\r\n    Transform2DComponent.scaleX[id] = 1;\r\n    Transform2DComponent.scaleY[id] = 1;\r\n    Transform2DComponent.originX[id] = originX;\r\n    Transform2DComponent.originY[id] = originY;\r\n\r\n    LocalMatrix2DComponent.a[id] = 1;\r\n    LocalMatrix2DComponent.d[id] = 1;\r\n    LocalMatrix2DComponent.tx[id] = x;\r\n    LocalMatrix2DComponent.ty[id] = y;\r\n\r\n    WorldMatrix2DComponent.a[id] = 1;\r\n    WorldMatrix2DComponent.d[id] = 1;\r\n    WorldMatrix2DComponent.tx[id] = x;\r\n    WorldMatrix2DComponent.ty[id] = y;\r\n}\r\n", "import { Matrix2D } from '../../math/mat2d';\r\nimport { Rectangle } from '../../geom/rectangle';\r\nimport { Vertices } from './Vertices';\r\n\r\nexport function GetVertices (worldTransform: Matrix2D, transformExtent: Rectangle): Vertices\r\n{\r\n    const { a, b, c, d, tx, ty } = worldTransform;\r\n    const { x, y, right, bottom } = transformExtent;\r\n\r\n    const x0 = (x * a) + (y * c) + tx;\r\n    const y0 = (x * b) + (y * d) + ty;\r\n\r\n    const x1 = (x * a) + (bottom * c) + tx;\r\n    const y1 = (x * b) + (bottom * d) + ty;\r\n\r\n    const x2 = (right * a) + (bottom * c) + tx;\r\n    const y2 = (right * b) + (bottom * d) + ty;\r\n\r\n    const x3 = (right * a) + (y * c) + tx;\r\n    const y3 = (right * b) + (y * d) + ty;\r\n\r\n    return { x0, y0, x1, y1, x2, y2, x3, y3 };\r\n}\r\n", "import { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { LocalMatrix2DComponent } from './LocalMatrix2DComponent';\r\nimport { hasComponent } from 'bitecs';\r\n\r\nexport function InvalidateLocalMatrix2DComponent (id: number): void\r\n{\r\n    if (hasComponent(GameObjectWorld, LocalMatrix2DComponent, id))\r\n    {\r\n        LocalMatrix2DComponent.dirty[id]++;\r\n    }\r\n}\r\n", "import { Extent2DComponent } from './Extent2DComponent';\r\nimport { SetDirtyTransform } from '../dirty';\r\nimport { Transform2DComponent } from './Transform2DComponent';\r\n\r\nexport function UpdateExtent (id: number, width: number, height: number): void\r\n{\r\n    const x = -(Transform2DComponent.originX[id]) * width;\r\n    const y = -(Transform2DComponent.originY[id]) * height;\r\n\r\n    Extent2DComponent.x[id] = x;\r\n    Extent2DComponent.y[id] = y;\r\n    Extent2DComponent.width[id] = width;\r\n    Extent2DComponent.height[id] = height;\r\n    Extent2DComponent.right[id] = x + width;\r\n    Extent2DComponent.bottom[id] = y + height;\r\n\r\n    SetDirtyTransform(id);\r\n}\r\n", "import { Extent2DComponent } from './Extent2DComponent';\r\nimport { IVec2 } from '../../math/vec2/IVec2';\r\nimport { Transform2DComponent } from './Transform2DComponent';\r\nimport { UpdateExtent } from './UpdateExtent';\r\n\r\nexport class Origin implements IVec2\r\n{\r\n    private id: number;\r\n\r\n    constructor (id: number, x: number = 0, y: number = 0)\r\n    {\r\n        this.id = id;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    set (x: number, y: number = x): this\r\n    {\r\n        const id = this.id;\r\n\r\n        Transform2DComponent.originX[id] = x;\r\n        Transform2DComponent.originY[id] = y;\r\n\r\n        UpdateExtent(id, Extent2DComponent.width[id], Extent2DComponent.height[id]);\r\n\r\n        return this;\r\n    }\r\n\r\n    set x (value: number)\r\n    {\r\n        const id = this.id;\r\n\r\n        Transform2DComponent.originX[id] = value;\r\n\r\n        UpdateExtent(id, Extent2DComponent.width[id], Extent2DComponent.height[id]);\r\n    }\r\n\r\n    get x (): number\r\n    {\r\n        return Transform2DComponent.originX[this.id];\r\n    }\r\n\r\n    set y (value: number)\r\n    {\r\n        const id = this.id;\r\n\r\n        Transform2DComponent.originY[id] = value;\r\n\r\n        UpdateExtent(id, Extent2DComponent.width[id], Extent2DComponent.height[id]);\r\n    }\r\n\r\n    get y (): number\r\n    {\r\n        return Transform2DComponent.originY[this.id];\r\n    }\r\n}\r\n", "import { IVec2 } from '../../math/vec2/IVec2';\r\nimport { Transform2DComponent } from './Transform2DComponent';\r\n\r\nexport class Position implements IVec2\r\n{\r\n    private id: number;\r\n\r\n    constructor (id: number, x: number = 0, y: number = 0)\r\n    {\r\n        this.id = id;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    set (x: number, y: number = x): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    set x (value: number)\r\n    {\r\n        Transform2DComponent.x[this.id] = value;\r\n    }\r\n\r\n    get x (): number\r\n    {\r\n        return Transform2DComponent.x[this.id];\r\n    }\r\n\r\n    set y (value: number)\r\n    {\r\n        Transform2DComponent.y[this.id] = value;\r\n    }\r\n\r\n    get y (): number\r\n    {\r\n        return Transform2DComponent.y[this.id];\r\n    }\r\n}\r\n", "export const DIRTY_CONST = {\r\n\r\n    CLEAR: 0,\r\n    TRANSFORM: 1,\r\n    UPDATE: 2,\r\n    CHILD_CACHE: 4,\r\n    POST_RENDER: 8,\r\n    COLORS: 16,\r\n    BOUNDS: 32,\r\n    TEXTURE: 64,\r\n    FRAME: 128,\r\n    ALPHA: 256,\r\n    CHILD: 512,\r\n\r\n    //  Special combinations\r\n    DEFAULT: 1 + 2 + 16 + 32,\r\n\r\n    //  Reserved for future use:\r\n    //  1024\r\n    //  2048\r\n    //  4096\r\n    //  8192\r\n    //  16384\r\n    //  32768\r\n    //  65536\r\n    //  131072\r\n    //  262144\r\n    //  524288\r\n    //  1048576\r\n    //  2097152\r\n    //  4194304\r\n    //  8388608\r\n    //  16777216\r\n    //  33554432\r\n    //  67108864\r\n    //  134217728\r\n    //  268435456\r\n\r\n    //  Reserved for user use\r\n    USER1: 536870912,\r\n    USER2: 1073741824,\r\n    USER3: 2147483648,\r\n    USER4: 4294967296\r\n\r\n};\r\n", "import { Vertex } from '../../../components/Vertex';\r\n\r\nexport function PackColors (vertices: Vertex[]): void\r\n{\r\n    vertices.forEach(vertex =>\r\n    {\r\n        vertex.packColor();\r\n    });\r\n}\r\n", "import { GetVertices } from './GetVertices';\r\nimport { Matrix2D } from '../../math/mat2d/Matrix2D';\r\nimport { Rectangle } from '../../geom/rectangle/Rectangle';\r\nimport { Vertex } from '../Vertex';\r\n\r\nexport function UpdateVertices (vertices: Vertex[], worldTransform: Matrix2D, transformExtent: Rectangle): void\r\n{\r\n    const { x0, y0, x1, y1, x2, y2, x3, y3 } = GetVertices(worldTransform, transformExtent);\r\n\r\n    vertices[0].setPosition(x0, y0);\r\n    vertices[1].setPosition(x1, y1);\r\n    vertices[2].setPosition(x2, y2);\r\n    vertices[3].setPosition(x3, y3);\r\n}\r\n", "import { DIRTY_CONST } from '../../gameobjects/DIRTY_CONST';\r\nimport { IGameObject } from '../../gameobjects/IGameObject';\r\nimport { PackColors } from '../../renderer/webgl1/colors/PackColors';\r\nimport { UpdateVertices } from './UpdateVertices';\r\n\r\nexport function PreRenderVertices <T extends IGameObject> (gameObject: T): T\r\n{\r\n    const vertices = gameObject.vertices;\r\n\r\n    if (gameObject.isDirty(DIRTY_CONST.COLORS))\r\n    {\r\n        PackColors(vertices);\r\n\r\n        gameObject.clearDirty(DIRTY_CONST.COLORS);\r\n    }\r\n\r\n    if (gameObject.isDirty(DIRTY_CONST.TRANSFORM))\r\n    {\r\n        UpdateVertices(vertices, gameObject.worldTransform, gameObject.transformExtent);\r\n\r\n        gameObject.clearDirty(DIRTY_CONST.TRANSFORM);\r\n    }\r\n\r\n    return gameObject;\r\n}\r\n", "import { IVec2 } from '../../math/vec2/IVec2';\r\nimport { Transform2DComponent } from './Transform2DComponent';\r\n\r\nexport class Scale implements IVec2\r\n{\r\n    private id: number;\r\n\r\n    constructor (id: number, x: number = 1, y: number = 1)\r\n    {\r\n        this.id = id;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    set (x: number, y: number = x): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    set x (value: number)\r\n    {\r\n        Transform2DComponent.scaleX[this.id] = value;\r\n    }\r\n\r\n    get x (): number\r\n    {\r\n        return Transform2DComponent.scaleX[this.id];\r\n    }\r\n\r\n    set y (value: number)\r\n    {\r\n        Transform2DComponent.scaleY[this.id] = value;\r\n    }\r\n\r\n    get y (): number\r\n    {\r\n        return Transform2DComponent.scaleY[this.id];\r\n    }\r\n}\r\n", "import { Extent2DComponent } from './Extent2DComponent';\r\nimport { IVec2 } from '../../math/vec2/IVec2';\r\nimport { UpdateExtent } from './UpdateExtent';\r\n\r\nexport class Size implements IVec2\r\n{\r\n    private id: number;\r\n\r\n    constructor (id: number, width: number = 0, height: number = 0)\r\n    {\r\n        this.id = id;\r\n\r\n        this.set(width, height);\r\n    }\r\n\r\n    set (width: number, height: number = width): this\r\n    {\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        return this;\r\n    }\r\n\r\n    set width (value: number)\r\n    {\r\n        UpdateExtent(this.id, value, this.height);\r\n    }\r\n\r\n    get width (): number\r\n    {\r\n        return Extent2DComponent.width[this.id];\r\n    }\r\n\r\n    set height (value: number)\r\n    {\r\n        UpdateExtent(this.id, this.width, value);\r\n    }\r\n\r\n    get height (): number\r\n    {\r\n        return Extent2DComponent.height[this.id];\r\n    }\r\n\r\n    set x (value: number)\r\n    {\r\n        this.width = value;\r\n    }\r\n\r\n    get x (): number\r\n    {\r\n        return this.width;\r\n    }\r\n\r\n    set y (value: number)\r\n    {\r\n        this.height = value;\r\n    }\r\n\r\n    get y (): number\r\n    {\r\n        return this.height;\r\n    }\r\n}\r\n", "import { IVec2 } from '../../math/vec2/IVec2';\r\nimport { Transform2DComponent } from './Transform2DComponent';\r\n\r\nexport class Skew implements IVec2\r\n{\r\n    private id: number;\r\n\r\n    constructor (id: number, x: number = 0, y: number = 0)\r\n    {\r\n        this.id = id;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    set (x: number, y: number = x): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    set x (value: number)\r\n    {\r\n        Transform2DComponent.skewX[this.id] = value;\r\n    }\r\n\r\n    get x (): number\r\n    {\r\n        return Transform2DComponent.skewX[this.id];\r\n    }\r\n\r\n    set y (value: number)\r\n    {\r\n        Transform2DComponent.skewY[this.id] = value;\r\n    }\r\n\r\n    get y (): number\r\n    {\r\n        return Transform2DComponent.skewY[this.id];\r\n    }\r\n}\r\n", "import { Changed, IWorld, defineQuery, defineSystem } from 'bitecs';\r\n\r\nimport { GetParentID } from '../hierarchy';\r\nimport { LocalMatrix2DComponent } from './LocalMatrix2DComponent';\r\nimport { SetDirtyParents } from '../dirty';\r\nimport { Transform2DComponent } from './Transform2DComponent';\r\n\r\nconst changedLocalTransformQuery = defineQuery([ Changed(Transform2DComponent) ]);\r\n\r\nlet entities: number[];\r\n\r\nconst updateLocalTransformSystem = defineSystem(world =>\r\n{\r\n    let prevParent: number = 0;\r\n\r\n    for (let i = 0; i < entities.length; i++)\r\n    {\r\n        const id = entities[i];\r\n\r\n        const x = Transform2DComponent.x[id];\r\n        const y = Transform2DComponent.y[id];\r\n        const rotation = Transform2DComponent.rotation[id];\r\n        const scaleX = Transform2DComponent.scaleX[id];\r\n        const scaleY = Transform2DComponent.scaleY[id];\r\n        const skewX = Transform2DComponent.skewX[id];\r\n        const skewY = Transform2DComponent.skewY[id];\r\n\r\n        LocalMatrix2DComponent.a[id] = Math.cos(rotation + skewY) * scaleX;\r\n        LocalMatrix2DComponent.b[id] = Math.sin(rotation + skewY) * scaleX;\r\n        LocalMatrix2DComponent.c[id] = -Math.sin(rotation - skewX) * scaleY;\r\n        LocalMatrix2DComponent.d[id] = Math.cos(rotation - skewX) * scaleY;\r\n        LocalMatrix2DComponent.tx[id] = x;\r\n        LocalMatrix2DComponent.ty[id] = y;\r\n\r\n        if (GetParentID(id) !== prevParent)\r\n        {\r\n            SetDirtyParents(id);\r\n\r\n            prevParent = GetParentID(id);\r\n        }\r\n    }\r\n\r\n    return world;\r\n});\r\n\r\nexport const UpdateLocalTransform2DSystem = (world: IWorld): number[] =>\r\n{\r\n    entities = changedLocalTransformQuery(world);\r\n\r\n    updateLocalTransformSystem(world);\r\n\r\n    return entities;\r\n};\r\n", "import { LocalMatrix2DComponent } from './LocalMatrix2DComponent';\r\nimport { WorldMatrix2DComponent } from './WorldMatrix2DComponent';\r\n\r\nexport function CopyLocalToWorld (source: number, target: number): void\r\n{\r\n    WorldMatrix2DComponent.a[target] = LocalMatrix2DComponent.a[source];\r\n    WorldMatrix2DComponent.b[target] = LocalMatrix2DComponent.b[source];\r\n    WorldMatrix2DComponent.c[target] = LocalMatrix2DComponent.c[source];\r\n    WorldMatrix2DComponent.d[target] = LocalMatrix2DComponent.d[source];\r\n    WorldMatrix2DComponent.tx[target] = LocalMatrix2DComponent.tx[source];\r\n    WorldMatrix2DComponent.ty[target] = LocalMatrix2DComponent.ty[source];\r\n}\r\n", "import { WorldMatrix2DComponent } from './WorldMatrix2DComponent';\r\n\r\nexport function CopyWorldToWorld (source: number, target: number): void\r\n{\r\n    WorldMatrix2DComponent.a[target] = WorldMatrix2DComponent.a[source];\r\n    WorldMatrix2DComponent.b[target] = WorldMatrix2DComponent.b[source];\r\n    WorldMatrix2DComponent.c[target] = WorldMatrix2DComponent.c[source];\r\n    WorldMatrix2DComponent.d[target] = WorldMatrix2DComponent.d[source];\r\n    WorldMatrix2DComponent.tx[target] = WorldMatrix2DComponent.tx[source];\r\n    WorldMatrix2DComponent.ty[target] = WorldMatrix2DComponent.ty[source];\r\n}\r\n", "import { LocalMatrix2DComponent } from './LocalMatrix2DComponent';\r\nimport { WorldMatrix2DComponent } from './WorldMatrix2DComponent';\r\n\r\nexport function MultiplyLocalWithWorld (parentID: number, id: number): void\r\n{\r\n    const pa = WorldMatrix2DComponent.a[parentID];\r\n    const pb = WorldMatrix2DComponent.b[parentID];\r\n    const pc = WorldMatrix2DComponent.c[parentID];\r\n    const pd = WorldMatrix2DComponent.d[parentID];\r\n    const ptx = WorldMatrix2DComponent.tx[parentID];\r\n    const pty = WorldMatrix2DComponent.ty[parentID];\r\n\r\n    const a = LocalMatrix2DComponent.a[id];\r\n    const b = LocalMatrix2DComponent.b[id];\r\n    const c = LocalMatrix2DComponent.c[id];\r\n    const d = LocalMatrix2DComponent.d[id];\r\n    const tx = LocalMatrix2DComponent.tx[id];\r\n    const ty = LocalMatrix2DComponent.ty[id];\r\n\r\n    WorldMatrix2DComponent.a[id] = a * pa + b * pc;\r\n    WorldMatrix2DComponent.b[id] = a * pb + b * pd;\r\n    WorldMatrix2DComponent.c[id] = c * pa + d * pc;\r\n    WorldMatrix2DComponent.d[id] = c * pb + d * pd;\r\n    WorldMatrix2DComponent.tx[id] = tx * pa + ty * pc + ptx;\r\n    WorldMatrix2DComponent.ty[id] = tx * pb + ty * pd + pty;\r\n}\r\n", "import { PermissionsComponent } from './PermissionsComponent';\r\n\r\nexport function WillTransformChildren (id: number): boolean\r\n{\r\n    return Boolean(PermissionsComponent.willTransformChildren[id]);\r\n}\r\n", "import { CopyLocalToWorld } from './CopyLocalToWorld';\r\nimport { CopyWorldToWorld } from './CopyWorldToWorld';\r\nimport { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { GetParentID } from '../hierarchy';\r\nimport { MultiplyLocalWithWorld } from './MultiplyLocalWithWorld';\r\nimport { Transform2DComponent } from './Transform2DComponent';\r\nimport { WillTransformChildren } from '../permissions/WillTransformChildren';\r\nimport { hasComponent } from 'bitecs';\r\n\r\nexport function UpdateWorldTransform (id: number): void\r\n{\r\n    const parentID = GetParentID(id);\r\n\r\n    if (!hasComponent(GameObjectWorld, Transform2DComponent, parentID))\r\n    {\r\n        CopyLocalToWorld(id, id);\r\n    }\r\n    else if (!WillTransformChildren(id))\r\n    {\r\n        CopyWorldToWorld(parentID, id);\r\n    }\r\n    else\r\n    {\r\n        MultiplyLocalWithWorld(parentID, id);\r\n    }\r\n}\r\n", "import { Changed, defineQuery, defineSystem } from 'bitecs';\r\n\r\nimport { CopyLocalToWorld } from './CopyLocalToWorld';\r\nimport { CopyWorldToWorld } from './CopyWorldToWorld';\r\nimport { GameObjectCache } from '../../gameobjects/GameObjectCache';\r\nimport { LocalMatrix2DComponent } from './LocalMatrix2DComponent';\r\nimport { MultiplyLocalWithWorld } from './MultiplyLocalWithWorld';\r\nimport { WillTransformChildren } from '../permissions/WillTransformChildren';\r\n\r\nconst changedWorldTransformQuery = defineQuery([ Changed(LocalMatrix2DComponent) ]);\r\n\r\nconst updateWorldTransformSystem = defineSystem(world =>\r\n{\r\n    const entities = changedWorldTransformQuery(world);\r\n\r\n    for (let i = 0; i < entities.length; i++)\r\n    {\r\n        const id = entities[i];\r\n        const gameObject = GameObjectCache.get(id);\r\n        const parent = gameObject.parent;\r\n\r\n        if (!parent)\r\n        {\r\n            CopyLocalToWorld(id, id);\r\n        }\r\n        else if (!WillTransformChildren(id))\r\n        {\r\n            CopyWorldToWorld(parent.id, id);\r\n        }\r\n        else\r\n        {\r\n            MultiplyLocalWithWorld(parent.id, id);\r\n        }\r\n    }\r\n\r\n    return world;\r\n});\r\n\r\nexport const UpdateWorldTransform2DSystem = updateWorldTransformSystem;\r\n", "/**\r\n * Buffer Structure:\r\n *\r\n * Triangle 1:\r\n *\r\n * Top Left Vert\r\n *\r\n * 0 - x position\r\n * 1 - y position\r\n * 2 - u0\r\n * 3 - v0\r\n * 4 - Texture Index\r\n * 5 - Red Component\r\n * 6 - Green Component\r\n * 7 - Blue Component\r\n * 8 - Alpha Component\r\n *\r\n * Bottom Left Vert\r\n *\r\n * 9 - x position\r\n * 10 - y position\r\n * 11 - u0\r\n * 12 - v1\r\n * 13 - Texture Index\r\n * 14 - Red Component\r\n * 15 - Green Component\r\n * 16 - Blue Component\r\n * 17 - Alpha Component\r\n *\r\n * Bottom Right Vert\r\n *\r\n * 18 - x position\r\n * 19 - y position\r\n * 20 - u1\r\n * 21 - v1\r\n * 22 - Texture Index\r\n * 23 - Red Component\r\n * 24 - Green Component\r\n * 25 - Blue Component\r\n * 26 - Alpha Component\r\n *\r\n * Triangle 2:\r\n *\r\n * Top Left Vert\r\n *\r\n * 27 - x position\r\n * 28 - y position\r\n * 29 - u0\r\n * 30 - v0\r\n * 31 - Texture Index\r\n * 32 - Red Component\r\n * 33 - Green Component\r\n * 34 - Blue Component\r\n * 35 - Alpha Component\r\n *\r\n * Bottom Right Vert\r\n *\r\n * 36 - x position\r\n * 37 - y position\r\n * 38 - u1\r\n * 39 - v1\r\n * 40 - Texture Index\r\n * 41 - Red Component\r\n * 42 - Green Component\r\n * 43 - Blue Component\r\n * 44 - Alpha Component\r\n *\r\n * Top Right Vert\r\n *\r\n * 45 - x position\r\n * 46 - y position\r\n * 47 - u1\r\n * 48 - v0\r\n * 49 - Texture Index\r\n * 50 - Red Component\r\n * 51 - Green Component\r\n * 52 - Blue Component\r\n * 53 - Alpha Component\r\n */\r\n\r\nexport function GetQuadBuffer (): Float32Array\r\n{\r\n    return new Float32Array([\r\n        //  tri 1\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 0, 0, 0, 0, 0,\r\n        0, 0, 1, 1, 0, 0, 0, 0, 0,\r\n        //  tri 2\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 1, 1, 0, 0, 0, 0, 0,\r\n        0, 0, 1, 0, 0, 0, 0, 0, 0\r\n    ]);\r\n}\r\n", "import { GetQuadBuffer } from './GetQuadBuffer';\r\n\r\nconst buffer = GetQuadBuffer();\r\n\r\nexport function BatchQuad (\r\n    F32: Float32Array,\r\n    offset: number,\r\n    textureIndex: number,\r\n    x1: number, y1: number,\r\n    x2: number, y2: number,\r\n    x3: number, y3: number,\r\n    x4: number, y4: number,\r\n    r: number, g: number, b: number, a: number): number\r\n{\r\n    buffer[0] = x1;\r\n    buffer[1] = y1;\r\n    buffer[4] = textureIndex;\r\n    buffer[5] = r;\r\n    buffer[6] = g;\r\n    buffer[7] = b;\r\n    buffer[8] = a;\r\n\r\n    buffer[9] = x2;\r\n    buffer[10] = y2;\r\n    buffer[13] = textureIndex;\r\n    buffer[14] = r;\r\n    buffer[15] = g;\r\n    buffer[16] = b;\r\n    buffer[17] = a;\r\n\r\n    buffer[18] = x3;\r\n    buffer[19] = y3;\r\n    buffer[22] = textureIndex;\r\n    buffer[23] = r;\r\n    buffer[24] = g;\r\n    buffer[25] = b;\r\n    buffer[26] = a;\r\n\r\n    buffer[27] = x1;\r\n    buffer[28] = y1;\r\n    buffer[31] = textureIndex;\r\n    buffer[32] = r;\r\n    buffer[33] = g;\r\n    buffer[34] = b;\r\n    buffer[35] = a;\r\n\r\n    buffer[36] = x3;\r\n    buffer[37] = y3;\r\n    buffer[40] = textureIndex;\r\n    buffer[41] = r;\r\n    buffer[42] = g;\r\n    buffer[43] = b;\r\n    buffer[44] = a;\r\n\r\n    buffer[45] = x4;\r\n    buffer[46] = y4;\r\n    buffer[49] = textureIndex;\r\n    buffer[50] = r;\r\n    buffer[51] = g;\r\n    buffer[52] = b;\r\n    buffer[53] = a;\r\n\r\n    F32.set(buffer, offset);\r\n\r\n    return offset + 54;\r\n}\r\n", "import { BufferEntry } from '../draw/BufferEntry';\r\nimport { Flush } from './Flush';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\nconst bufferEntry: BufferEntry = {\r\n    buffer: null,\r\n    F32: null,\r\n    offset: 0\r\n};\r\n\r\nexport function GetVertexBufferEntry (renderPass: IRenderPass, addToCount: number = 0): BufferEntry\r\n{\r\n    const buffer = renderPass.vertexbuffer.current;\r\n\r\n    //  If batch cannot take the size of this entry, flush it first\r\n    if (renderPass.count + addToCount >= buffer.batchSize)\r\n    {\r\n        Flush(renderPass);\r\n    }\r\n\r\n    bufferEntry.buffer = buffer;\r\n    bufferEntry.F32 = buffer.vertexViewF32;\r\n    bufferEntry.offset = renderPass.count * buffer.entryElementSize;\r\n\r\n    renderPass.count += addToCount;\r\n\r\n    return bufferEntry;\r\n}\r\n", "import { GetQuadBuffer } from './GetQuadBuffer';\r\n\r\nconst buffer = GetQuadBuffer();\r\n\r\nexport function BatchTexturedQuad (\r\n    F32: Float32Array,\r\n    offset: number,\r\n    textureIndex: number,\r\n    x1: number, y1: number,\r\n    x2: number, y2: number,\r\n    x3: number, y3: number,\r\n    x4: number, y4: number,\r\n    u0: number, v0: number, u1: number, v1: number,\r\n    r: number, g: number, b: number, a: number): number\r\n{\r\n    //  top left\r\n    buffer[0] = x1;\r\n    buffer[1] = y1;\r\n    buffer[2] = u0;\r\n    buffer[3] = v0;\r\n    buffer[4] = textureIndex;\r\n    buffer[5] = r;\r\n    buffer[6] = g;\r\n    buffer[7] = b;\r\n    buffer[8] = a;\r\n\r\n    //  bottom left\r\n    buffer[9] = x2;\r\n    buffer[10] = y2;\r\n    buffer[11] = u0;\r\n    buffer[12] = v1;\r\n    buffer[13] = textureIndex;\r\n    buffer[14] = r;\r\n    buffer[15] = g;\r\n    buffer[16] = b;\r\n    buffer[17] = a;\r\n\r\n    //  bottom right\r\n    buffer[18] = x3;\r\n    buffer[19] = y3;\r\n    buffer[20] = u1;\r\n    buffer[21] = v1;\r\n    buffer[22] = textureIndex;\r\n    buffer[23] = r;\r\n    buffer[24] = g;\r\n    buffer[25] = b;\r\n    buffer[26] = a;\r\n\r\n    //  top left\r\n    buffer[27] = x1;\r\n    buffer[28] = y1;\r\n    buffer[29] = u0;\r\n    buffer[30] = v0;\r\n    buffer[31] = textureIndex;\r\n    buffer[32] = r;\r\n    buffer[33] = g;\r\n    buffer[34] = b;\r\n    buffer[35] = a;\r\n\r\n    //  bottom right\r\n    buffer[36] = x3;\r\n    buffer[37] = y3;\r\n    buffer[38] = u1;\r\n    buffer[39] = v1;\r\n    buffer[40] = textureIndex;\r\n    buffer[41] = r;\r\n    buffer[42] = g;\r\n    buffer[43] = b;\r\n    buffer[44] = a;\r\n\r\n    //  top right\r\n    buffer[45] = x4;\r\n    buffer[46] = y4;\r\n    buffer[47] = u1;\r\n    buffer[48] = v0;\r\n    buffer[49] = textureIndex;\r\n    buffer[50] = r;\r\n    buffer[51] = g;\r\n    buffer[52] = b;\r\n    buffer[53] = a;\r\n\r\n    F32.set(buffer, offset);\r\n\r\n    return offset + 54;\r\n}\r\n", "import { QuadVertexComponent } from './QuadVertexComponent';\r\n\r\nexport function SetQuadTextureIndex (id: number, textureIndex: number): void\r\n{\r\n    const data = QuadVertexComponent.values[id];\r\n\r\n    if (data[4] !== textureIndex)\r\n    {\r\n        data[4] = textureIndex;\r\n        data[13] = textureIndex;\r\n        data[22] = textureIndex;\r\n        data[31] = textureIndex;\r\n        data[40] = textureIndex;\r\n        data[49] = textureIndex;\r\n    }\r\n}\r\n", "import { GetVertexBufferEntry } from '../renderpass/GetVertexBufferEntry';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { ITexture } from '../../../textures/ITexture';\r\nimport { QuadVertexComponent } from '../../../components/vertices';\r\nimport { SetQuadTextureIndex } from '../../../components/vertices/SetQuadTextureIndex';\r\n\r\nexport function BatchTexturedQuadBuffer <T extends ITexture> (texture: T, id: number, renderPass: IRenderPass): void\r\n{\r\n    const { F32, offset } = GetVertexBufferEntry(renderPass, 2);\r\n\r\n    const textureIndex = renderPass.textures.set(texture);\r\n\r\n    SetQuadTextureIndex(id, textureIndex);\r\n\r\n    F32.set(QuadVertexComponent.values[id], offset);\r\n}\r\n", "export function GetTriBuffer (): Float32Array\r\n{\r\n    //  Buffer Format:\r\n\r\n    //  top left vert = x, y, u, v, texture index, r, g, b, a\r\n    //  bottom left vert = x, y, u, v, texture index, r, g, b, a\r\n    //  bottom right vert = x, y, u, v, texture index, r, g, b, a\r\n\r\n    return new Float32Array([\r\n        0, 0, 0, 1, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 1, 0, 0, 0, 0, 0, 0\r\n    ]);\r\n}\r\n", "import { GetTriBuffer } from './GetTriBuffer';\r\n\r\nconst buffer = GetTriBuffer();\r\n\r\nexport function BatchTriangle (\r\n    F32: Float32Array,\r\n    offset: number,\r\n    textureIndex: number,\r\n    x1: number, y1: number,\r\n    x2: number, y2: number,\r\n    x3: number, y3: number,\r\n    r: number, g: number, b: number, a: number): number\r\n{\r\n    buffer[0] = x1;\r\n    buffer[1] = y1;\r\n    buffer[4] = textureIndex;\r\n    buffer[5] = r;\r\n    buffer[6] = g;\r\n    buffer[7] = b;\r\n    buffer[8] = a;\r\n\r\n    buffer[9] = x2;\r\n    buffer[10] = y2;\r\n    buffer[13] = textureIndex;\r\n    buffer[14] = r;\r\n    buffer[15] = g;\r\n    buffer[16] = b;\r\n    buffer[17] = a;\r\n\r\n    buffer[18] = x3;\r\n    buffer[19] = y3;\r\n    buffer[22] = textureIndex;\r\n    buffer[23] = r;\r\n    buffer[24] = g;\r\n    buffer[25] = b;\r\n    buffer[26] = a;\r\n\r\n    F32.set(buffer, offset);\r\n\r\n    return offset + 27;\r\n\r\n    //  The above is more verbose but doesn't create any garbage, unlike the following way of doing it:\r\n\r\n    // F32.set([\r\n    //     x1, y1, 0, 1, textureIndex, red, green, blue, alpha,\r\n    //     x2, y2, 0, 0, textureIndex, red, green, blue, alpha,\r\n    //     x3, y3, 1, 0, textureIndex, red, green, blue, alpha\r\n    // ], offset);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Find the angle of a segment from (x1, y1) -> (x2, y2).\r\n *\r\n * @function Phaser.Math.Angle.Between\r\n * @since 3.0.0\r\n *\r\n * @param {number} x1 - The x coordinate of the first point.\r\n * @param {number} y1 - The y coordinate of the first point.\r\n * @param {number} x2 - The x coordinate of the second point.\r\n * @param {number} y2 - The y coordinate of the second point.\r\n *\r\n * @return {number} The angle in radians.\r\n */\r\nexport function AngleBetween (x1: number, y1: number, x2: number, y2: number): number\r\n{\r\n    return Math.atan2(y2 - y1, x2 - x1);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Find the angle of a segment from (x1, y1) -> (x2, y2).\r\n *\r\n * The difference between this method and {@link Phaser.Math.Angle.Between} is that this assumes the y coordinate\r\n * travels down the screen.\r\n *\r\n * @function Phaser.Math.Angle.BetweenY\r\n * @since 3.0.0\r\n *\r\n * @param {number} x1 - The x coordinate of the first point.\r\n * @param {number} y1 - The y coordinate of the first point.\r\n * @param {number} x2 - The x coordinate of the second point.\r\n * @param {number} y2 - The y coordinate of the second point.\r\n *\r\n * @return {number} The angle in radians.\r\n */\r\nexport function AngleBetweenY (x1: number, y1: number, x2: number, y2: number): number\r\n{\r\n    return Math.atan2(x2 - x1, y2 - y1);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nexport const MATH_CONST = {\r\n\r\n    /**\r\n     * The value of PI * 2.\r\n     *\r\n     * @name Phaser.Math.PI2\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    PI2: Math.PI * 2,\r\n\r\n    /**\r\n     * The value of PI * 2.\r\n     *\r\n     * @name Phaser.Math.HALF_PI\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    HALF_PI: Math.PI * 0.5,\r\n\r\n    /**\r\n     * An epsilon value (1.0e-6)\r\n     *\r\n     * @name Phaser.Math.EPSILON\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    EPSILON: 1.0e-6,\r\n\r\n    /**\r\n     * For converting degrees to radians (PI / 180)\r\n     *\r\n     * @name Phaser.Math.DEG_TO_RAD\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    DEG_TO_RAD: Math.PI / 180,\r\n\r\n    /**\r\n     * For converting radians to degrees (180 / PI)\r\n     *\r\n     * @name Phaser.Math.RAD_TO_DEG\r\n     * @type {number}\r\n     * @since 3.0.0\r\n     */\r\n    RAD_TO_DEG: 180 / Math.PI,\r\n\r\n    /**\r\n     * The minimum safe integer this browser supports.\r\n     * We use a const for backward compatibility with Internet Explorer.\r\n     *\r\n     * @name Phaser.Math.MIN_SAFE_INTEGER\r\n     * @type {number}\r\n     * @since 3.21.0\r\n     */\r\n    MIN_SAFE_INTEGER: Number.MIN_SAFE_INTEGER || -9007199254740991,\r\n\r\n    /**\r\n     * The maximum safe integer this browser supports.\r\n     * We use a const for backward compatibility with Internet Explorer.\r\n     *\r\n     * @name Phaser.Math.MAX_SAFE_INTEGER\r\n     * @type {number}\r\n     * @since 3.21.0\r\n     */\r\n    MAX_SAFE_INTEGER: Number.MAX_SAFE_INTEGER || 9007199254740991\r\n\r\n};\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { MATH_CONST as CONST } from '../const';\r\n\r\n/**\r\n * Takes an angle in Phasers default clockwise format and converts it so that\r\n * 0 is North, 90 is West, 180 is South and 270 is East,\r\n * therefore running counter-clockwise instead of clockwise.\r\n * \r\n * You can pass in the angle from a Game Object using:\r\n * \r\n * ```javascript\r\n * var converted = CounterClockwise(gameobject.rotation);\r\n * ```\r\n * \r\n * All values for this function are in radians.\r\n *\r\n * @function Phaser.Math.Angle.CounterClockwise\r\n * @since 3.16.0\r\n *\r\n * @param {number} angle - The angle to convert, in radians.\r\n *\r\n * @return {number} The converted angle, in radians.\r\n */\r\nexport function CounterClockwise (angle: number): number\r\n{\r\n    if (angle > Math.PI)\r\n    {\r\n        angle -= CONST.PI2;\r\n    }\r\n\r\n    return Math.abs((((angle + CONST.HALF_PI) % CONST.PI2) - CONST.PI2) % CONST.PI2);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { MATH_CONST } from '../const';\r\n\r\n/**\r\n * Normalize an angle to the [0, 2pi] range.\r\n *\r\n * @function Phaser.Math.Angle.Normalize\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle - The angle to normalize, in radians.\r\n *\r\n * @return {number} The normalized angle, in radians.\r\n */\r\nexport function NormalizeAngle (angle: number): number\r\n{\r\n    angle = angle % MATH_CONST.PI2;\r\n\r\n    if (angle >= 0)\r\n    {\r\n        return angle;\r\n    }\r\n    else\r\n    {\r\n        return angle + MATH_CONST.PI2;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { NormalizeAngle } from './NormalizeAngle';\r\n\r\n/**\r\n * Reverse the given angle.\r\n *\r\n * @function Phaser.Math.Angle.Reverse\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle - The angle to reverse, in radians.\r\n *\r\n * @return {number} The reversed angle, in radians.\r\n */\r\nexport function ReverseAngle (angle: number): number\r\n{\r\n    return NormalizeAngle(angle + Math.PI);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { MATH_CONST } from '../const';\r\n\r\n/**\r\n * Rotates `currentAngle` towards `targetAngle`, taking the shortest rotation distance. The `lerp` argument is the amount to rotate by in this call.\r\n *\r\n * @function Phaser.Math.Angle.RotateTo\r\n * @since 3.0.0\r\n *\r\n * @param {number} currentAngle - The current angle, in radians.\r\n * @param {number} targetAngle - The target angle to rotate to, in radians.\r\n * @param {number} [lerp=0.05] - The lerp value to add to the current angle.\r\n *\r\n * @return {number} The adjusted angle.\r\n */\r\nexport function RotateAngleTo (currentAngle: number, targetAngle: number, lerp: number = 0.05): number\r\n{\r\n    if (currentAngle === targetAngle)\r\n    {\r\n        return currentAngle;\r\n    }\r\n\r\n    if (Math.abs(targetAngle - currentAngle) <= lerp || Math.abs(targetAngle - currentAngle) >= (MATH_CONST.PI2 - lerp))\r\n    {\r\n        currentAngle = targetAngle;\r\n    }\r\n    else\r\n    {\r\n        if (Math.abs(targetAngle - currentAngle) > Math.PI)\r\n        {\r\n            if (targetAngle < currentAngle)\r\n            {\r\n                targetAngle += MATH_CONST.PI2;\r\n            }\r\n            else\r\n            {\r\n                targetAngle -= MATH_CONST.PI2;\r\n            }\r\n        }\r\n\r\n        if (targetAngle > currentAngle)\r\n        {\r\n            currentAngle += lerp;\r\n        }\r\n        else if (targetAngle < currentAngle)\r\n        {\r\n            currentAngle -= lerp;\r\n        }\r\n    }\r\n\r\n    return currentAngle;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Gets the shortest angle between `angle1` and `angle2`.\r\n *\r\n * Both angles must be in the range -180 to 180, which is the same clamped\r\n * range that `sprite.angle` uses, so you can pass in two sprite angles to\r\n * this method and get the shortest angle back between the two of them.\r\n *\r\n * The angle returned will be in the same range. If the returned angle is\r\n * greater than 0 then it's a counter-clockwise rotation, if < 0 then it's\r\n * a clockwise rotation.\r\n *\r\n * TODO: Wrap the angles in this function?\r\n *\r\n * @function Phaser.Math.Angle.ShortestBetween\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle1 - The first angle in the range -180 to 180.\r\n * @param {number} angle2 - The second angle in the range -180 to 180.\r\n *\r\n * @return {number} The shortest angle, in degrees. If greater than zero it's a counter-clockwise rotation.\r\n */\r\nexport function ShortestAngleBetween (angle1: number, angle2: number): number\r\n{\r\n    const difference = angle2 - angle1;\r\n\r\n    if (difference === 0)\r\n    {\r\n        return 0;\r\n    }\r\n\r\n    const times = Math.floor((difference - (-180)) / 360);\r\n\r\n    return difference - (times * 360);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Wrap the given `value` between `min` and `max.\r\n *\r\n * @function Phaser.Math.Wrap\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to wrap.\r\n * @param {number} min - The minimum value.\r\n * @param {number} max - The maximum value.\r\n *\r\n * @return {number} The wrapped value.\r\n */\r\nexport function Wrap (value: number, min: number, max: number): number\r\n{\r\n    const range = max - min;\r\n\r\n    return (min + ((((value - min) % range) + range) % range));\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Wrap } from '../Wrap';\r\n\r\n/**\r\n * Wrap an angle.\r\n *\r\n * Wraps the angle to a value in the range of -PI to PI.\r\n *\r\n * @function Phaser.Math.Angle.Wrap\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle - The angle to wrap, in radians.\r\n *\r\n * @return {number} The wrapped angle, in radians.\r\n */\r\nexport function WrapAngle (angle: number): number\r\n{\r\n    return Wrap(angle, -Math.PI, Math.PI);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Wrap } from '../Wrap';\r\n\r\n/**\r\n * Wrap an angle in degrees.\r\n *\r\n * Wraps the angle to a value in the range of -180 to 180.\r\n *\r\n * @function Phaser.Math.Angle.WrapDegrees\r\n * @since 3.0.0\r\n *\r\n * @param {number} angle - The angle to wrap, in degrees.\r\n *\r\n * @return {number} The wrapped angle, in degrees.\r\n */\r\nexport function WrapAngleDegrees (angle: number): number\r\n{\r\n    return Wrap(angle, -180, 180);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { AngleBetween } from './AngleBetween';\r\nimport { AngleBetweenY } from './AngleBetweenY';\r\nimport { CounterClockwise } from './CounterClockwise';\r\nimport { NormalizeAngle } from './NormalizeAngle';\r\nimport { ReverseAngle } from './ReverseAngle';\r\nimport { RotateAngleTo } from './RotateAngleTo';\r\nimport { ShortestAngleBetween } from './ShortestAngleBetween';\r\nimport { WrapAngle } from './WrapAngle';\r\nimport { WrapAngleDegrees } from './WrapAngleDegrees';\r\n\r\n/**\r\n * @namespace Phaser.Math.Angle\r\n */\r\n\r\nexport {\r\n    AngleBetween,\r\n    AngleBetweenY,\r\n    CounterClockwise,\r\n    NormalizeAngle,\r\n    ReverseAngle,\r\n    RotateAngleTo,\r\n    ShortestAngleBetween,\r\n    WrapAngle,\r\n    WrapAngleDegrees\r\n};\r\n", "export function In (v: number, overshoot: number = 1.70158): number\r\n{\r\n    return v * v * ((overshoot + 1) * v - overshoot);\r\n}\r\n", "export function InOut (v: number, overshoot: number = 1.70158): number\r\n{\r\n    const s = overshoot * 1.525;\r\n\r\n    if ((v *= 2) < 1)\r\n    {\r\n        return 0.5 * (v * v * ((s + 1) * v - s));\r\n    }\r\n    else\r\n    {\r\n        return 0.5 * ((v -= 2) * v * ((s + 1) * v + s) + 2);\r\n    }\r\n}\r\n", "export function Out (v: number, overshoot: number = 1.70158): number\r\n{\r\n    return --v * v * ((overshoot + 1) * v + overshoot) + 1;\r\n}\r\n", "export function In (v: number): number\r\n{\r\n    v = 1 - v;\r\n\r\n    if (v < 1 / 2.75)\r\n    {\r\n        return 1 - (7.5625 * v * v);\r\n    }\r\n    else if (v < 2 / 2.75)\r\n    {\r\n        return 1 - (7.5625 * (v -= 1.5 / 2.75) * v + 0.75);\r\n    }\r\n    else if (v < 2.5 / 2.75)\r\n    {\r\n        return 1 - (7.5625 * (v -= 2.25 / 2.75) * v + 0.9375);\r\n    }\r\n    else\r\n    {\r\n        return 1 - (7.5625 * (v -= 2.625 / 2.75) * v + 0.984375);\r\n    }\r\n}\r\n", "export function InOut (v: number): number\r\n{\r\n    let reverse = false;\r\n\r\n    if (v < 0.5)\r\n    {\r\n        v = 1 - (v * 2);\r\n        reverse = true;\r\n    }\r\n    else\r\n    {\r\n        v = (v * 2) - 1;\r\n    }\r\n\r\n    if (v < 1 / 2.75)\r\n    {\r\n        v = 7.5625 * v * v;\r\n    }\r\n    else if (v < 2 / 2.75)\r\n    {\r\n        v = 7.5625 * (v -= 1.5 / 2.75) * v + 0.75;\r\n    }\r\n    else if (v < 2.5 / 2.75)\r\n    {\r\n        v = 7.5625 * (v -= 2.25 / 2.75) * v + 0.9375;\r\n    }\r\n    else\r\n    {\r\n        v = 7.5625 * (v -= 2.625 / 2.75) * v + 0.984375;\r\n    }\r\n\r\n    if (reverse)\r\n    {\r\n        return (1 - v) * 0.5;\r\n    }\r\n    else\r\n    {\r\n        return v * 0.5 + 0.5;\r\n    }\r\n}\r\n", "export function Out (v: number): number\r\n{\r\n    if (v < 1 / 2.75)\r\n    {\r\n        return 7.5625 * v * v;\r\n    }\r\n    else if (v < 2 / 2.75)\r\n    {\r\n        return 7.5625 * (v -= 1.5 / 2.75) * v + 0.75;\r\n    }\r\n    else if (v < 2.5 / 2.75)\r\n    {\r\n        return 7.5625 * (v -= 2.25 / 2.75) * v + 0.9375;\r\n    }\r\n    else\r\n    {\r\n        return 7.5625 * (v -= 2.625 / 2.75) * v + 0.984375;\r\n    }\r\n}\r\n", "export function In (v: number): number\r\n{\r\n    return 1 - Math.sqrt(1 - v * v);\r\n}\r\n", "export function InOut (v: number): number\r\n{\r\n    if ((v *= 2) < 1)\r\n    {\r\n        return -0.5 * (Math.sqrt(1 - v * v) - 1);\r\n    }\r\n    else\r\n    {\r\n        return 0.5 * (Math.sqrt(1 - (v -= 2) * v) + 1);\r\n    }\r\n}\r\n", "export function Out (v: number): number\r\n{\r\n    return Math.sqrt(1 - (--v * v));\r\n}\r\n", "export function In (v: number): number\r\n{\r\n    return v * v * v;\r\n}\r\n", "export function InOut (v: number): number\r\n{\r\n    if ((v *= 2) < 1)\r\n    {\r\n        return 0.5 * v * v * v;\r\n    }\r\n    else\r\n    {\r\n        return 0.5 * ((v -= 2) * v * v + 2);\r\n    }\r\n}\r\n", "export function Out (v: number): number\r\n{\r\n    return --v * v * v + 1;\r\n}\r\n", "export function In (v: number, amplitude: number = 0.1, period: number = 0.1): number\r\n{\r\n    if (v === 0)\r\n    {\r\n        return 0;\r\n    }\r\n    else if (v === 1)\r\n    {\r\n        return 1;\r\n    }\r\n    else\r\n    {\r\n        let s = period / 4;\r\n\r\n        if (amplitude < 1)\r\n        {\r\n            amplitude = 1;\r\n        }\r\n        else\r\n        {\r\n            s = period * Math.asin(1 / amplitude) / (2 * Math.PI);\r\n        }\r\n\r\n        return -(amplitude * Math.pow(2, 10 * (v -= 1)) * Math.sin((v - s) * (2 * Math.PI) / period));\r\n    }\r\n}\r\n", "export function InOut (v: number, amplitude: number = 0.1, period: number = 0.1): number\r\n{\r\n    if (v === 0)\r\n    {\r\n        return 0;\r\n    }\r\n    else if (v === 1)\r\n    {\r\n        return 1;\r\n    }\r\n    else\r\n    {\r\n        let s = period / 4;\r\n\r\n        if (amplitude < 1)\r\n        {\r\n            amplitude = 1;\r\n        }\r\n        else\r\n        {\r\n            s = period * Math.asin(1 / amplitude) / (2 * Math.PI);\r\n        }\r\n\r\n        if ((v *= 2) < 1)\r\n        {\r\n            return -0.5 * (amplitude * Math.pow(2, 10 * (v -= 1)) * Math.sin((v - s) * (2 * Math.PI) / period));\r\n        }\r\n        else\r\n        {\r\n            return amplitude * Math.pow(2, -10 * (v -= 1)) * Math.sin((v - s) * (2 * Math.PI) / period) * 0.5 + 1;\r\n        }\r\n    }\r\n}\r\n", "export function Out (v: number, amplitude: number = 0.1, period: number = 0.1): number\r\n{\r\n    if (v === 0)\r\n    {\r\n        return 0;\r\n    }\r\n    else if (v === 1)\r\n    {\r\n        return 1;\r\n    }\r\n    else\r\n    {\r\n        let s = period / 4;\r\n\r\n        if (amplitude < 1)\r\n        {\r\n            amplitude = 1;\r\n        }\r\n        else\r\n        {\r\n            s = period * Math.asin(1 / amplitude) / (2 * Math.PI);\r\n        }\r\n\r\n        return (amplitude * Math.pow(2, -10 * v) * Math.sin((v - s) * (2 * Math.PI) / period) + 1);\r\n    }\r\n}\r\n", "export function In (v: number): number\r\n{\r\n    return Math.pow(2, 10 * (v - 1)) - 0.001;\r\n}\r\n", "export function InOut (v: number): number\r\n{\r\n    if (v == 0)\r\n    {\r\n        return 0;\r\n    }\r\n\r\n    if (v == 1)\r\n    {\r\n        return 1;\r\n    }\r\n\r\n    if ((v *= 2) < 1)\r\n    {\r\n        return 0.5 * Math.pow(2, 10 * (v - 1));\r\n    }\r\n    else\r\n    {\r\n        return 0.5 * (2 - Math.pow(2, -10 * (v - 1)));\r\n    }\r\n}\r\n", "export function Out (v: number): number\r\n{\r\n    return 1 - Math.pow(2, -10 * v);\r\n}\r\n", "export function In (v: number): number\r\n{\r\n    return v * v;\r\n}\r\n", "export function InOut (v: number): number\r\n{\r\n    if ((v *= 2) < 1)\r\n    {\r\n        return 0.5 * v * v;\r\n    }\r\n    else\r\n    {\r\n        return -0.5 * (--v * (v - 2) - 1);\r\n    }\r\n}\r\n", "export function Out (v: number): number\r\n{\r\n    return v * (2 - v);\r\n}\r\n", "export function In (v: number): number\r\n{\r\n    return v * v * v * v;\r\n}\r\n", "export function InOut (v: number): number\r\n{\r\n    if ((v *= 2) < 1)\r\n    {\r\n        return 0.5 * v * v * v * v;\r\n    }\r\n    else\r\n    {\r\n        return -0.5 * ((v -= 2) * v * v * v - 2);\r\n    }\r\n}\r\n", "export function Out (v: number): number\r\n{\r\n    return -(--v * v * v * v - 1);\r\n}\r\n", "export function In (v: number): number\r\n{\r\n    return v * v * v * v * v;\r\n}\r\n", "export function InOut (v: number): number\r\n{\r\n    if ((v *= 2) < 1)\r\n    {\r\n        return 0.5 * v * v * v * v * v;\r\n    }\r\n    else\r\n    {\r\n        return 0.5 * ((v -= 2) * v * v * v * v + 2);\r\n    }\r\n}\r\n", "export function Out (v: number): number\r\n{\r\n    return (v = v - 1) * v * v * v * v + 1;\r\n}\r\n", "export function In (v: number): number\r\n{\r\n    if (v === 0)\r\n    {\r\n        return 0;\r\n    }\r\n    else if (v === 1)\r\n    {\r\n        return 1;\r\n    }\r\n    else\r\n    {\r\n        return 1 - Math.cos(v * Math.PI / 2);\r\n    }\r\n}\r\n", "export function InOut (v: number): number\r\n{\r\n    if (v === 0)\r\n    {\r\n        return 0;\r\n    }\r\n    else if (v === 1)\r\n    {\r\n        return 1;\r\n    }\r\n    else\r\n    {\r\n        return 0.5 * (1 - Math.cos(Math.PI * v));\r\n    }\r\n}\r\n", "export function Out (v: number): number\r\n{\r\n    if (v === 0)\r\n    {\r\n        return 0;\r\n    }\r\n    else if (v === 1)\r\n    {\r\n        return 1;\r\n    }\r\n    else\r\n    {\r\n        return Math.sin(v * Math.PI / 2);\r\n    }\r\n}\r\n", "export function Linear (v: number): number\r\n{\r\n    return v;\r\n}\r\n", "export function Stepped (v: number, steps: number = 1): number\r\n{\r\n    if (v <= 0)\r\n    {\r\n        return 0;\r\n    }\r\n    else if (v >= 1)\r\n    {\r\n        return 1;\r\n    }\r\n    else\r\n    {\r\n        return (((steps * v) | 0) + 1) * (1 / steps);\r\n    }\r\n}\r\n", "import * as Back from './back';\r\nimport * as Bounce from './bounce';\r\nimport * as Circular from './circular';\r\nimport * as Cubic from './cubic';\r\nimport * as Elastic from './elastic';\r\nimport * as Expo from './expo';\r\nimport * as Quadratic from './quadratic';\r\nimport * as Quartic from './quartic';\r\nimport * as Quintic from './quintic';\r\nimport * as Sine from './sine';\r\n\r\nimport { Linear } from './Linear';\r\nimport { Stepped } from './Stepped';\r\n\r\nconst EaseMap: Map<string, Function> = new Map([\r\n    [ 'power0', Linear ],\r\n    [ 'power1', Quadratic.Out ],\r\n    [ 'power2', Cubic.Out ],\r\n    [ 'power3', Quartic.Out ],\r\n    [ 'power4', Quintic.Out ],\r\n    [ 'linear', Linear ],\r\n    [ 'quad', Quadratic.Out ],\r\n    [ 'cubic', Cubic.Out ],\r\n    [ 'quart', Quartic.Out ],\r\n    [ 'quint', Quintic.Out ],\r\n    [ 'sine', Sine.Out ],\r\n    [ 'expo', Expo.Out ],\r\n    [ 'circ', Circular.Out ],\r\n    [ 'elastic', Elastic.Out ],\r\n    [ 'back', Back.Out ],\r\n    [ 'bounce', Bounce.Out ],\r\n    [ 'stepped', Stepped ],\r\n    [ 'quad.in', Quadratic.In ],\r\n    [ 'cubic.in', Cubic.In ],\r\n    [ 'quart.in', Quartic.In ],\r\n    [ 'quint.in', Quintic.In ],\r\n    [ 'sine.in', Sine.In ],\r\n    [ 'expo.in', Expo.In ],\r\n    [ 'circ.in', Circular.In ],\r\n    [ 'elastic.in', Elastic.In ],\r\n    [ 'back.in', Back.In ],\r\n    [ 'bounce.in', Bounce.In ],\r\n    [ 'quad.out', Quadratic.Out ],\r\n    [ 'cubic.out', Cubic.Out ],\r\n    [ 'quart.out', Quartic.Out ],\r\n    [ 'quint.out', Quintic.Out ],\r\n    [ 'sine.out', Sine.Out ],\r\n    [ 'expo.out', Expo.Out ],\r\n    [ 'circ.out', Circular.Out ],\r\n    [ 'elastic.out', Elastic.Out ],\r\n    [ 'back.out', Back.Out ],\r\n    [ 'bounce.out', Bounce.Out ],\r\n    [ 'quad.inout', Quadratic.InOut ],\r\n    [ 'cubic.inout', Cubic.InOut ],\r\n    [ 'quart.inout', Quartic.InOut ],\r\n    [ 'quint.inout', Quintic.InOut ],\r\n    [ 'sine.inout', Sine.InOut ],\r\n    [ 'expo.inout', Expo.InOut ],\r\n    [ 'circ.inout', Circular.InOut ],\r\n    [ 'elastic.inout', Elastic.InOut ],\r\n    [ 'back.inout', Back.InOut ],\r\n    [ 'bounce.inout', Bounce.InOut ]\r\n]);\r\n\r\n//  Allows GetEase('Back'), GetEase('Expo.InOut'), GetEase('Export.easeOut') or lower-case\r\n\r\nexport function GetEase (name: string): Function\r\n{\r\n    name = name.toLowerCase();\r\n    name = name.replace('ease', '');\r\n\r\n    if (EaseMap.has(name))\r\n    {\r\n        return EaseMap.get(name);\r\n    }\r\n    else\r\n    {\r\n        return Linear;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculate the fuzzy ceiling of the given value.\r\n *\r\n * @function Phaser.Math.Fuzzy.Ceil\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value.\r\n * @param {number} [epsilon=0.0001] - The epsilon.\r\n *\r\n * @return {number} The fuzzy ceiling of the value.\r\n */\r\nexport function FuzzyCeil (value: number, epsilon: number = 0.0001): number\r\n{\r\n    return Math.ceil(value - epsilon);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Check whether the given values are fuzzily equal.\r\n *\r\n * Two numbers are fuzzily equal if their difference is less than `epsilon`.\r\n *\r\n * @function Phaser.Math.Fuzzy.Equal\r\n * @since 3.0.0\r\n *\r\n * @param {number} a - The first value.\r\n * @param {number} b - The second value.\r\n * @param {number} [epsilon=0.0001] - The epsilon.\r\n *\r\n * @return {boolean} `true` if the values are fuzzily equal, otherwise `false`.\r\n */\r\nexport function FuzzyEqual (a: number, b: number, epsilon: number = 0.0001): boolean\r\n{\r\n    return Math.abs(a - b) < epsilon;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculate the fuzzy floor of the given value.\r\n *\r\n * @function Phaser.Math.Fuzzy.Floor\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value.\r\n * @param {number} [epsilon=0.0001] - The epsilon.\r\n *\r\n * @return {number} The floor of the value.\r\n */\r\nexport function FuzzyFloor (value: number, epsilon: number = 0.0001): number\r\n{\r\n    return Math.floor(value + epsilon);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Check whether `a` is fuzzily greater than `b`.\r\n *\r\n * `a` is fuzzily greater than `b` if it is more than `b - epsilon`.\r\n *\r\n * @function Phaser.Math.Fuzzy.GreaterThan\r\n * @since 3.0.0\r\n *\r\n * @param {number} a - The first value.\r\n * @param {number} b - The second value.\r\n * @param {number} [epsilon=0.0001] - The epsilon.\r\n *\r\n * @return {boolean} `true` if `a` is fuzzily greater than than `b`, otherwise `false`.\r\n */\r\nexport function FuzzyGreaterThan (a: number, b: number, epsilon: number = 0.0001): boolean\r\n{\r\n    return a > b - epsilon;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Check whether `a` is fuzzily less than `b`.\r\n *\r\n * `a` is fuzzily less than `b` if it is less than `b + epsilon`.\r\n *\r\n * @function Phaser.Math.Fuzzy.LessThan\r\n * @since 3.0.0\r\n *\r\n * @param {number} a - The first value.\r\n * @param {number} b - The second value.\r\n * @param {number} [epsilon=0.0001] - The epsilon.\r\n *\r\n * @return {boolean} `true` if `a` is fuzzily less than `b`, otherwise `false`.\r\n */\r\nexport function FuzzyLessThan (a: number, b: number, epsilon: number = 0.0001): boolean\r\n{\r\n    return a < b + epsilon;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { FuzzyCeil } from './FuzzyCeil';\r\nimport { FuzzyEqual } from './FuzzyEqual';\r\nimport { FuzzyFloor } from './FuzzyFloor';\r\nimport { FuzzyGreaterThan } from './FuzzyGreaterThan';\r\nimport { FuzzyLessThan } from './FuzzyLessThan';\r\n\r\n// TODO - The Epsilon values can move to a Config setter\r\n\r\nexport {\r\n    FuzzyCeil,\r\n    FuzzyEqual,\r\n    FuzzyFloor,\r\n    FuzzyGreaterThan,\r\n    FuzzyLessThan\r\n};\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculates the factorial of a given number for integer values greater than 0.\r\n *\r\n * @function Phaser.Math.Factorial\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - A positive integer to calculate the factorial of.\r\n *\r\n * @return {number} The factorial of the given number.\r\n */\r\nexport function Factorial (value: number): number\r\n{\r\n    if (value === 0)\r\n    {\r\n        return 1;\r\n    }\r\n\r\n    let res = value;\r\n\r\n    while (--value)\r\n    {\r\n        res *= value;\r\n    }\r\n\r\n    return res;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Factorial } from './Factorial';\r\n\r\n/**\r\n * Calculates the Bernstein basis from the three factorial coefficients.\r\n *\r\n * @function Phaser.Math.Bernstein\r\n * @since 3.0.0\r\n *\r\n * @param {number} n - The first value.\r\n * @param {number} i - The second value.\r\n *\r\n * @return {number} The Bernstein basis of Factorial(n) / Factorial(i) / Factorial(n - i)\r\n */\r\nexport function Bernstein (n: number, i: number): number\r\n{\r\n    return Factorial(n) / Factorial(i) / Factorial(n - i);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Bernstein } from '../Bernstein';\r\n\r\n/**\r\n * A bezier interpolation method.\r\n *\r\n * @function Phaser.Math.Interpolation.Bezier\r\n * @since 3.0.0\r\n *\r\n * @param {number[]} v - The input array of values to interpolate between.\r\n * @param {number} k - The percentage of interpolation, between 0 and 1.\r\n *\r\n * @return {number} The interpolated value.\r\n */\r\nexport function BezierInterpolation (v: number[], k: number): number\r\n{\r\n    let b = 0;\r\n    const n = v.length - 1;\r\n\r\n    for (let i = 0; i <= n; i++)\r\n    {\r\n        b += Math.pow(1 - k, n - i) * Math.pow(k, i) * v[i] * Bernstein(n, i);\r\n    }\r\n\r\n    return b;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { CatmullRom } from '../CatmullRom';\r\n\r\n/**\r\n * A Catmull-Rom interpolation method.\r\n *\r\n * @function Phaser.Math.Interpolation.CatmullRom\r\n * @since 3.0.0\r\n *\r\n * @param {number[]} v - The input array of values to interpolate between.\r\n * @param {number} k - The percentage of interpolation, between 0 and 1.\r\n *\r\n * @return {number} The interpolated value.\r\n */\r\nexport function CatmullRomInterpolation (v: number[], k: number): number\r\n{\r\n    const m = v.length - 1;\r\n    let f = m * k;\r\n    let i = Math.floor(f);\r\n\r\n    if (v[0] === v[m])\r\n    {\r\n        if (k < 0)\r\n        {\r\n            i = Math.floor(f = m * (1 + k));\r\n        }\r\n\r\n        return CatmullRom(f - i, v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m]);\r\n    }\r\n    else\r\n    {\r\n        if (k < 0)\r\n        {\r\n            return v[0] - (CatmullRom(-f, v[0], v[0], v[1], v[1]) - v[0]);\r\n        }\r\n\r\n        if (k > 1)\r\n        {\r\n            return v[m] - (CatmullRom(f - m, v[m], v[m], v[m - 1], v[m - 1]) - v[m]);\r\n        }\r\n\r\n        return CatmullRom(f - i, v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2]);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction P0 (t: number, p: number): number\r\n{\r\n    const k = 1 - t;\r\n\r\n    return k * k * k * p;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction P1 (t: number, p: number): number\r\n{\r\n    const k = 1 - t;\r\n\r\n    return 3 * k * k * t * p;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction P2 (t: number, p: number): number\r\n{\r\n    return 3 * (1 - t) * t * t * p;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction P3 (t: number, p: number): number\r\n{\r\n    return t * t * t * p;\r\n}\r\n\r\n/**\r\n * A cubic bezier interpolation method.\r\n *\r\n * https://medium.com/@adrian_cooney/bezier-interpolation-13b68563313a\r\n *\r\n * @function Phaser.Math.Interpolation.CubicBezier\r\n * @since 3.0.0\r\n *\r\n * @param {number} t - The percentage of interpolation, between 0 and 1.\r\n * @param {number} p0 - The start point.\r\n * @param {number} p1 - The first control point.\r\n * @param {number} p2 - The second control point.\r\n * @param {number} p3 - The end point.\r\n *\r\n * @return {number} The interpolated value.\r\n */\r\nexport function CubicBezierInterpolation (t: number, p0: number, p1: number, p2: number, p3: number): number\r\n{\r\n    return P0(t, p0) + P1(t, p1) + P2(t, p2) + P3(t, p3);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculates a linear (interpolation) value over t.\r\n *\r\n * @function Phaser.Math.Linear\r\n * @since 3.0.0\r\n *\r\n * @param {number} p0 - The first point.\r\n * @param {number} p1 - The second point.\r\n * @param {number} t - The percentage between p0 and p1 to return, represented as a number between 0 and 1.\r\n *\r\n * @return {number} The step t% of the way between p0 and p1.\r\n */\r\nexport function Linear (p0: number, p1: number, t: number): number\r\n{\r\n    return (p1 - p0) * t + p0;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Linear } from '../Linear';\r\n\r\n/**\r\n * A linear interpolation method.\r\n *\r\n * @function Phaser.Math.Interpolation.Linear\r\n * @since 3.0.0\r\n * @see {@link https://en.wikipedia.org/wiki/Linear_interpolation}\r\n *\r\n * @param {number[]} v - The input array of values to interpolate between.\r\n * @param {!number} k - The percentage of interpolation, between 0 and 1.\r\n *\r\n * @return {!number} The interpolated value.\r\n */\r\nexport function LinearInterpolation (v: number[], k: number): number\r\n{\r\n    const m = v.length - 1;\r\n    const f = m * k;\r\n    const i = Math.floor(f);\r\n\r\n    if (k < 0)\r\n    {\r\n        return Linear(v[0], v[1], f);\r\n    }\r\n    else if (k > 1)\r\n    {\r\n        return Linear(v[m], v[m - 1], m - f);\r\n    }\r\n    else\r\n    {\r\n        return Linear(v[i], v[(i + 1 > m) ? m : i + 1], f - i);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction P0 (t: number, p: number): number\r\n{\r\n    const k = 1 - t;\r\n\r\n    return k * k * p;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction P1 (t: number, p: number): number\r\n{\r\n    return 2 * (1 - t) * t * p;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction P2 (t: number, p: number): number\r\n{\r\n    return t * t * p;\r\n}\r\n\r\n// https://github.com/mrdoob/three.js/blob/master/src/extras/core/Interpolations.js\r\n\r\n/**\r\n * A quadratic bezier interpolation method.\r\n *\r\n * @function Phaser.Math.Interpolation.QuadraticBezier\r\n * @since 3.2.0\r\n *\r\n * @param {number} t - The percentage of interpolation, between 0 and 1.\r\n * @param {number} p0 - The start point.\r\n * @param {number} p1 - The control point.\r\n * @param {number} p2 - The end point.\r\n *\r\n * @return {number} The interpolated value.\r\n */\r\nexport function QuadraticBezierInterpolation (t: number, p0: number, p1: number, p2: number): number\r\n{\r\n    return P0(t, p0) + P1(t, p1) + P2(t, p2);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculate a smooth interpolation percentage of `x` between `min` and `max`.\r\n *\r\n * The function receives the number `x` as an argument and returns 0 if `x` is less than or equal to the left edge,\r\n * 1 if `x` is greater than or equal to the right edge, and smoothly interpolates, using a Hermite polynomial,\r\n * between 0 and 1 otherwise.\r\n *\r\n * @function Phaser.Math.SmoothStep\r\n * @since 3.0.0\r\n * @see {@link https://en.wikipedia.org/wiki/Smoothstep}\r\n *\r\n * @param {number} x - The input value.\r\n * @param {number} min - The minimum value, also known as the 'left edge', assumed smaller than the 'right edge'.\r\n * @param {number} max - The maximum value, also known as the 'right edge', assumed greater than the 'left edge'.\r\n *\r\n * @return {number} The percentage of interpolation, between 0 and 1.\r\n */\r\nexport function SmoothStep (x: number, min: number, max: number): number\r\n{\r\n    if (x <= min)\r\n    {\r\n        return 0;\r\n    }\r\n\r\n    if (x >= max)\r\n    {\r\n        return 1;\r\n    }\r\n\r\n    x = (x - min) / (max - min);\r\n\r\n    return x * x * (3 - 2 * x);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { SmoothStep } from '../SmoothStep';\r\n\r\n/**\r\n * A Smooth Step interpolation method.\r\n *\r\n * @function Phaser.Math.Interpolation.SmoothStep\r\n * @since 3.9.0\r\n * @see {@link https://en.wikipedia.org/wiki/Smoothstep}\r\n *\r\n * @param {number} t - The percentage of interpolation, between 0 and 1.\r\n * @param {number} min - The minimum value, also known as the 'left edge', assumed smaller than the 'right edge'.\r\n * @param {number} max - The maximum value, also known as the 'right edge', assumed greater than the 'left edge'.\r\n *\r\n * @return {number} The interpolated value.\r\n */\r\nexport function SmoothStepInterpolation (t: number, min: number, max: number): number\r\n{\r\n    return min + (max - min) * SmoothStep(t, 0, 1);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculate a smoother interpolation percentage of `x` between `min` and `max`.\r\n *\r\n * The function receives the number `x` as an argument and returns 0 if `x` is less than or equal to the left edge,\r\n * 1 if `x` is greater than or equal to the right edge, and smoothly interpolates, using a Hermite polynomial,\r\n * between 0 and 1 otherwise.\r\n *\r\n * Produces an even smoother interpolation than {@link Phaser.Math.SmoothStep}.\r\n *\r\n * @function Phaser.Math.SmootherStep\r\n * @since 3.0.0\r\n * @see {@link https://en.wikipedia.org/wiki/Smoothstep#Variations}\r\n *\r\n * @param {number} x - The input value.\r\n * @param {number} min - The minimum value, also known as the 'left edge', assumed smaller than the 'right edge'.\r\n * @param {number} max - The maximum value, also known as the 'right edge', assumed greater than the 'left edge'.\r\n *\r\n * @return {number} The percentage of interpolation, between 0 and 1.\r\n */\r\nexport function SmootherStep (x: number, min: number, max: number): number\r\n{\r\n    x = Math.max(0, Math.min(1, (x - min) / (max - min)));\r\n\r\n    return x * x * x * (x * (x * 6 - 15) + 10);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { SmootherStep } from '../SmootherStep';\r\n\r\n/**\r\n * A Smoother Step interpolation method.\r\n *\r\n * @function Phaser.Math.Interpolation.SmootherStep\r\n * @since 3.9.0\r\n * @see {@link https://en.wikipedia.org/wiki/Smoothstep#Variations}\r\n *\r\n * @param {number} t - The percentage of interpolation, between 0 and 1.\r\n * @param {number} min - The minimum value, also known as the 'left edge', assumed smaller than the 'right edge'.\r\n * @param {number} max - The maximum value, also known as the 'right edge', assumed greater than the 'left edge'.\r\n *\r\n * @return {number} The interpolated value.\r\n */\r\nexport function SmootherStepInterpolation (t: number, min: number, max: number): number\r\n{\r\n    return min + (max - min) * SmootherStep(t, 0, 1);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { BezierInterpolation } from './BezierInterpolation';\r\nimport { CatmullRomInterpolation } from './CatmullRomInterpolation';\r\nimport { CubicBezierInterpolation } from './CubicBezierInterpolation';\r\nimport { LinearInterpolation } from './LinearInterpolation';\r\nimport { QuadraticBezierInterpolation } from './QuadraticBezierInterpolation';\r\nimport { SmoothStepInterpolation } from './SmoothStepInterpolation';\r\nimport { SmootherStepInterpolation } from './SmootherStepInterpolation';\r\n\r\nexport {\r\n    BezierInterpolation,\r\n    CatmullRomInterpolation,\r\n    CubicBezierInterpolation,\r\n    LinearInterpolation,\r\n    QuadraticBezierInterpolation,\r\n    SmoothStepInterpolation,\r\n    SmootherStepInterpolation\r\n};\r\n", "//  A Matrix2D contains six elements in a short-form of the 3x3 Matrix, with the last column ignored.\r\n\r\n//  |----|----|----|\r\n//  | a  | b  | 0  |\r\n//  |----|----|----|\r\n//  | c  | d  | 0  |\r\n//  |----|----|----|\r\n//  | tx | ty | 1  |\r\n//  |----|----|----|\r\n\r\nexport class Matrix2D\r\n{\r\n    a: number; // element 0\r\n    b: number; // element 1\r\n    c: number; // element 2\r\n    d: number; // element 3\r\n    tx: number; // element 4\r\n    ty: number; // element 5\r\n\r\n    /**\r\n     * Creates an instance of Matrix2D.\r\n     *\r\n     * @param {number} [a=1] - X scale.\r\n     * @param {number} [b=0] - X skew.\r\n     * @param {number} [c=0] - Y skew.\r\n     * @param {number} [d=1] - Y scale.\r\n     * @param {number} [tx=0] - X translation\r\n     * @param {number} [ty=0] - Y translation\r\n     * @memberof Matrix2D\r\n     */\r\n    constructor (a: number = 1, b: number = 0, c: number = 0, d: number = 1, tx: number = 0, ty: number = 0)\r\n    {\r\n        this.set(a, b, c, d, tx, ty);\r\n    }\r\n\r\n    set (a: number = 1, b: number = 0, c: number = 0, d: number = 1, tx: number = 0, ty: number = 0): this\r\n    {\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n        this.d = d;\r\n        this.tx = tx;\r\n        this.ty = ty;\r\n\r\n        return this;\r\n    }\r\n\r\n    identity (): this\r\n    {\r\n        return this.set();\r\n    }\r\n\r\n    toArray (): number[]\r\n    {\r\n        const  { a, b, c, d, tx, ty } = this;\r\n\r\n        return [ a, b, c, d, tx, ty ];\r\n    }\r\n\r\n    fromArray (src: number[]): Matrix2D\r\n    {\r\n        return this.set(src[0], src[1], src[2], src[3], src[4], src[5]);\r\n    }\r\n}\r\n", "import { IMatrix2D } from './IMatrix2D';\r\n\r\n//  Compares the a and b matrix and returns if they are equal.\r\n\r\nexport function Mat2dEquals (a: IMatrix2D, b: IMatrix2D): boolean\r\n{\r\n    return (\r\n        a.a === b.a &&\r\n        a.b === b.b &&\r\n        a.c === b.c &&\r\n        a.d === b.d &&\r\n        a.tx === b.tx &&\r\n        a.ty === b.ty\r\n    );\r\n}\r\n", "export class Vec3\r\n{\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n\r\n    constructor (x: number = 0, y: number = 0, z: number = 0)\r\n    {\r\n        this.set(x, y, z);\r\n    }\r\n\r\n    set (x: number = 0, y: number = 0, z: number = 0): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n\r\n        return this;\r\n    }\r\n\r\n    toArray (dst: Float32List = [], index: number = 0): Float32List\r\n    {\r\n        const { x, y, z } = this;\r\n\r\n        dst[ index ] = x;\r\n        dst[ index + 1 ] = y;\r\n        dst[ index + 2 ] = z;\r\n\r\n        return dst;\r\n    }\r\n\r\n    fromArray (src: Float32List, index: number = 0): this\r\n    {\r\n        return this.set(\r\n            src[ index ],\r\n            src[ index + 1 ],\r\n            src[ index + 2 ]\r\n        );\r\n    }\r\n\r\n    toString (): string\r\n    {\r\n        const { x, y, z } = this;\r\n\r\n        return `{ x=${x}, y=${y}, z=${z} }`;\r\n    }\r\n}\r\n", "import { Matrix4 } from './Matrix4';\r\n\r\nexport function Mat4Identity (matrix: Matrix4 = new Matrix4()): Matrix4\r\n{\r\n    return matrix.set(\r\n        1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1\r\n    );\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Returns the nearest power of 2 to the given `value`.\r\n *\r\n * @function Phaser.Math.Pow2.GetNext\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value.\r\n *\r\n * @return {number} The nearest power of 2 to `value`.\r\n */\r\nexport function GetPowerOfTwo (value: number): number\r\n{\r\n    const index = Math.log(value) / 0.6931471805599453;\r\n\r\n    return (1 << Math.ceil(index));\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Tests the value and returns `true` if it is a power of two.\r\n *\r\n * @function Phaser.Math.Pow2.IsValue\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to check if it's a power of two.\r\n *\r\n * @return {boolean} Returns `true` if `value` is a power of two, otherwise `false`.\r\n */\r\nexport function IsValuePowerOfTwo (value: number): boolean\r\n{\r\n    return (value > 0 && (value & (value - 1)) === 0);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Force a value within the boundaries by clamping it to the range `min`, `max`.\r\n *\r\n * @function Phaser.Math.Clamp\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to be clamped.\r\n * @param {number} min - The minimum bounds.\r\n * @param {number} max - The maximum bounds.\r\n *\r\n * @return {number} The clamped value.\r\n */\r\nexport function Clamp (value: number, min: number, max: number): number\r\n{\r\n    return Math.max(min, Math.min(max, value));\r\n}\r\n", "import { Vec3 } from './Vec3';\r\n\r\nexport function Vec3Backward (): Vec3\r\n{\r\n    return new Vec3(0, 0, -1);\r\n}\r\n", "import { Vec3 } from './Vec3';\r\n\r\nexport function Vec3Down (): Vec3\r\n{\r\n    return new Vec3(0, -1, 0);\r\n}\r\n", "import { Vec3 } from './Vec3';\r\n\r\nexport function Vec3Forward (): Vec3\r\n{\r\n    return new Vec3(0, 0, 1);\r\n}\r\n", "import { Vec3 } from './Vec3';\r\n\r\nexport function Vec3Left (): Vec3\r\n{\r\n    return new Vec3(-1, 0, 0);\r\n}\r\n", "import { Vec3 } from './Vec3';\r\n\r\nexport function Vec3Right (): Vec3\r\n{\r\n    return new Vec3(1, 0, 0);\r\n}\r\n", "import { Vec3 } from './Vec3';\r\n\r\nexport function Vec3Up (): Vec3\r\n{\r\n    return new Vec3(0, 1, 0);\r\n}\r\n", "import { Vec3 } from './Vec3';\r\n\r\nexport function Vec3Zero (): Vec3\r\n{\r\n    return new Vec3(0, 0, 0);\r\n}\r\n", "import { Vec3Backward } from './Vec3Backward';\r\nimport { Vec3Down } from './Vec3Down';\r\nimport { Vec3Forward } from './Vec3Forward';\r\nimport { Vec3Left } from './Vec3Left';\r\nimport { Vec3Right } from './Vec3Right';\r\nimport { Vec3Up } from './Vec3Up';\r\nimport { Vec3Zero } from './Vec3Zero';\r\n\r\nexport const UP = Vec3Up();\r\nexport const DOWN = Vec3Down();\r\nexport const LEFT = Vec3Left();\r\nexport const RIGHT = Vec3Right();\r\nexport const FORWARD = Vec3Forward();\r\nexport const BACKWARD = Vec3Backward();\r\nexport const ZERO = Vec3Zero();\r\n", "import { IRectangle } from '../../geom/rectangle/IRectangle';\r\nimport { Mat4Multiply } from '../mat4/Mat4Multiply';\r\nimport { Matrix4 } from '../mat4/Matrix4';\r\nimport { Vec3 } from './Vec3';\r\nimport { Vec3TransformMat4 } from './Vec3TransformMat4';\r\n\r\nconst tempMatrix1 = new Matrix4();\r\nconst tempMatrix2 = new Matrix4();\r\n\r\nexport function Vec3Project (v: Vec3, world: Matrix4, transform: Matrix4, viewport: IRectangle, out: Vec3 = new Vec3()): Vec3\r\n{\r\n    const { x, y, width, height } = viewport;\r\n\r\n    tempMatrix1.set(\r\n        width / 2, 0, 0, 0,\r\n        0, -height / 2, 0, 0,\r\n        0, 0, 0.5, 0,\r\n        x + width / 2, height / 2 + y, 0.5, 1\r\n    );\r\n\r\n    Mat4Multiply(world, transform, tempMatrix2);\r\n    Mat4Multiply(tempMatrix2, tempMatrix1, tempMatrix2);\r\n\r\n    return Vec3TransformMat4(v, tempMatrix2, out);\r\n}\r\n", "import { Mat4Invert } from '../mat4/Mat4Invert';\r\nimport { Mat4Multiply } from '../mat4/Mat4Multiply';\r\nimport { Matrix4 } from '../mat4/Matrix4';\r\nimport { Vec3 } from './Vec3';\r\nimport { Vec3Scale } from './Vec3Scale';\r\nimport { Vec3TransformMat4 } from './Vec3TransformMat4';\r\n\r\nconst matrix = new Matrix4();\r\nconst screenSource = new Vec3();\r\n\r\nexport function Vec3Unproject (v: Vec3, viewportWidth: number, viewportHeight: number, world: Matrix4, view: Matrix4, projection: Matrix4, out: Vec3 = new Vec3()): Vec3\r\n{\r\n    Mat4Multiply(world, view, matrix);\r\n    Mat4Multiply(matrix, projection, matrix);\r\n    Mat4Invert(matrix, matrix);\r\n\r\n    const { x, y, z } = v;\r\n\r\n    screenSource.set(\r\n        x / viewportWidth * 2 - 1,\r\n        -(y / viewportHeight * 2 - 1),\r\n        2 * z - 1\r\n    );\r\n\r\n    Vec3TransformMat4(screenSource, matrix, out);\r\n\r\n    const data = matrix.data;\r\n\r\n    const num = screenSource.x * data[3] + screenSource.y * data[7] + screenSource.z * data[11] + data[15];\r\n\r\n    //  if within epsilon?\r\n    return Vec3Scale(out, 1 / num, out);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Snap a value to nearest grid slice, using ceil.\r\n *\r\n * Example: if you have an interval gap of `5` and a position of `12`... you will snap to `15`.\r\n * As will `14` snap to `15`... but `16` will snap to `20`.\r\n *\r\n * @function Phaser.Math.Snap.Ceil\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to snap.\r\n * @param {number} gap - The interval gap of the grid.\r\n * @param {number} [start=0] - Optional starting offset for gap.\r\n * @param {boolean} [divide=false] - If `true` it will divide the snapped value by the gap before returning.\r\n *\r\n * @return {number} The snapped value.\r\n */\r\nexport function SnapCeil (value: number, gap: number, start: number = 0, divide: boolean = false): number\r\n{\r\n    if (gap === 0)\r\n    {\r\n        return value;\r\n    }\r\n\r\n    value -= start;\r\n    value = gap * Math.ceil(value / gap);\r\n\r\n    return (divide) ? (start + value) / gap : start + value;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Snap a value to nearest grid slice, using floor.\r\n *\r\n * Example: if you have an interval gap of `5` and a position of `12`... you will snap to `10`.\r\n * As will `14` snap to `10`... but `16` will snap to `15`.\r\n *\r\n * @function Phaser.Math.Snap.Floor\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to snap.\r\n * @param {number} gap - The interval gap of the grid.\r\n * @param {number} [start=0] - Optional starting offset for gap.\r\n * @param {boolean} [divide=false] - If `true` it will divide the snapped value by the gap before returning.\r\n *\r\n * @return {number} The snapped value.\r\n */\r\nexport function SnapFloor (value: number, gap: number, start: number = 0, divide: boolean = false): number\r\n{\r\n    if (gap === 0)\r\n    {\r\n        return value;\r\n    }\r\n\r\n    value -= start;\r\n    value = gap * Math.floor(value / gap);\r\n\r\n    return (divide) ? (start + value) / gap : start + value;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Snap a value to nearest grid slice, using rounding.\r\n *\r\n * Example: if you have an interval gap of `5` and a position of `12`... you will snap to `10` whereas `14` will snap to `15`.\r\n *\r\n * @function Phaser.Math.Snap.To\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to snap.\r\n * @param {number} gap - The interval gap of the grid.\r\n * @param {number} [start=0] - Optional starting offset for gap.\r\n * @param {boolean} [divide=false] - If `true` it will divide the snapped value by the gap before returning.\r\n *\r\n * @return {number} The snapped value.\r\n */\r\nexport function SnapTo (value: number, gap: number, start: number = 0, divide: boolean = false): number\r\n{\r\n    if (gap === 0)\r\n    {\r\n        return value;\r\n    }\r\n\r\n    value -= start;\r\n    value = gap * Math.round(value / gap);\r\n\r\n    return (divide) ? (start + value) / gap : start + value;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { SnapCeil } from './SnapCeil';\r\nimport { SnapFloor } from './SnapFloor';\r\nimport { SnapTo } from './SnapTo';\r\n\r\nexport {\r\n    SnapCeil,\r\n    SnapFloor,\r\n    SnapTo\r\n};\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculate the mean average of the given values.\r\n *\r\n * @function Phaser.Math.Average\r\n * @since 3.0.0\r\n *\r\n * @param {number[]} values - The values to average.\r\n *\r\n * @return {number} The average value.\r\n */\r\nexport function Average (values: number[]): number\r\n{\r\n    let sum = 0;\r\n\r\n    for (let i = 0; i < values.length; i++)\r\n    {\r\n        sum += (+values[i]);\r\n    }\r\n\r\n    return sum / values.length;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Ceils to some place comparative to a `base`, default is 10 for decimal place.\r\n *\r\n * The `place` is represented by the power applied to `base` to get that place.\r\n *\r\n * @function Phaser.Math.CeilTo\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to round.\r\n * @param {number} [place=0] - The place to round to.\r\n * @param {number} [base=10] - The base to round in. Default is 10 for decimal.\r\n *\r\n * @return {number} The rounded value.\r\n */\r\nexport function CeilTo (value: number, place: number = 0, base: number = 10): number\r\n{\r\n    const p = Math.pow(base, -place);\r\n\r\n    return Math.ceil(value * p) / p;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { MATH_CONST } from './const';\r\n\r\n/**\r\n * Convert the given angle from degrees, to the equivalent angle in radians.\r\n *\r\n * @function Phaser.Math.DegToRad\r\n * @since 3.0.0\r\n *\r\n * @param {number} degrees - The angle (in degrees) to convert to radians.\r\n *\r\n * @return {number} The given angle converted to radians.\r\n */\r\nexport function DegToRad (degrees: number): number\r\n{\r\n    return degrees * MATH_CONST.DEG_TO_RAD;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculates the positive difference of two given numbers.\r\n *\r\n * @function Phaser.Math.Difference\r\n * @since 3.0.0\r\n *\r\n * @param {number} a - The first number in the calculation.\r\n * @param {number} b - The second number in the calculation.\r\n *\r\n * @return {number} The positive difference of the two given numbers.\r\n */\r\nexport function Difference (a: number, b: number): number\r\n{\r\n    return Math.abs(a - b);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Floors to some place comparative to a `base`, default is 10 for decimal place.\r\n *\r\n * The `place` is represented by the power applied to `base` to get that place.\r\n *\r\n * @function Phaser.Math.FloorTo\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to round.\r\n * @param {number} [place=0] - The place to round to.\r\n * @param {number} [base=10] - The base to round in. Default is 10 for decimal.\r\n *\r\n * @return {number} The rounded value.\r\n */\r\nexport function FloorTo (value: number, place: number = 0, base: number = 10): number\r\n{\r\n    const p = Math.pow(base, -place);\r\n\r\n    return Math.floor(value * p) / p;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Clamp } from './Clamp';\r\n\r\n/**\r\n * Return a value based on the range between `min` and `max` and the percentage given.\r\n *\r\n * @function Phaser.Math.FromPercent\r\n * @since 3.0.0\r\n *\r\n * @param {number} percent - A value between 0 and 1 representing the percentage.\r\n * @param {number} min - The minimum value.\r\n * @param {number} [max] - The maximum value.\r\n *\r\n * @return {number} The value that is `percent` percent between `min` and `max`.\r\n */\r\nexport function FromPercent (percent: number, min: number, max?: number): number\r\n{\r\n    percent = Clamp(percent, 0, 1);\r\n\r\n    return (max - min) * percent;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Calculate a per-ms speed from a distance and time (given in seconds).\r\n *\r\n * @function Phaser.Math.GetSpeed\r\n * @since 3.0.0\r\n *\r\n * @param {number} distance - The distance.\r\n * @param {number} time - The time, in seconds.\r\n *\r\n * @return {number} The speed, in distance per ms.\r\n */\r\nexport function GetSpeed (distance: number, time: number): number\r\n{\r\n    return (distance / time) / 1000;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Add an `amount` to a `value`, limiting the maximum result to `max`.\r\n *\r\n * @function Phaser.Math.MaxAdd\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to add to.\r\n * @param {number} amount - The amount to add.\r\n * @param {number} max - The maximum value to return.\r\n *\r\n * @return {number} The resulting value.\r\n */\r\nexport function MaxAdd (value: number, amount: number, max: number): number\r\n{\r\n    return Math.min(value + amount, max);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Subtract an `amount` from `value`, limiting the minimum result to `min`.\r\n *\r\n * @function Phaser.Math.MinSub\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to subtract from.\r\n * @param {number} amount - The amount to subtract.\r\n * @param {number} min - The minimum value to return.\r\n *\r\n * @return {number} The resulting value.\r\n */\r\nexport function MinSub (value: number, amount: number, min: number): number\r\n{\r\n    return Math.max(value - amount, min);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Work out what percentage `value` is of the range between `min` and `max`.\r\n * If `max` isn't given then it will return the percentage of `value` to `min`.\r\n *\r\n * You can optionally specify an `upperMax` value, which is a mid-way point in the range that represents 100%, after which the % starts to go down to zero again.\r\n *\r\n * @function Phaser.Math.Percent\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to determine the percentage of.\r\n * @param {number} min - The minimum value.\r\n * @param {number} [max] - The maximum value.\r\n * @param {number} [upperMax] - The mid-way point in the range that represents 100%.\r\n *\r\n * @return {number} A value between 0 and 1 representing the percentage.\r\n */\r\nexport function Percent (value: number, min: number, max?: number, upperMax?: number): number\r\n{\r\n    if (max === undefined) { max = min + 1; }\r\n\r\n    let percentage = (value - min) / (max - min);\r\n\r\n    if (percentage > 1)\r\n    {\r\n        if (upperMax !== undefined)\r\n        {\r\n            percentage = ((upperMax - value)) / (upperMax - max);\r\n\r\n            if (percentage < 0)\r\n            {\r\n                percentage = 0;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            percentage = 1;\r\n        }\r\n    }\r\n    else if (percentage < 0)\r\n    {\r\n        percentage = 0;\r\n    }\r\n\r\n    return percentage;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { MATH_CONST } from './const';\r\n\r\n/**\r\n * Convert the given angle in radians, to the equivalent angle in degrees.\r\n *\r\n * @function Phaser.Math.RadToDeg\r\n * @since 3.0.0\r\n *\r\n * @param {number} radians - The angle in radians to convert ot degrees.\r\n *\r\n * @return {number} The given angle converted to degrees.\r\n */\r\nexport function RadToDeg (radians: number): number\r\n{\r\n    return radians * MATH_CONST.RAD_TO_DEG;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Round a value to the given precision.\r\n * \r\n * For example:\r\n * \r\n * ```javascript\r\n * RoundTo(123.456, 0) = 123\r\n * RoundTo(123.456, 1) = 120\r\n * RoundTo(123.456, 2) = 100\r\n * ```\r\n * \r\n * To round the decimal, i.e. to round to precision, pass in a negative `place`:\r\n * \r\n * ```javascript\r\n * RoundTo(123.456789, 0) = 123\r\n * RoundTo(123.456789, -1) = 123.5\r\n * RoundTo(123.456789, -2) = 123.46\r\n * RoundTo(123.456789, -3) = 123.457\r\n * ```\r\n *\r\n * @function Phaser.Math.RoundTo\r\n * @since 3.0.0\r\n *\r\n * @param {number} value - The value to round.\r\n * @param {number} [place=0] - The place to round to. Positive to round the units, negative to round the decimal.\r\n * @param {number} [base=10] - The base to round in. Default is 10 for decimal.\r\n *\r\n * @return {number} The rounded value.\r\n */\r\nexport function RoundTo (value: number, place: number = 0, base: number = 10): number\r\n{\r\n    const p = Math.pow(base, -place);\r\n\r\n    return Math.round(value * p) / p;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * @typedef {object} Phaser.Types.Math.SinCosTable\r\n * @since 3.0.0\r\n *\r\n * @property {number[]} sin - The sine values.\r\n * @property {number[]} cos - The cosine values.\r\n * @property {number} length - The length.\r\n */\r\n\r\ntype SinCosTable = { sin: number[]; cos: number[]; length: number };\r\n\r\n/**\r\n * Generate a series of sine and cosine values.\r\n *\r\n * @function Phaser.Math.SinCosTableGenerator\r\n * @since 3.0.0\r\n *\r\n * @param {number} length - The number of values to generate.\r\n * @param {number} [sinAmp=1] - The sine value amplitude.\r\n * @param {number} [cosAmp=1] - The cosine value amplitude.\r\n * @param {number} [frequency=1] - The frequency of the values.\r\n *\r\n * @return {SinCosTable} The generated values.\r\n */\r\nexport function SinCosTableGenerator (length: number, sinAmp: number = 1, cosAmp: number = 1, frequency: number = 1): SinCosTable\r\n{\r\n    frequency *= Math.PI / length;\r\n\r\n    const cos = [];\r\n    const sin = [];\r\n\r\n    for (let c = 0; c < length; c++)\r\n    {\r\n        cosAmp -= sinAmp * frequency;\r\n        sinAmp += cosAmp * frequency;\r\n\r\n        cos[c] = cosAmp;\r\n        sin[c] = sinAmp;\r\n    }\r\n\r\n    return {\r\n        sin,\r\n        cos,\r\n        length\r\n    };\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Checks if the two values are within the given `tolerance` of each other.\r\n *\r\n * @function Phaser.Math.Within\r\n * @since 3.0.0\r\n *\r\n * @param {number} a - The first value to use in the calculation.\r\n * @param {number} b - The second value to use in the calculation.\r\n * @param {number} tolerance - The tolerance. Anything equal to or less than this value is considered as being within range.\r\n *\r\n * @return {boolean} Returns `true` if `a` is less than or equal to the tolerance of `b`.\r\n */\r\nexport function Within (a: number, b: number, tolerance: number): boolean\r\n{\r\n    return (Math.abs(a - b) <= tolerance);\r\n}\r\n", "import { IBaseCamera } from '../../../camera/IBaseCamera';\r\nimport { IRenderPass } from './IRenderPass';\r\n\r\n//  Call at the start of each World rendering\r\n\r\nexport function Begin (renderPass: IRenderPass, camera2D: IBaseCamera): void\r\n{\r\n    renderPass.current2DCamera = camera2D;\r\n    renderPass.cameraMatrix = camera2D.matrix;\r\n\r\n    renderPass.shader.bindDefault();\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\n\r\nexport function Start (renderPass: IRenderPass): void\r\n{\r\n    renderPass.current2DCamera = renderPass.quadCamera;\r\n    renderPass.cameraMatrix = renderPass.quadCamera.matrix;\r\n\r\n    renderPass.count = 0;\r\n    renderPass.flushTotal = 0;\r\n\r\n    renderPass.framebuffer.bindDefault();\r\n    renderPass.blendMode.bindDefault();\r\n    renderPass.viewport.bindDefault();\r\n    renderPass.vertexbuffer.bindDefault();\r\n    renderPass.shader.bindDefault();\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\n\r\n/**\r\n * Check to see if the Circle contains the given x / y coordinates.\r\n\r\n */\r\nexport function CircleContains (circle: ICircle, x: number, y: number): boolean\r\n{\r\n    //  Check if x/y are within the bounds first\r\n    if (circle.radius > 0 && x >= circle.left && x <= circle.right && y >= circle.top && y <= circle.bottom)\r\n    {\r\n        const dx = (circle.x - x) * (circle.x - x);\r\n        const dy = (circle.y - y) * (circle.y - y);\r\n\r\n        return (dx + dy) <= (circle.radius * circle.radius);\r\n    }\r\n    else\r\n    {\r\n        return false;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { CircleContains } from './CircleContains';\r\n\r\n/**\r\n * @classdesc\r\n * A Circle object.\r\n *\r\n * This is a geometry object, containing numerical values and related methods to inspect and modify them.\r\n * It is not a Game Object, in that you cannot add it to the display list, and it has no texture.\r\n * To render a Circle you should look at the capabilities of the Graphics class.\r\n *\r\n * @class Circle\r\n * @memberof Phaser.Geom\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {number} [x=0] - The x position of the center of the circle.\r\n * @param {number} [y=0] - The y position of the center of the circle.\r\n * @param {number} [radius=0] - The radius of the circle.\r\n */\r\nexport class Circle\r\n{\r\n    x: number;\r\n    y: number;\r\n\r\n    private _radius: number;\r\n    private _diameter: number;\r\n\r\n    constructor (x: number = 0, y: number = 0, radius: number = 0)\r\n    {\r\n        this.set(x, y, radius);\r\n    }\r\n\r\n    set (x: number = 0, y: number = 0, radius: number = 0): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.radius = radius;\r\n\r\n        return this;\r\n    }\r\n\r\n    contains (x: number, y: number): boolean\r\n    {\r\n        return CircleContains(this, x, y);\r\n    }\r\n\r\n    get radius (): number\r\n    {\r\n        return this._radius;\r\n    }\r\n\r\n    set radius (value: number)\r\n    {\r\n        this._radius = value;\r\n        this._diameter = value * 2;\r\n    }\r\n\r\n    get diameter (): number\r\n    {\r\n        return this._diameter;\r\n    }\r\n\r\n    set diameter (value: number)\r\n    {\r\n        this._diameter = value;\r\n        this._radius = value * 0.5;\r\n    }\r\n\r\n    get left (): number\r\n    {\r\n        return this.x - this._radius;\r\n    }\r\n\r\n    set left (value: number)\r\n    {\r\n        this.x = value + this._radius;\r\n    }\r\n\r\n    get right (): number\r\n    {\r\n        return this.x + this._radius;\r\n    }\r\n\r\n    set right (value: number)\r\n    {\r\n        this.x = value - this._radius;\r\n    }\r\n\r\n    get top (): number\r\n    {\r\n        return this.y - this._radius;\r\n    }\r\n\r\n    set top (value: number)\r\n    {\r\n        this.y = value + this._radius;\r\n    }\r\n\r\n    get bottom (): number\r\n    {\r\n        return this.y + this._radius;\r\n    }\r\n\r\n    set bottom (value: number)\r\n    {\r\n        this.y = value - this._radius;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { CircleContains } from './CircleContains';\r\nimport { ICircle } from './ICircle';\r\nimport { Vec2 } from '../../math/vec2/Vec2';\r\n\r\n/**\r\n * Check to see if the Circle contains the given Point object.\r\n */\r\nexport function CircleContainsPoint (circle: ICircle, point: Vec2): boolean\r\n{\r\n    return CircleContains(circle, point.x, point.y);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { CircleContains } from './CircleContains';\r\nimport { ICircle } from './ICircle';\r\nimport { IRectangle } from '../rectangle/IRectangle';\r\n\r\n/**\r\n * Check to see if the Circle contains all four points of the given Rectangle object.\r\n */\r\nexport function CircleContainsRect (circle: ICircle, rect: IRectangle): boolean\r\n{\r\n    return (\r\n        CircleContains(circle, rect.x, rect.y) &&\r\n        CircleContains(circle, rect.right, rect.y) &&\r\n        CircleContains(circle, rect.x, rect.bottom) &&\r\n        CircleContains(circle, rect.right, rect.bottom)\r\n    );\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\n\r\n/**\r\n * Compares the `x`, `y` and `radius` properties of the two given Circles.\r\n * Returns `true` if they all match, otherwise returns `false`.\r\n */\r\nexport function CircleEquals (circle: ICircle, toCompare: ICircle): boolean\r\n{\r\n    return (\r\n        circle.x === toCompare.x &&\r\n        circle.y === toCompare.y &&\r\n        circle.radius === toCompare.radius\r\n    );\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Circle } from './Circle';\r\nimport { ICircle } from './ICircle';\r\n\r\n/**\r\n * Creates a new Circle instance based on the values contained in the given source.\r\n */\r\nexport function CloneCircle (source: ICircle): Circle\r\n{\r\n    return new Circle(source.x, source.y, source.radius);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\n\r\n/**\r\n * Copies the `x`, `y` and `radius` properties from the `source` Circle\r\n * into the given `dest` Circle, then returns the `dest` Circle.\r\n */\r\nexport function CopyCircleFrom (source: ICircle, dest: ICircle): ICircle\r\n{\r\n    return dest.set(source.x, source.y, source.radius);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\n\r\n/**\r\n * Calculates the area of the circle.\r\n */\r\nexport function GetCircleArea (circle: ICircle): number\r\n{\r\n    return (circle.radius > 0) ? Math.PI * circle.radius * circle.radius : 0;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { IRectangle } from './IRectangle';\r\n\r\n/**\r\n * Checks if a given point is inside a Rectangle's bounds.\r\n */\r\nexport function RectangleContains (rect: IRectangle, x: number, y: number): boolean\r\n{\r\n    if (rect.width <= 0 || rect.height <= 0)\r\n    {\r\n        return false;\r\n    }\r\n\r\n    return (rect.x <= x && rect.x + rect.width >= x && rect.y <= y && rect.y + rect.height >= y);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { RectangleContains } from './RectangleContains';\r\n\r\nexport class Rectangle\r\n{\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n\r\n    constructor (x: number = 0, y: number = 0, width: number = 0, height: number = 0)\r\n    {\r\n        this.set(x, y, width, height);\r\n    }\r\n\r\n    set (x: number = 0, y: number = 0, width: number = 0, height: number = 0): this\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        return this;\r\n    }\r\n\r\n    contains (x: number, y: number): boolean\r\n    {\r\n        return RectangleContains(this, x, y);\r\n    }\r\n\r\n    set right (value: number)\r\n    {\r\n        if (value <= this.x)\r\n        {\r\n            this.width = 0;\r\n        }\r\n        else\r\n        {\r\n            this.width = value - this.x;\r\n        }\r\n    }\r\n\r\n    get right (): number\r\n    {\r\n        return this.x + this.width;\r\n    }\r\n\r\n    set bottom (value: number)\r\n    {\r\n        if (value <= this.y)\r\n        {\r\n            this.height = 0;\r\n        }\r\n        else\r\n        {\r\n            this.height = value - this.y;\r\n        }\r\n    }\r\n\r\n    get bottom (): number\r\n    {\r\n        return this.y + this.height;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\nimport { Rectangle } from '../rectangle/Rectangle';\r\n\r\n/**\r\n * Returns the bounds of the Circle object.\r\n */\r\nexport function GetCircleBounds (circle: ICircle, out: Rectangle = new Rectangle()): Rectangle\r\n{\r\n    return out.set(\r\n        circle.left,\r\n        circle.top,\r\n        circle.diameter,\r\n        circle.diameter\r\n    );\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\n\r\nexport function GetCircleCircumference (circle: ICircle): number\r\n{\r\n    return 2 * (Math.PI * circle.radius);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\nimport { Vec2 } from '../../math/vec2/Vec2';\r\n\r\nexport function GetCircleCircumferencePoint (circle: ICircle, angle: number, out: Vec2 = new Vec2()): Vec2\r\n{\r\n    return out.set(\r\n        circle.x + (circle.radius * Math.cos(angle)),\r\n        circle.y + (circle.radius * Math.sin(angle))\r\n    );\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { FromPercent } from '../../math/FromPercent';\r\nimport { GetCircleCircumferencePoint } from './GetCircleCircumferencePoint';\r\nimport { ICircle } from './ICircle';\r\nimport { MATH_CONST } from '../../math/const';\r\nimport { Vec2 } from '../../math/vec2/Vec2';\r\n\r\n/**\r\n * Returns a Point object containing the coordinates of a point on the circumference of the Circle\r\n * based on the given angle normalized to the range 0 to 1. I.e. a value of 0.5 will give the point\r\n * at 180 degrees around the circle.\r\n */\r\nexport function GetCirclePoint (circle: ICircle, position: number, out: Vec2 = new Vec2()): Vec2\r\n{\r\n    const angle = FromPercent(position, 0, MATH_CONST.PI2);\r\n\r\n    return GetCircleCircumferencePoint(circle, angle, out);\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { FromPercent } from '../../math/FromPercent';\r\nimport { GetCircleCircumference } from './GetCircleCircumference';\r\nimport { GetCircleCircumferencePoint } from './GetCircleCircumferencePoint';\r\nimport { ICircle } from './ICircle';\r\nimport { MATH_CONST } from '../../math/const';\r\nimport { Vec2 } from '../../math/vec2/Vec2';\r\n\r\n/**\r\n * Returns an array of Point objects containing the coordinates of the points around the circumference of the Circle,\r\n * based on the given quantity or stepRate values.\r\n */\r\nexport function GetCirclePoints (circle: ICircle, step: number, quantity: number = 0, out: Vec2[] = []): Vec2[]\r\n{\r\n    //  If quantity is a falsey value (false, null, 0, undefined, etc) then we calculate it based on the stepRate instead.\r\n    if (!quantity)\r\n    {\r\n        quantity = GetCircleCircumference(circle) / step;\r\n    }\r\n\r\n    for (let i = 0; i < quantity; i++)\r\n    {\r\n        const angle = FromPercent(i / quantity, 0, MATH_CONST.PI2);\r\n\r\n        out.push(GetCircleCircumferencePoint(circle, angle));\r\n    }\r\n\r\n    return out;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { FromPercent } from '../../math/FromPercent';\r\nimport { GetCircleCircumference } from './GetCircleCircumference';\r\nimport { GetCircleCircumferencePoint } from './GetCircleCircumferencePoint';\r\nimport { ICircle } from './ICircle';\r\nimport { MATH_CONST } from '../../math/const';\r\nimport { Vec2 } from '../../math/vec2/Vec2';\r\n\r\n/**\r\n * Returns an array of Point objects containing the coordinates of the points around the circumference of the Circle,\r\n * based on the given quantity or stepRate values.\r\n *\r\n * Points returned are only those within startAngle to endAngle, inclusive.\r\n *\r\n * Angles are given in radians.\r\n */\r\nexport function GetCirclePointsBetween (circle: ICircle, startAngle: number, endAngle: number, step: number, anticlockwise: boolean = false, includeCenter: boolean = false, quantity: number = 0, out: Vec2[] = []): Vec2[]\r\n{\r\n    //  If quantity is a falsey value (false, null, 0, undefined, etc) then we calculate it based on the stepRate instead.\r\n    if (!quantity)\r\n    {\r\n        quantity = GetCircleCircumference(circle) / step;\r\n    }\r\n\r\n    for (let i = 0; i < quantity; i++)\r\n    {\r\n        const angle = FromPercent(i / quantity, 0, MATH_CONST.PI2);\r\n\r\n        if (angle >= startAngle && angle <= endAngle)\r\n        {\r\n            out.push(GetCircleCircumferencePoint(circle, angle));\r\n        }\r\n    }\r\n\r\n    if (anticlockwise)\r\n    {\r\n        out = out.reverse();\r\n    }\r\n\r\n    if (includeCenter)\r\n    {\r\n        out.push(new Vec2(circle.x, circle.y));\r\n    }\r\n\r\n    return out;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\nimport { Vec2 } from '../../math/vec2/Vec2';\r\n\r\n/**\r\n * Returns a uniformly distributed random point from anywhere within the given Circle.\r\n */\r\nexport function GetCircleRandomPoint (circle: ICircle, out: Vec2 = new Vec2()): Vec2\r\n{\r\n    const t = 2 * Math.PI * Math.random();\r\n    const u = Math.random() + Math.random();\r\n    const r = (u > 1) ? 2 - u : u;\r\n    const x = r * Math.cos(t);\r\n    const y = r * Math.sin(t);\r\n\r\n    return out.set(\r\n        circle.x + (x * circle.radius),\r\n        circle.y + (y * circle.radius)\r\n    );\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\n\r\n/**\r\n * Translates the Circle by the values given.\r\n */\r\nexport function TranslateCircle (circle: ICircle, x: number, y: number): ICircle\r\n{\r\n    circle.x += x;\r\n    circle.y += y;\r\n\r\n    return circle;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { ICircle } from './ICircle';\r\nimport { Vec2 } from '../../math/vec2/Vec2';\r\n\r\n/**\r\n * Offsets the Circle by the values given in the `x` and `y` properties of the Point object.\r\n */\r\nexport function TranslateCirclePoint (circle: ICircle, point: Vec2): ICircle\r\n{\r\n    circle.x += point.x;\r\n    circle.y += point.y;\r\n\r\n    return circle;\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Circle } from './Circle';\r\nimport { CircleContains } from './CircleContains';\r\nimport { CircleContainsPoint } from './CircleContainsPoint';\r\nimport { CircleContainsRect } from './CircleContainsRect';\r\nimport { CircleEquals } from './CircleEquals';\r\nimport { CloneCircle } from './CloneCircle';\r\nimport { CopyCircleFrom } from './CopyCircleFrom';\r\nimport { GetCircleArea } from './GetCircleArea';\r\nimport { GetCircleBounds } from './GetCircleBounds';\r\nimport { GetCircleCircumference } from './GetCircleCircumference';\r\nimport { GetCircleCircumferencePoint } from './GetCircleCircumferencePoint';\r\nimport { GetCirclePoint } from './GetCirclePoint';\r\nimport { GetCirclePoints } from './GetCirclePoints';\r\nimport { GetCirclePointsBetween } from './GetCirclePointsBetween';\r\nimport { GetCircleRandomPoint } from './GetCircleRandomPoint';\r\nimport { TranslateCircle } from './TranslateCircle';\r\nimport { TranslateCirclePoint } from './TranslateCirclePoint';\r\n\r\nexport {\r\n    Circle,\r\n    CircleContains,\r\n    CircleContainsPoint,\r\n    CircleContainsRect,\r\n    CircleEquals,\r\n    GetCircleRandomPoint,\r\n    CloneCircle,\r\n    CopyCircleFrom,\r\n    GetCircleArea,\r\n    GetCircleBounds,\r\n    GetCircleCircumference,\r\n    GetCircleCircumferencePoint,\r\n    GetCirclePoint,\r\n    GetCirclePoints,\r\n    GetCirclePointsBetween,\r\n    TranslateCircle,\r\n    TranslateCirclePoint\r\n};\r\n", "import { Circle, GetCirclePointsBetween } from '../../../geom/circle';\r\n\r\nimport { BatchTriangle } from './BatchTriangle';\r\nimport { GetVertexBufferEntry } from '../renderpass/GetVertexBufferEntry';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { Triangulate } from '../../../geom/PolyPartition';\r\n\r\nconst circle = new Circle();\r\n\r\nexport function FillArc (renderPass: IRenderPass, x: number, y: number, radius: number, startAngle: number, endAngle: number, steps: number, anticlockwise: boolean, includeCenter: boolean, red: number, green: number, blue: number, alpha: number): void\r\n{\r\n    circle.set(x, y, radius);\r\n\r\n    const points = GetCirclePointsBetween(circle, startAngle, endAngle, steps, anticlockwise, includeCenter);\r\n\r\n    const tris = Triangulate(points);\r\n\r\n    if (!tris.length)\r\n    {\r\n        return;\r\n    }\r\n\r\n    const { F32, offset } = GetVertexBufferEntry(renderPass, tris.length);\r\n\r\n    const textureIndex = renderPass.textures.setWhite();\r\n\r\n    let idx = offset;\r\n\r\n    tris.forEach(tri =>\r\n    {\r\n        idx = BatchTriangle(\r\n            F32, idx, textureIndex,\r\n            tri[0].x, tri[0].y,\r\n            tri[1].x, tri[1].y,\r\n            tri[2].x, tri[2].y,\r\n            red, green, blue, alpha\r\n        );\r\n    });\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetDefaultOriginX (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.DEFAULT_ORIGIN).x;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetDefaultOriginY (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.DEFAULT_ORIGIN).y;\r\n}\r\n", "import { BoundsComponent } from './BoundsComponent';\r\nimport { GameObjectWorld } from '../../GameObjectWorld';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddBoundsComponent (id: number): void\r\n{\r\n    addComponent(GameObjectWorld, BoundsComponent, id);\r\n}\r\n", "import { ColorComponent } from './ColorComponent';\r\n\r\n//  red, green, blue in the range 0-255\r\n//  alpha in the range 0-1\r\n\r\nexport class Color\r\n{\r\n    private id: number;\r\n\r\n    constructor (id: number, red: number = 255, green: number = 255, blue: number = 255, alpha: number = 1)\r\n    {\r\n        this.id = id;\r\n\r\n        this.set(red, green, blue, alpha);\r\n    }\r\n\r\n    set (red: number, green: number, blue: number, alpha: number): void\r\n    {\r\n        this.red = red;\r\n        this.green = green;\r\n        this.blue = blue;\r\n        this.alpha = alpha;\r\n    }\r\n\r\n    //  All in the range 0-255 or 0x00-0xFF\r\n    set red (value: number)\r\n    {\r\n        ColorComponent.red[this.id] = value / 255;\r\n    }\r\n\r\n    get red (): number\r\n    {\r\n        return ColorComponent.red[this.id] * 255;\r\n    }\r\n\r\n    set green (value: number)\r\n    {\r\n        ColorComponent.green[this.id] = value / 255;\r\n    }\r\n\r\n    get green (): number\r\n    {\r\n        return ColorComponent.green[this.id] * 255;\r\n    }\r\n\r\n    set blue (value: number)\r\n    {\r\n        ColorComponent.blue[this.id] = value / 255;\r\n    }\r\n\r\n    get blue (): number\r\n    {\r\n        return ColorComponent.blue[this.id] * 255;\r\n    }\r\n\r\n    set alpha (value: number)\r\n    {\r\n        ColorComponent.alpha[this.id] = value;\r\n    }\r\n\r\n    get alpha (): number\r\n    {\r\n        return ColorComponent.alpha[this.id];\r\n    }\r\n}\r\n", "import { GameObjectCache, GameObjectTree } from '../gameobjects';\r\n\r\nimport { ClearWorldAndParentID } from '../components/hierarchy';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function RemoveChildrenBetween <P extends IGameObject> (parent: P, beginIndex: number = 0, endIndex?: number): IGameObject[]\r\n{\r\n    const children = GameObjectTree.get(parent.id);\r\n\r\n    if (endIndex === undefined)\r\n    {\r\n        endIndex = children.length;\r\n    }\r\n\r\n    const range = endIndex - beginIndex;\r\n\r\n    if (range > 0 && range <= endIndex)\r\n    {\r\n        const removed = children.splice(beginIndex, range);\r\n\r\n        removed.forEach(childID =>\r\n        {\r\n            ClearWorldAndParentID(childID);\r\n        });\r\n\r\n        return removed.map(id => GameObjectCache.get(id));\r\n    }\r\n    else\r\n    {\r\n        return [];\r\n    }\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChildrenBetween } from './RemoveChildrenBetween';\r\nimport { SetDirtyWorldDisplayList } from '../components/dirty';\r\n\r\nexport function DestroyChildren <T extends IGameObject> (parent: T, beginIndex: number = 0, endIndex?: number): void\r\n{\r\n    const removed = RemoveChildrenBetween(parent, beginIndex, endIndex);\r\n\r\n    removed.forEach(child =>\r\n    {\r\n        child.destroy();\r\n    });\r\n\r\n    SetDirtyWorldDisplayList(parent.id);\r\n}\r\n", "import { IGameObject } from '../IGameObject';\r\n\r\nexport const DestroyEvent: string = 'destroy';\r\n\r\nexport type DestroyEventHandler = <T extends IGameObject> (child: T) => void;\r\n", "import { IEventEmitter } from './IEventEmitter';\r\nimport { IEventInstance } from './IEventInstance';\r\n\r\nexport function Emit (emitter: IEventEmitter, event: string, ...args: unknown[]): boolean\r\n{\r\n    if (emitter.events.size === 0 || !emitter.events.has(event))\r\n    {\r\n        return false;\r\n    }\r\n\r\n    const listeners: Set<IEventInstance> = emitter.events.get(event);\r\n\r\n    //  Convert to an array so the callbacks cannot impact what we're iterating\r\n    //  It works, but generates gc\r\n    const handlers = [ ...listeners ];\r\n\r\n    for (const ee of handlers)\r\n    {\r\n        ee.callback.apply(ee.context, args);\r\n\r\n        if (ee.once)\r\n        {\r\n            listeners.delete(ee);\r\n        }\r\n    }\r\n\r\n    if (listeners.size === 0)\r\n    {\r\n        emitter.events.delete(event);\r\n    }\r\n\r\n    return true;\r\n}\r\n", "export const GameObjectTree: Map<number, number[]> = new Map();\r\n", "import { HierarchyComponent } from './HierarchyComponent';\r\n\r\nexport function GetParentID (id: number): number\r\n{\r\n    return HierarchyComponent.parentID[id];\r\n}\r\n", "import { GetParentID } from '../components/hierarchy/GetParentID';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function IsValidParent <P extends IGameObject, C extends IGameObject> (parent: P, child: C): boolean\r\n{\r\n    //  It's not a valid parent if the ID matches the parent, or it's already the child's parent\r\n    return !(child.id === parent.id || parent.id === GetParentID(child.id));\r\n}\r\n", "import { GameObjectTree } from '../gameobjects/GameObjectTree';\r\nimport { GetParentID } from '../components/hierarchy';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function GetChildIndex <T extends IGameObject> (child: T): number\r\n{\r\n    const childID = child.id;\r\n\r\n    return GameObjectTree.get(GetParentID(childID)).indexOf(childID);\r\n}\r\n", "import { ClearWorldAndParentID } from '../components/hierarchy';\r\nimport { GameObjectCache } from '../gameobjects/GameObjectCache';\r\nimport { GameObjectTree } from '../gameobjects/GameObjectTree';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function RemoveChildAt <T extends IGameObject> (parent: T, index: number): IGameObject | undefined\r\n{\r\n    const children = GameObjectTree.get(parent.id);\r\n\r\n    if (index >= 0 && index < children.length)\r\n    {\r\n        const removedID = children.splice(index, 1)[0];\r\n\r\n        if (removedID)\r\n        {\r\n            ClearWorldAndParentID(removedID);\r\n\r\n            //  Emit remove event?\r\n\r\n            return GameObjectCache.get(removedID);\r\n        }\r\n    }\r\n}\r\n", "import { GetChildIndex } from './GetChildIndex';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChildAt } from './RemoveChildAt';\r\n\r\nexport function RemoveChild <P extends IGameObject, C extends IGameObject> (parent: P, child: C): C\r\n{\r\n    if (parent && child.hasParent(parent.id))\r\n    {\r\n        RemoveChildAt(parent, GetChildIndex(child));\r\n    }\r\n\r\n    return child;\r\n}\r\n", "import { AddedToWorldEvent, RemovedFromWorldEvent } from '../gameobjects/events';\r\n\r\nimport { DepthFirstSearchFromParentID } from '../components/hierarchy/DepthFirstSearchFromParentID';\r\nimport { Emit } from '../events/Emit';\r\nimport { GameObjectWorld } from '../GameObjectWorld';\r\nimport { HierarchyComponent } from '../components/hierarchy/HierarchyComponent';\r\nimport { IBaseWorld } from '../world/IBaseWorld';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { SetDirtyDisplayList } from '../components/dirty/SetDirtyDisplayList';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function SetWorld <W extends IBaseWorld> (world: W, ...entries: IGameObject[]): IGameObject[]\r\n{\r\n    const worldID = world.id;\r\n    const worldTag = world.tag;\r\n\r\n    entries.forEach(entry =>\r\n    {\r\n        // if (entry.world)\r\n        // {\r\n        //     Emit(entry.world, RemovedFromWorldEvent, entry, entry.world);\r\n        //     Emit(entry, RemovedFromWorldEvent, entry, entry.world);\r\n        // }\r\n\r\n        addComponent(GameObjectWorld, worldTag, entry.id);\r\n\r\n        HierarchyComponent.worldID[entry.id] = worldID;\r\n\r\n        // Emit(world, AddedToWorldEvent, entry, world);\r\n        // Emit(entry, AddedToWorldEvent, entry, world);\r\n\r\n        //  Now set the World on any children\r\n        const children = DepthFirstSearchFromParentID(entry.id);\r\n\r\n        children.map(id =>\r\n        {\r\n            addComponent(GameObjectWorld, worldTag, id);\r\n\r\n            HierarchyComponent.worldID[id] = worldID;\r\n        });\r\n    });\r\n\r\n    SetDirtyDisplayList(worldID);\r\n\r\n    return entries;\r\n}\r\n", "import { GetWorldFromParentID, SetParentID } from '../components/hierarchy';\r\n\r\nimport { GameObjectTree } from '../gameobjects/GameObjectTree';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { InvalidateLocalMatrix2DComponent } from '../components/transform';\r\nimport { IsValidParent } from './IsValidParent';\r\nimport { RemoveChild } from './RemoveChild';\r\nimport { SetDirtyParents } from '../components/dirty';\r\nimport { SetWorld } from './SetWorld';\r\n\r\nexport function AddChildAt <P extends IGameObject, C extends IGameObject> (parent: P, child: C, index: number = -1): C\r\n{\r\n    if (IsValidParent(parent, child))\r\n    {\r\n        const childID = child.id;\r\n        const parentID = parent.id;\r\n        const world = GetWorldFromParentID(parentID);\r\n\r\n        const children = GameObjectTree.get(parentID);\r\n\r\n        if (index === -1)\r\n        {\r\n            index = children.length;\r\n        }\r\n\r\n        if (index >= 0 && index <= children.length)\r\n        {\r\n            RemoveChild(child.getParent(), child);\r\n\r\n            //  Always modify the array before calling SetParentID\r\n            children.splice(index, 0, childID);\r\n\r\n            InvalidateLocalMatrix2DComponent(child.id);\r\n\r\n            if (world)\r\n            {\r\n                SetWorld(world, child);\r\n            }\r\n\r\n            SetParentID(childID, parentID);\r\n\r\n            SetDirtyParents(childID);\r\n        }\r\n    }\r\n\r\n    return child;\r\n}\r\n", "import { AddChildAt } from './AddChildAt';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\n\r\n//  Adds all of the children to the given parent\r\n//  If already a child of the parent, it is skipped\r\n//  If already child of another parent, it is removed from it first\r\n\r\nexport function SetParent <P extends IGameObject> (parent: P, ...children: IGameObject[]): IGameObject[]\r\n{\r\n    children.forEach(child =>\r\n    {\r\n        AddChildAt(parent, child);\r\n    });\r\n\r\n    return children;\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChildrenBetween } from './RemoveChildrenBetween';\r\nimport { SetParent } from './SetParent';\r\n\r\nexport function ReparentChildren <P extends IGameObject, T extends IGameObject> (parent: P, newParent: T, beginIndex: number = 0, endIndex?: number): IGameObject[]\r\n{\r\n    const moved = RemoveChildrenBetween(parent, beginIndex, endIndex);\r\n\r\n    SetParent(newParent, ...moved);\r\n\r\n    return moved;\r\n}\r\n", "import { AddHierarchyComponent, GetChildrenFromParentID, GetNumChildren, GetParentGameObject, HierarchyComponent } from '../components/hierarchy';\r\nimport { AddPermissionsComponent, PermissionsComponent, WillRender, WillUpdate, WillUpdateChildren } from '../components/permissions';\r\n\r\nimport { AddDirtyComponent } from '../components/dirty/AddDirtyComponent';\r\nimport { DestroyChildren } from '../display/DestroyChildren';\r\nimport { DestroyEvent } from './events/DestroyEvent';\r\nimport { Emit } from '../events/Emit';\r\nimport { GameObjectCache } from './GameObjectCache';\r\nimport { GameObjectTree } from './GameObjectTree';\r\nimport { GameObjectWorld } from '../GameObjectWorld';\r\nimport { ICanvasRenderer } from '../renderer/canvas/ICanvasRenderer';\r\nimport { IEventInstance } from '../events/IEventInstance';\r\nimport { IGameObject } from './IGameObject';\r\nimport { IRenderPass } from '../renderer/webgl1/renderpass/IRenderPass';\r\nimport { ReparentChildren } from '../display/ReparentChildren';\r\nimport { SetDirtyParents } from '../components/dirty';\r\nimport { addEntity } from 'bitecs';\r\n\r\nexport class GameObject implements IGameObject\r\n{\r\n    readonly id: number = addEntity(GameObjectWorld);\r\n\r\n    readonly type: string = 'GameObject';\r\n\r\n    //  User defined name. Never used internally.\r\n    name: string = '';\r\n\r\n    events: Map<string, Set<IEventInstance>>;\r\n\r\n    constructor ()\r\n    {\r\n        const id = this.id;\r\n\r\n        AddHierarchyComponent(id);\r\n        AddPermissionsComponent(id);\r\n        AddDirtyComponent(id);\r\n\r\n        GameObjectCache.set(id, this);\r\n        GameObjectTree.set(id, []);\r\n\r\n        this.events = new Map();\r\n    }\r\n\r\n    isRenderable (): boolean\r\n    {\r\n        return WillRender(this.id);\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    beforeUpdate (delta: number, time: number): void\r\n    {\r\n        //  Empty for parent classes to use.\r\n        //  Called before this GameObject and all of its children have been updated.\r\n    }\r\n\r\n    update (delta: number, time: number): void\r\n    {\r\n        this.beforeUpdate(delta, time);\r\n\r\n        if (WillUpdateChildren(this.id))\r\n        {\r\n            const children = GameObjectTree.get(this.id);\r\n\r\n            for (let i = 0; i < children.length; i++)\r\n            {\r\n                const childID = children[i];\r\n\r\n                if (WillUpdate(childID))\r\n                {\r\n                    GameObjectCache.get(childID).update(delta, time);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.afterUpdate(delta, time);\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    afterUpdate (delta: number, time: number): void\r\n    {\r\n        //  Empty for parent classes to use.\r\n        //  Called after this GameObject and all of its children have been updated.\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    renderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    renderCanvas <T extends ICanvasRenderer> (renderer: T): void\r\n    {\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    postRenderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        //  Called after this GameObject and all of its children have been rendered.\r\n        //  If it doesn't have any children, this method is never called.\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    postRenderCanvas <T extends ICanvasRenderer> (renderer: T): void\r\n    {\r\n        //  Called after this GameObject and all of its children have been rendered.\r\n        //  If it doesn't have any children, this method is never called.\r\n    }\r\n\r\n    set visible (value: boolean)\r\n    {\r\n        PermissionsComponent.visible[this.id] = Number(value);\r\n\r\n        SetDirtyParents(this.id);\r\n    }\r\n\r\n    get visible (): boolean\r\n    {\r\n        return Boolean(PermissionsComponent.visible[this.id]);\r\n    }\r\n\r\n    set visibleChildren (value: boolean)\r\n    {\r\n        PermissionsComponent.visibleChildren[this.id] = Number(value);\r\n\r\n        SetDirtyParents(this.id);\r\n    }\r\n\r\n    get visibleChildren (): boolean\r\n    {\r\n        return Boolean(PermissionsComponent.visibleChildren[this.id]);\r\n    }\r\n\r\n    set depth (value: number)\r\n    {\r\n        HierarchyComponent.depth[this.id] = value;\r\n    }\r\n\r\n    get depth (): number\r\n    {\r\n        return HierarchyComponent.depth[this.id];\r\n    }\r\n\r\n    hasParent (id?: number): boolean\r\n    {\r\n        if (id)\r\n        {\r\n            return (HierarchyComponent.parentID[this.id] === id);\r\n        }\r\n        else\r\n        {\r\n            return (HierarchyComponent.parentID[this.id] > 0);\r\n        }\r\n    }\r\n\r\n    getParent (): IGameObject | undefined\r\n    {\r\n        return GetParentGameObject(this.id);\r\n    }\r\n\r\n    getChildren (): IGameObject[]\r\n    {\r\n        return GetChildrenFromParentID(this.id);\r\n    }\r\n\r\n    getNumChildren (): number\r\n    {\r\n        return GetNumChildren(this.id);\r\n    }\r\n\r\n    toString (): string\r\n    {\r\n        return `${this.type} id=\"${this.id}\" name=\"${this.name}\"`;\r\n    }\r\n\r\n    destroy <P extends IGameObject> (reparentChildren?: P): void\r\n    {\r\n        if (reparentChildren)\r\n        {\r\n            ReparentChildren(this, reparentChildren);\r\n        }\r\n        else\r\n        {\r\n            DestroyChildren(this);\r\n        }\r\n\r\n        Emit(this, DestroyEvent, this);\r\n\r\n        this.events.clear();\r\n\r\n        this.events = null;\r\n\r\n        //  TODO - Destroy process, remove from Cache, Tree, etc.\r\n    }\r\n}\r\n", "import { AddColorComponent, ColorComponent, SetAlpha } from '../../components/color';\r\nimport { AddTransform2DComponent, Origin, Position, Scale, Size, Skew, Transform2DComponent } from '../../components/transform/';\r\nimport { GetDefaultOriginX, GetDefaultOriginY } from '../../config/defaultorigin';\r\n\r\nimport { AddBoundsComponent } from '../../components/bounds/AddBoundsComponent';\r\nimport { Color } from '../../components/color/Color';\r\nimport { Flush } from '../../renderer/webgl1/renderpass/Flush';\r\nimport { GameObject } from '../GameObject';\r\nimport { IContainer } from './IContainer';\r\nimport { IGameObject } from '../IGameObject';\r\nimport { IRenderPass } from '../../renderer/webgl1/renderpass/IRenderPass';\r\nimport { IShader } from '../../renderer/webgl1/shaders/IShader';\r\nimport { Rectangle } from '../../geom/rectangle/Rectangle';\r\n\r\nexport class Container extends GameObject implements IContainer\r\n{\r\n    readonly type: string = 'Container';\r\n\r\n    position: Position;\r\n    scale: Scale;\r\n    skew: Skew;\r\n    origin: Origin;\r\n    size: Size;\r\n    color: Color;\r\n\r\n    shader: IShader;\r\n\r\n    constructor (x: number = 0, y: number = 0)\r\n    {\r\n        super();\r\n\r\n        const id = this.id;\r\n\r\n        AddTransform2DComponent(id, x, y, GetDefaultOriginX(), GetDefaultOriginY());\r\n        AddColorComponent(id);\r\n        AddBoundsComponent(id);\r\n\r\n        this.position = new Position(id, x, y);\r\n        this.scale = new Scale(id);\r\n        this.skew = new Skew(id);\r\n        this.size = new Size(id);\r\n        this.origin = new Origin(id, GetDefaultOriginX(), GetDefaultOriginY());\r\n        this.color = new Color(id);\r\n    }\r\n\r\n    renderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        if (this.shader)\r\n        {\r\n            Flush(renderPass);\r\n\r\n            renderPass.shader.set(this.shader, 0);\r\n        }\r\n    }\r\n\r\n    postRenderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        if (this.shader)\r\n        {\r\n            Flush(renderPass);\r\n\r\n            renderPass.shader.pop();\r\n        }\r\n    }\r\n\r\n    getBounds (): Rectangle\r\n    {\r\n        // return this.bounds.get();\r\n        return new Rectangle();\r\n    }\r\n\r\n    set x (value: number)\r\n    {\r\n        this.position.x = value;\r\n    }\r\n\r\n    get x (): number\r\n    {\r\n        return this.position.x;\r\n    }\r\n\r\n    set y (value: number)\r\n    {\r\n        this.position.y = value;\r\n    }\r\n\r\n    get y (): number\r\n    {\r\n        return this.position.y;\r\n    }\r\n\r\n    set rotation (value: number)\r\n    {\r\n        Transform2DComponent.rotation[this.id] = value;\r\n    }\r\n\r\n    get rotation (): number\r\n    {\r\n        return Transform2DComponent.rotation[this.id];\r\n    }\r\n\r\n    get alpha (): number\r\n    {\r\n        return this.color.alpha;\r\n    }\r\n\r\n    set alpha (value: number)\r\n    {\r\n        this.color.alpha = value;\r\n    }\r\n\r\n    setAlpha (value: number): this\r\n    {\r\n        this.alpha = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    setPosition (x: number, y?: number): this\r\n    {\r\n        this.position.set(x, y);\r\n\r\n        return this;\r\n    }\r\n\r\n    setScale (x: number, y?: number): this\r\n    {\r\n        this.scale.set(x, y);\r\n\r\n        return this;\r\n    }\r\n\r\n    setRotation (value: number): this\r\n    {\r\n        this.rotation = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    setSkew (x: number, y?: number): this\r\n    {\r\n        this.skew.set(x, y);\r\n\r\n        return this;\r\n    }\r\n\r\n    setOrigin (x: number, y?: number): this\r\n    {\r\n        this.origin.set(x, y);\r\n\r\n        return this;\r\n    }\r\n\r\n    destroy (reparentChildren?: IGameObject): void\r\n    {\r\n        super.destroy(reparentChildren);\r\n    }\r\n}\r\n", "import { Frame } from '../../textures/Frame';\r\nimport { ISprite } from './ISprite';\r\nimport { Texture } from '../../textures';\r\n\r\nexport function SetFrame <T extends ISprite> (texture: Texture, key?: string | number | Frame, ...children: T[]): T[]\r\n{\r\n    const frame = texture.getFrame(key);\r\n\r\n    const pivot = frame.pivot;\r\n\r\n    children.forEach(child =>\r\n    {\r\n        if (!child || frame === child.frame)\r\n        {\r\n            return;\r\n        }\r\n\r\n        child.frame = frame;\r\n        child.hasTexture = true;\r\n\r\n        if (pivot)\r\n        {\r\n            child.origin.set(pivot.x, pivot.y);\r\n        }\r\n\r\n        frame.copyToExtent(child);\r\n\r\n        //  This rarely changes, so we'll set it here, rather than every game step:\r\n        frame.copyToVertices(child.id);\r\n    });\r\n\r\n    return children;\r\n}\r\n", "import { TextureManager } from './TextureManager';\r\n\r\nlet instance: TextureManager;\r\n\r\nexport const TextureManagerInstance =\r\n{\r\n    get: (): TextureManager =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (manager: TextureManager | null): void =>\r\n    {\r\n        instance = manager;\r\n    }\r\n};\r\n", "import { Texture } from './Texture';\r\nimport { TextureManagerInstance } from './TextureManagerInstance';\r\n\r\nexport function GetTexture (key: string): Texture\r\n{\r\n    return TextureManagerInstance.get().get(key);\r\n}\r\n", "import { Frame } from '../../textures/Frame';\r\nimport { GetTexture } from '../../textures/GetTexture';\r\nimport { IFrame } from '../../textures/IFrame';\r\nimport { ISprite } from './ISprite';\r\nimport { ITexture } from '../../textures/ITexture';\r\nimport { SetFrame } from './SetFrame';\r\nimport { Texture } from '../../textures/Texture';\r\n\r\nexport function SetTexture <T extends ISprite> (key: string | ITexture | IFrame, frame: string | number | IFrame, ...children: T[]): T[]\r\n{\r\n    if (!key)\r\n    {\r\n        //  Remove texture from all children\r\n        children.forEach(child =>\r\n        {\r\n            child.texture = null;\r\n            child.frame = null;\r\n            child.hasTexture = false;\r\n        });\r\n    }\r\n    else\r\n    {\r\n        let texture: Texture;\r\n\r\n        if (key instanceof Frame)\r\n        {\r\n            frame = key;\r\n            texture = key.texture;\r\n        }\r\n        else if (key instanceof Texture)\r\n        {\r\n            texture = key;\r\n        }\r\n        else\r\n        {\r\n            texture = GetTexture(key as string);\r\n        }\r\n\r\n        if (!texture)\r\n        {\r\n            console.warn(`Invalid Texture key: ${key as string}`);\r\n        }\r\n        else\r\n        {\r\n            children.forEach(child =>\r\n            {\r\n                child.texture = texture;\r\n            });\r\n\r\n            SetFrame(texture, frame, ...children);\r\n        }\r\n    }\r\n\r\n    return children;\r\n}\r\n", "import { ColorComponent, SetTint } from '../../components/color';\r\n\r\nimport { AddQuadVertex } from '../../components/vertices';\r\nimport { BatchTexturedQuad } from '../../renderer/webgl1/draw/BatchTexturedQuad';\r\nimport { BatchTexturedQuadBuffer } from '../../renderer/webgl1/draw';\r\nimport { Container } from '../container/Container';\r\nimport { Frame } from '../../textures/Frame';\r\nimport { ICanvasRenderer } from '../../renderer/canvas/ICanvasRenderer';\r\nimport { IFrame } from '../../textures/IFrame';\r\nimport { IGameObject } from '../IGameObject';\r\nimport { IRenderPass } from '../../renderer/webgl1/renderpass/IRenderPass';\r\nimport { ISprite } from './ISprite';\r\nimport { ITexture } from '../../textures/ITexture';\r\nimport { PreRenderVertices } from '../../components/transform/PreRenderVertices';\r\nimport { SetFrame } from './SetFrame';\r\nimport { SetTexture } from './SetTexture';\r\nimport { Texture } from '../../textures/Texture';\r\nimport { WillRender } from '../../components/permissions';\r\n\r\nexport class Sprite extends Container implements ISprite\r\n{\r\n    readonly type: string = 'Sprite';\r\n\r\n    texture: Texture;\r\n    frame: Frame;\r\n    hasTexture: boolean = false;\r\n\r\n    constructor (x: number, y: number, texture: string | Texture | Frame, frame?: string | number | Frame)\r\n    {\r\n        super(x, y);\r\n\r\n        AddQuadVertex(this.id);\r\n\r\n        this.setTexture(texture, frame);\r\n    }\r\n\r\n    setTexture (key: string | ITexture | IFrame, frame?: string | number | IFrame): this\r\n    {\r\n        SetTexture(key, frame, this);\r\n\r\n        return this;\r\n    }\r\n\r\n    setFrame (key?: string | number | IFrame): this\r\n    {\r\n        SetFrame(this.texture, key, this);\r\n\r\n        return this;\r\n    }\r\n\r\n    isRenderable (): boolean\r\n    {\r\n        return (this.visible && this.hasTexture && WillRender(this.id) && this.alpha > 0);\r\n    }\r\n\r\n    renderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        BatchTexturedQuadBuffer(this.texture, this.id, renderPass);\r\n    }\r\n\r\n    renderCanvas <T extends ICanvasRenderer> (renderer: T): void\r\n    {\r\n        PreRenderVertices(this);\r\n\r\n        // DrawImage(this.frame, this.alpha, this.worldTransform, this.transformExtent, renderer);\r\n    }\r\n\r\n    get tint (): number\r\n    {\r\n        return ColorComponent.tint[this.id];\r\n    }\r\n\r\n    set tint (value: number)\r\n    {\r\n        SetTint(this.id, value);\r\n    }\r\n\r\n    destroy (reparentChildren?: IGameObject): void\r\n    {\r\n        super.destroy(reparentChildren);\r\n\r\n        this.texture = null;\r\n        this.frame = null;\r\n        this.hasTexture = false;\r\n    }\r\n}\r\n", "export function CreateCanvas (width: number, height: number): CanvasRenderingContext2D\r\n{\r\n    const canvas = document.createElement('canvas');\r\n\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    return canvas.getContext('2d');\r\n}\r\n", "import { GameObjectTree } from '../../gameobjects';\r\n\r\n//  Returns ALL children IDs based on the given Parent, to any depth\r\n\r\nexport function DepthFirstSearchFromParentID (parentID: number): number[]\r\n{\r\n    const stack: number[] = [ parentID ];\r\n    const output: number[] = [];\r\n\r\n    while (stack.length > 0)\r\n    {\r\n        const node = stack.shift();\r\n\r\n        output.push(node);\r\n\r\n        const nodeChildren = GameObjectTree.get(node);\r\n\r\n        const numChildren = nodeChildren.length;\r\n\r\n        if (numChildren > 0)\r\n        {\r\n            for (let i = numChildren - 1; i >= 0; i--)\r\n            {\r\n                stack.unshift(nodeChildren[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    //  Remove the parent from the results\r\n    output.shift();\r\n\r\n    return output;\r\n}\r\n", "import { GameObjectCache } from '../../gameobjects/GameObjectCache';\r\nimport { GameObjectTree } from '../../gameobjects/GameObjectTree';\r\nimport { IGameObject } from '../../gameobjects/IGameObject';\r\n\r\nexport function GetChildrenFromParentID (id: number): IGameObject[]\r\n{\r\n    const out: IGameObject[] = [];\r\n\r\n    GameObjectTree.get(id).forEach(childID =>\r\n    {\r\n        out.push(GameObjectCache.get(childID));\r\n    });\r\n\r\n    return out;\r\n}\r\n", "import { HierarchyComponent } from './HierarchyComponent';\r\n\r\nexport function GetNumChildren (id: number): number\r\n{\r\n    return HierarchyComponent.numChildren[id];\r\n}\r\n", "import { GameObjectCache } from '../../gameobjects/GameObjectCache';\r\nimport { HierarchyComponent } from './HierarchyComponent';\r\nimport { IGameObject } from '../../gameobjects/IGameObject';\r\n\r\nexport function GetParentGameObject (id: number): IGameObject\r\n{\r\n    return GameObjectCache.get(HierarchyComponent.parentID[id]);\r\n}\r\n", "import { HierarchyComponent } from './HierarchyComponent';\r\n\r\nexport function GetWorldID (id: number): number\r\n{\r\n    return HierarchyComponent.worldID[id];\r\n}\r\n", "import { GameObjectCache } from '../../gameobjects/GameObjectCache';\r\nimport { GetWorldID } from './GetWorldID';\r\nimport { IBaseWorld } from '../../world/IBaseWorld';\r\n\r\nexport function GetWorldFromParentID (parentID: number): IBaseWorld | undefined\r\n{\r\n    const worldID = GetWorldID(parentID);\r\n\r\n    return GameObjectCache.get(worldID) as IBaseWorld;\r\n}\r\n", "import { GameObjectTree } from '../../gameobjects/GameObjectTree';\r\nimport { HierarchyComponent } from './HierarchyComponent';\r\n\r\nexport function UpdateNumChildren (id: number): void\r\n{\r\n    HierarchyComponent.numChildren[id] = GameObjectTree.get(id).length;\r\n}\r\n", "import { HierarchyComponent } from './HierarchyComponent';\r\nimport { UpdateNumChildren } from './UpdateNumChildren';\r\n\r\nexport function SetParentID (childID: number, parentID: number): void\r\n{\r\n    HierarchyComponent.parentID[childID] = parentID;\r\n\r\n    UpdateNumChildren(parentID);\r\n}\r\n", "import { HierarchyComponent } from './HierarchyComponent';\r\n\r\nexport function SetWorldID (id: number, worldID: number): void\r\n{\r\n    HierarchyComponent.worldID[id] = worldID;\r\n}\r\n", "import { GetParentID, GetWorldID } from '../hierarchy';\r\n\r\nimport { SetDirtyChildCache } from './SetDirtyChildCache';\r\nimport { SetDirtyDisplayList } from '.';\r\nimport { WillCacheChildren } from '../permissions';\r\n\r\nexport function SetDirtyParents (childID: number): void\r\n{\r\n    let currentParent = GetParentID(childID);\r\n\r\n    while (currentParent)\r\n    {\r\n        if (WillCacheChildren(currentParent))\r\n        {\r\n            SetDirtyChildCache(currentParent);\r\n        }\r\n\r\n        currentParent = GetParentID(currentParent);\r\n    }\r\n\r\n    SetDirtyDisplayList(GetWorldID(childID));\r\n}\r\n", "import { DirtyComponent } from './DirtyComponent';\r\n\r\nexport function SetDirtyTransform (id: number): void\r\n{\r\n    DirtyComponent.transform[id] = 1;\r\n}\r\n", "import { DirtyComponent } from './DirtyComponent';\r\nimport { HierarchyComponent } from '../hierarchy/HierarchyComponent';\r\n\r\nexport function SetDirtyWorldDisplayList (id: number): void\r\n{\r\n    const worldID = HierarchyComponent.worldID[id];\r\n\r\n    DirtyComponent.displayList[worldID] = 1;\r\n}\r\n", "import { Extent2DComponent } from './Extent2DComponent';\r\nimport { SetDirtyTransform } from '../dirty';\r\n\r\n//  The area covered by this transform component + origin + size (usually from a Frame)\r\n\r\nexport function SetExtent (id: number, x: number, y: number, width: number, height: number): void\r\n{\r\n    Extent2DComponent.x[id] = x;\r\n    Extent2DComponent.y[id] = y;\r\n    Extent2DComponent.width[id] = width;\r\n    Extent2DComponent.height[id] = height;\r\n    Extent2DComponent.right[id] = x + width;\r\n    Extent2DComponent.bottom[id] = y + height;\r\n\r\n    SetDirtyTransform(id);\r\n}\r\n", "import { IContainer } from '../gameobjects/container/IContainer';\r\nimport { IFrame } from './IFrame';\r\nimport { SetExtent } from '../components/transform/SetExtent';\r\nimport { SetUV } from '../components/vertices/SetUV';\r\nimport { Texture } from './Texture';\r\n\r\nexport class Frame implements IFrame\r\n{\r\n    texture: Texture;\r\n    key: string | number;\r\n\r\n    //  This is the actual area of the texture to draw to canvas / webgl, including any extruded data.\r\n    //  This is the same as the 'trimmed' + 'extruded' area from an atlas.\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n\r\n    trimmed: boolean = false;\r\n\r\n    //  Original size of the image before being trimmed or added to an atlas (which can add extrude data to it).\r\n    sourceSizeWidth: number;\r\n    sourceSizeHeight: number;\r\n\r\n    //  The size of the image having been trimmed, before being added to the atlas (i.e. doesn't have any extrusion values in it)\r\n    spriteSourceSizeX: number;\r\n    spriteSourceSizeY: number;\r\n    spriteSourceSizeWidth: number;\r\n    spriteSourceSizeHeight: number;\r\n\r\n    pivot: { x: number; y: number };\r\n\r\n    u0: number;\r\n    v0: number;\r\n    u1: number;\r\n    v1: number;\r\n\r\n    constructor (texture: Texture, key: string | number, x: number, y: number, width: number, height: number)\r\n    {\r\n        this.texture = texture;\r\n        this.key = key;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n\r\n        this.updateUVs();\r\n    }\r\n\r\n    setPivot (x: number, y: number): void\r\n    {\r\n        this.pivot = { x, y };\r\n    }\r\n\r\n    setSize (width: number, height: number): void\r\n    {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n\r\n        this.updateUVs();\r\n    }\r\n\r\n    setSourceSize (width: number, height: number): void\r\n    {\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n    }\r\n\r\n    setTrim (width: number, height: number, x: number, y: number, w: number, h: number): void\r\n    {\r\n        this.trimmed = true;\r\n\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n\r\n        this.spriteSourceSizeX = x;\r\n        this.spriteSourceSizeY = y;\r\n        this.spriteSourceSizeWidth = w;\r\n        this.spriteSourceSizeHeight = h;\r\n    }\r\n\r\n    getExtent (originX: number, originY: number): { left: number; right: number; top: number; bottom: number }\r\n    {\r\n        const sourceSizeWidth = this.sourceSizeWidth;\r\n        const sourceSizeHeight = this.sourceSizeHeight;\r\n\r\n        let left: number;\r\n        let right: number;\r\n        let top: number;\r\n        let bottom: number;\r\n\r\n        if (this.trimmed)\r\n        {\r\n            left = this.spriteSourceSizeX - (originX * sourceSizeWidth);\r\n            right = left + this.spriteSourceSizeWidth;\r\n\r\n            top = this.spriteSourceSizeY - (originY * sourceSizeHeight);\r\n            bottom = top + this.spriteSourceSizeHeight;\r\n        }\r\n        else\r\n        {\r\n            left = -originX * sourceSizeWidth;\r\n            right = left + sourceSizeWidth;\r\n\r\n            top = -originY * sourceSizeHeight;\r\n            bottom = top + sourceSizeHeight;\r\n        }\r\n\r\n        return { left, right, top, bottom };\r\n    }\r\n\r\n    copyToExtent (child: IContainer): this\r\n    {\r\n        const originX = child.origin.x;\r\n        const originY = child.origin.y;\r\n\r\n        const sourceSizeWidth = this.sourceSizeWidth;\r\n        const sourceSizeHeight = this.sourceSizeHeight;\r\n\r\n        let x: number;\r\n        let y: number;\r\n        let width: number;\r\n        let height: number;\r\n\r\n        if (this.trimmed)\r\n        {\r\n            x = this.spriteSourceSizeX - (originX * sourceSizeWidth);\r\n            y = this.spriteSourceSizeY - (originY * sourceSizeHeight);\r\n\r\n            width = this.spriteSourceSizeWidth;\r\n            height = this.spriteSourceSizeHeight;\r\n        }\r\n        else\r\n        {\r\n            x = -originX * sourceSizeWidth;\r\n            y = -originY * sourceSizeHeight;\r\n\r\n            width = sourceSizeWidth;\r\n            height = sourceSizeHeight;\r\n        }\r\n\r\n        SetExtent(child.id, x, y, width, height);\r\n\r\n        return this;\r\n    }\r\n\r\n    copyToVertices (id: number): this\r\n    {\r\n        SetUV(id, this.u0, this.v0, this.u1, this.v1);\r\n\r\n        return this;\r\n    }\r\n\r\n    updateUVs (): void\r\n    {\r\n        const { x, y, width, height } = this;\r\n\r\n        const baseTextureWidth = this.texture.width;\r\n        const baseTextureHeight = this.texture.height;\r\n\r\n        this.u0 = x / baseTextureWidth;\r\n        this.v0 = y / baseTextureHeight;\r\n\r\n        this.u1 = (x + width) / baseTextureWidth;\r\n        this.v1 = (y + height) / baseTextureHeight;\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.texture = null;\r\n    }\r\n}\r\n", "import { BindingQueue } from '../renderer/BindingQueue';\r\nimport { Frame } from './Frame';\r\nimport { IGLTextureBinding } from '../renderer/webgl1/textures/IGLTextureBinding';\r\nimport { IGLTextureBindingConfig } from '../renderer/webgl1/textures/IGLTextureBindingConfig';\r\nimport { ITexture } from './ITexture';\r\n\r\nexport class Texture implements ITexture\r\n{\r\n    //  Unique identifier of this Texture, if stored in the Texture Manager\r\n    key: string = '';\r\n\r\n    width: number;\r\n    height: number;\r\n\r\n    image: TexImageSource;\r\n\r\n    binding: IGLTextureBinding;\r\n\r\n    firstFrame: Frame;\r\n\r\n    frames: Map<string | number, Frame>;\r\n\r\n    data: unknown;\r\n\r\n    constructor (image?: TexImageSource, width?: number, height?: number, glConfig?: IGLTextureBindingConfig)\r\n    {\r\n        if (image)\r\n        {\r\n            width = image.width;\r\n            height = image.height;\r\n        }\r\n\r\n        this.image = image;\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.frames = new Map();\r\n\r\n        this.data = {};\r\n\r\n        this.addFrame('__BASE', 0, 0, width, height);\r\n\r\n        BindingQueue.add(this, glConfig);\r\n    }\r\n\r\n    addFrame (key: string | number, x: number, y: number, width: number, height: number): Frame\r\n    {\r\n        if (this.frames.has(key))\r\n        {\r\n            return null;\r\n        }\r\n\r\n        const frame = new Frame(this, key, x, y, width, height);\r\n\r\n        this.frames.set(key, frame);\r\n\r\n        if (!this.firstFrame || this.firstFrame.key === '__BASE')\r\n        {\r\n            this.firstFrame = frame;\r\n        }\r\n\r\n        return frame;\r\n    }\r\n\r\n    getFrame (key?: string | number | Frame): Frame\r\n    {\r\n        //  null, undefined, empty string, zero\r\n        if (!key)\r\n        {\r\n            return this.firstFrame;\r\n        }\r\n\r\n        if (key instanceof Frame)\r\n        {\r\n            key = key.key;\r\n        }\r\n\r\n        let frame: Frame = this.frames.get(key);\r\n\r\n        if (!frame)\r\n        {\r\n            console.warn(`Frame missing: ${key}`);\r\n\r\n            frame = this.firstFrame;\r\n        }\r\n\r\n        return frame;\r\n    }\r\n\r\n    setSize (width: number, height: number): void\r\n    {\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        const frame = this.frames.get('__BASE');\r\n\r\n        frame.setSize(width, height);\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        if (this.binding)\r\n        {\r\n            this.binding.destroy();\r\n        }\r\n\r\n        this.frames.clear();\r\n\r\n        this.binding = null;\r\n        this.data = null;\r\n        this.image = null;\r\n        this.firstFrame = null;\r\n    }\r\n}\r\n", "import { GetHeight, GetResolution, GetWidth } from '../../../config/size/';\r\n\r\nimport { CreateAttributes } from './CreateAttributes';\r\nimport { CreateDepthBuffer } from '../fbo/CreateDepthBuffer';\r\nimport { CreateFramebuffer } from '../fbo/CreateFramebuffer';\r\nimport { CreateProgram } from './CreateProgram';\r\nimport { CreateShader } from './CreateShader';\r\nimport { CreateUniforms } from './CreateUniforms';\r\nimport { DefaultQuadAttributes } from './DefaultQuadAttributes';\r\nimport { DefaultQuadUniforms } from './DefaultQuadUniforms';\r\nimport { DeleteFramebuffer } from '../fbo/DeleteFramebuffer';\r\nimport { DeleteGLTexture } from '../textures/DeleteGLTexture';\r\nimport { DeleteShaders } from './DeleteShaders';\r\nimport { GLTextureBinding } from '../textures/GLTextureBinding';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { IShader } from './IShader';\r\nimport { IShaderConfig } from './IShaderConfig';\r\nimport { IVertexAttribPointer } from './IVertexAttribPointer';\r\nimport { SINGLE_QUAD_FRAG } from '../glsl/SINGLE_QUAD_FRAG';\r\nimport { SINGLE_QUAD_VERT } from '../glsl/SINGLE_QUAD_VERT';\r\nimport { Texture } from '../../../textures/Texture';\r\nimport { gl } from '../GL';\r\n\r\nexport class Shader implements IShader\r\n{\r\n    program: WebGLProgram;\r\n\r\n    attributes: Map<string, IVertexAttribPointer>;\r\n\r\n    uniforms: Map<string, unknown>;\r\n\r\n    uniformSetters: Map<string, Function>;\r\n\r\n    texture: Texture;\r\n\r\n    framebuffer: WebGLFramebuffer;\r\n\r\n    renderToFramebuffer: boolean = false;\r\n\r\n    renderToDepthbuffer: boolean = false;\r\n\r\n    isActive: boolean = false;\r\n\r\n    constructor (config?: IShaderConfig)\r\n    {\r\n        if (config)\r\n        {\r\n            this.fromConfig(config);\r\n        }\r\n    }\r\n\r\n    fromConfig (config: IShaderConfig): void\r\n    {\r\n        const {\r\n            attributes = DefaultQuadAttributes,\r\n            fragmentShader = SINGLE_QUAD_FRAG,\r\n            height = GetHeight(),\r\n            renderToFramebuffer = false,\r\n            renderToDepthbuffer = false,\r\n            resolution = GetResolution(),\r\n            vertexShader = SINGLE_QUAD_VERT,\r\n            width = GetWidth(),\r\n            uniforms = DefaultQuadUniforms\r\n        } = config;\r\n\r\n        this.create(fragmentShader, vertexShader, uniforms, attributes);\r\n\r\n        if (renderToFramebuffer)\r\n        {\r\n            this.renderToFramebuffer = true;\r\n\r\n            const texture = new Texture(null, width * resolution, height * resolution);\r\n            const binding = new GLTextureBinding(texture);\r\n\r\n            binding.framebuffer = CreateFramebuffer(binding.texture);\r\n\r\n            if (renderToDepthbuffer)\r\n            {\r\n                this.renderToDepthbuffer = true;\r\n\r\n                binding.depthbuffer = CreateDepthBuffer(binding.framebuffer, texture.width, texture.height);\r\n            }\r\n\r\n            this.texture = texture;\r\n            this.framebuffer = binding.framebuffer;\r\n        }\r\n    }\r\n\r\n    create (fragmentShaderSource: string, vertexShaderSource: string, uniforms: {}, attribs: {}): void\r\n    {\r\n        const fragmentShader = CreateShader(fragmentShaderSource, gl.FRAGMENT_SHADER);\r\n        const vertexShader = CreateShader(vertexShaderSource, gl.VERTEX_SHADER);\r\n\r\n        if (!fragmentShader || !vertexShader)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const program = CreateProgram(fragmentShader, vertexShader);\r\n\r\n        if (!program)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);\r\n\r\n        gl.useProgram(program);\r\n\r\n        this.program = program;\r\n\r\n        this.uniformSetters = CreateUniforms(program);\r\n\r\n        this.uniforms = new Map();\r\n\r\n        //  Copy starting values from the config object to the uniforms map\r\n        for (const [ key, value ] of Object.entries(uniforms))\r\n        {\r\n            this.uniforms.set(key, value);\r\n        }\r\n\r\n        this.attributes = CreateAttributes(program, attribs);\r\n\r\n        gl.useProgram(currentProgram);\r\n\r\n        this.isActive = false;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    updateUniforms (renderPass: IRenderPass): void\r\n    {\r\n        //  Use this to set any extra uniform values prior to the bind\r\n    }\r\n\r\n    bind (renderPass: IRenderPass): boolean\r\n    {\r\n        const uniforms = this.uniforms;\r\n\r\n        uniforms.set('uProjectionMatrix', renderPass.projectionMatrix.data);\r\n        uniforms.set('uCameraMatrix', renderPass.cameraMatrix.data);\r\n\r\n        this.updateUniforms(renderPass);\r\n\r\n        return this.setUniforms(renderPass);\r\n    }\r\n\r\n    setUniform (key: string, value: unknown): void\r\n    {\r\n        const uniforms = this.uniforms;\r\n\r\n        if (uniforms.has(key))\r\n        {\r\n            uniforms.set(key, value);\r\n\r\n            const setter = this.uniformSetters.get(key);\r\n\r\n            setter(value);\r\n        }\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    setUniforms (renderPass: IRenderPass): boolean\r\n    {\r\n        if (!this.program)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        gl.useProgram(this.program);\r\n\r\n        this.isActive = true;\r\n\r\n        const uniforms = this.uniforms;\r\n\r\n        for (const [ name, setter ] of this.uniformSetters.entries())\r\n        {\r\n            setter(uniforms.get(name));\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    //  stride = vertexByteSize\r\n    setAttributes (renderPass: IRenderPass): void\r\n    {\r\n        if (this.program)\r\n        {\r\n            const stride = renderPass.vertexbuffer.current.vertexByteSize;\r\n\r\n            this.attributes.forEach(attrib =>\r\n            {\r\n                gl.vertexAttribPointer(attrib.index, attrib.size, attrib.type, attrib.normalized, stride, attrib.offset);\r\n            });\r\n        }\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        DeleteShaders(this.program);\r\n        DeleteGLTexture(this.texture);\r\n        DeleteFramebuffer(this.framebuffer);\r\n\r\n        this.uniforms.clear();\r\n        this.uniformSetters.clear();\r\n        this.attributes.clear();\r\n\r\n        this.program = null;\r\n        this.texture = null;\r\n        this.framebuffer = null;\r\n    }\r\n}\r\n", "import { DefaultQuadAttributes } from './DefaultQuadAttributes';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { IShader } from './IShader';\r\nimport { IShaderConfig } from './IShaderConfig';\r\nimport { Shader } from './Shader';\r\n\r\n//  Do we even need this class? As Shader defaults to this anyway :)\r\n\r\nexport class QuadShader extends Shader implements IShader\r\n{\r\n    constructor (config: IShaderConfig = {})\r\n    {\r\n        config.attributes = config?.attributes || DefaultQuadAttributes;\r\n\r\n        super(config);\r\n    }\r\n\r\n    /*\r\n    bind (renderPass: IRenderPass): boolean\r\n    {\r\n        const uniforms = this.uniforms;\r\n\r\n        uniforms.set('uProjectionMatrix', renderPass.projectionMatrix.data);\r\n        uniforms.set('uCameraMatrix', renderPass.cameraMatrix.data);\r\n\r\n        return super.bind(renderPass);\r\n    }\r\n    */\r\n}\r\n", "export const MULTI_QUAD_FRAG =\r\n`#define SHADER_NAME MULTI_QUAD_FRAG\r\n#define numTextures %count%\r\n\r\nprecision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture[%count%];\r\n\r\nvec4 getSampler (int index, vec2 uv)\r\n{\r\n    for (int i = 0; i < numTextures; ++i)\r\n    {\r\n        vec4 color = texture2D(uTexture[i], uv);\r\n\r\n        if (i == index)\r\n        {\r\n            return color;\r\n        }\r\n    }\r\n\r\n    //  Return black\r\n    return vec4(0);\r\n}\r\n\r\nvoid main (void)\r\n{\r\n    vec4 color = getSampler(int(vTextureId), vTextureCoord);\r\n\r\n    gl_FragColor = color * vec4(vTintColor.rgb * vTintColor.a, vTintColor.a);\r\n}`;\r\n", "import { GetMaxTextures } from '../../../config/maxtextures/GetMaxTextures';\r\nimport { IRenderPass } from '../renderpass/IRenderPass';\r\nimport { IShaderConfig } from './IShaderConfig';\r\nimport { MULTI_QUAD_FRAG } from '../glsl/MULTI_QUAD_FRAG';\r\nimport { QuadShader } from './QuadShader';\r\n\r\nexport class MultiTextureQuadShader extends QuadShader\r\n{\r\n    constructor (config: IShaderConfig = {})\r\n    {\r\n        config.fragmentShader = config?.fragmentShader || MULTI_QUAD_FRAG;\r\n\r\n        super(config);\r\n    }\r\n\r\n    create (fragmentShaderSource: string, vertexShaderSource: string, uniforms: {}, attribs: {}): void\r\n    {\r\n        const maxTextures = GetMaxTextures();\r\n\r\n        fragmentShaderSource = fragmentShaderSource.replace(/%count%/gi, `${maxTextures}`);\r\n\r\n        super.create(fragmentShaderSource, vertexShaderSource, uniforms, attribs);\r\n    }\r\n\r\n    bind (renderPass: IRenderPass): boolean\r\n    {\r\n        this.uniforms.set('uTexture', renderPass.textures.textureIndex);\r\n\r\n        return super.bind(renderPass);\r\n    }\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { IShader } from '../shaders/IShader';\r\n\r\nexport type ShaderStackEntry = {\r\n    shader: IShader;\r\n    textureID?: number;\r\n};\r\n\r\nexport class ShaderStack\r\n{\r\n    renderPass: IRenderPass;\r\n\r\n    stack: ShaderStackEntry[];\r\n    active: IShader;\r\n    default: ShaderStackEntry;\r\n    index: number;\r\n\r\n    constructor (renderPass: IRenderPass)\r\n    {\r\n        this.renderPass = renderPass;\r\n        this.stack = [];\r\n    }\r\n\r\n    get current (): ShaderStackEntry\r\n    {\r\n        return this.stack[this.index];\r\n    }\r\n\r\n    add (shader: IShader, textureID?: number): ShaderStackEntry\r\n    {\r\n        const entry = { shader, textureID };\r\n\r\n        this.index++;\r\n\r\n        //  cursor already at the end of the stack, so we need to grow it\r\n        if (this.index === this.stack.length)\r\n        {\r\n            this.stack.push(entry);\r\n        }\r\n        else\r\n        {\r\n            this.stack[this.index] = entry;\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    bindDefault (): void\r\n    {\r\n        this.index = 0;\r\n\r\n        this.bind(this.default);\r\n    }\r\n\r\n    bind (entry?: ShaderStackEntry): void\r\n    {\r\n        if (!entry)\r\n        {\r\n            entry = this.current;\r\n        }\r\n\r\n        if (!entry.shader.isActive)\r\n        {\r\n            const success = entry.shader.bind(this.renderPass, entry.textureID);\r\n\r\n            if (success)\r\n            {\r\n                entry.shader.setAttributes(this.renderPass);\r\n\r\n                if (this.active && this.active !== entry.shader)\r\n                {\r\n                    this.active.isActive = false;\r\n                }\r\n\r\n                this.active = entry.shader;\r\n            }\r\n        }\r\n    }\r\n\r\n    pop (): void\r\n    {\r\n        this.index--;\r\n\r\n        this.bind();\r\n    }\r\n\r\n    set (shader: IShader, textureID?: number): void\r\n    {\r\n        const entry = this.add(shader, textureID);\r\n\r\n        this.bind(entry);\r\n    }\r\n\r\n    setDefault (shader: IShader, textureID?: number): void\r\n    {\r\n        const entry = { shader, textureID };\r\n\r\n        //  The default entry always goes into index zero\r\n        this.stack[0] = entry;\r\n\r\n        this.index = 0;\r\n\r\n        this.default = entry;\r\n    }\r\n}\r\n", "import { GameInstance } from '../GameInstance';\r\nimport { IRenderer } from '../renderer/IRenderer';\r\nimport { IStaticCamera } from './IStaticCamera';\r\nimport { IStaticWorld } from '../world/IStaticWorld';\r\nimport { Mat4Identity } from '../math/mat4';\r\nimport { Matrix2D } from '../math/mat2d/Matrix2D';\r\nimport { Matrix4 } from '../math/mat4/Matrix4';\r\nimport { Rectangle } from '../geom/rectangle/Rectangle';\r\n\r\nexport class StaticCamera implements IStaticCamera\r\n{\r\n    world: IStaticWorld;\r\n    matrix: Matrix4;\r\n    renderer: IRenderer;\r\n    type: string;\r\n\r\n    width: number;\r\n    height: number;\r\n    bounds: Rectangle;\r\n\r\n    dirtyRender: boolean;\r\n    worldTransform: Matrix2D;\r\n\r\n    constructor ()\r\n    {\r\n        this.dirtyRender = true;\r\n\r\n        const game = GameInstance.get();\r\n\r\n        this.renderer = game.renderer;\r\n\r\n        this.matrix = Mat4Identity();\r\n\r\n        this.bounds = new Rectangle();\r\n\r\n        this.worldTransform = new Matrix2D();\r\n\r\n        this.reset();\r\n    }\r\n\r\n    reset (): void\r\n    {\r\n        const renderer = this.renderer;\r\n\r\n        if (renderer)\r\n        {\r\n            const width = renderer.width;\r\n            const height = renderer.height;\r\n\r\n            this.width = width;\r\n            this.height = height;\r\n        }\r\n\r\n        this.bounds.set(0, 0, this.width, this.height);\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        this.world = null;\r\n        this.worldTransform = null;\r\n        this.renderer = null;\r\n        this.matrix = null;\r\n        this.bounds = null;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * A 16 color palette by [Arne](http://androidarts.com/palette/16pal.htm)\r\n */\r\nexport const Arne16 = [\r\n    '#000',\r\n    '#9D9D9D',\r\n    '#FFF',\r\n    '#BE2633',\r\n    '#E06F8B',\r\n    '#493C2B',\r\n    '#A46422',\r\n    '#EB8931',\r\n    '#F7E26B',\r\n    '#2F484E',\r\n    '#44891A',\r\n    '#A3CE27',\r\n    '#1B2632',\r\n    '#005784',\r\n    '#31A2F2',\r\n    '#B2DCEF'\r\n];\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * A 16 color palette inspired by the Commodore 64.\r\n */\r\nexport const C64 = [\r\n    '#000',\r\n    '#fff',\r\n    '#8b4131',\r\n    '#7bbdc5',\r\n    '#8b41ac',\r\n    '#6aac41',\r\n    '#3931a4',\r\n    '#d5de73',\r\n    '#945a20',\r\n    '#5a4100',\r\n    '#bd736a',\r\n    '#525252',\r\n    '#838383',\r\n    '#acee8b',\r\n    '#7b73de',\r\n    '#acacac'\r\n];\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * A 16 color CGA inspired palette by [Arne](http://androidarts.com/palette/16pal.htm)\r\n */\r\nexport const CGA = [\r\n    '#000',\r\n    '#2234d1',\r\n    '#0c7e45',\r\n    '#44aacc',\r\n    '#8a3622',\r\n    '#5c2e78',\r\n    '#aa5c3d',\r\n    '#b5b5b5',\r\n    '#5e606e',\r\n    '#4c81fb',\r\n    '#6cd947',\r\n    '#7be2f9',\r\n    '#eb8a60',\r\n    '#e23d69',\r\n    '#ffd93f',\r\n    '#fff'\r\n];\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * A 16 color JMP palette by [Arne](http://androidarts.com/palette/16pal.htm)\r\n */\r\nexport const JMP = [\r\n    '#000',\r\n    '#191028',\r\n    '#46af45',\r\n    '#a1d685',\r\n    '#453e78',\r\n    '#7664fe',\r\n    '#833129',\r\n    '#9ec2e8',\r\n    '#dc534b',\r\n    '#e18d79',\r\n    '#d6b97b',\r\n    '#e9d8a1',\r\n    '#216c4b',\r\n    '#d365c8',\r\n    '#afaab9',\r\n    '#f5f4eb'\r\n];\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * A 16 color palette inspired by Japanese computers like the MSX.\r\n */\r\nexport const MSX = [\r\n    '#000',\r\n    '#191028',\r\n    '#46af45',\r\n    '#a1d685',\r\n    '#453e78',\r\n    '#7664fe',\r\n    '#833129',\r\n    '#9ec2e8',\r\n    '#dc534b',\r\n    '#e18d79',\r\n    '#d6b97b',\r\n    '#e9d8a1',\r\n    '#216c4b',\r\n    '#d365c8',\r\n    '#afaab9',\r\n    '#fff'\r\n];\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * A 16 color palette as used in Pico8. */\r\nexport const PICO8 = [\r\n    '#000',\r\n    '#1D2B53',\r\n    '#7E2553',\r\n    '#008751',\r\n    '#AB5236',\r\n    '#5F574F',\r\n    '#C2C3C7',\r\n    '#FFF1E8',\r\n    '#FF004D',\r\n    '#FFA300',\r\n    '#FFEC27',\r\n    '#00E436',\r\n    '#29ADFF',\r\n    '#83769C',\r\n    '#FF77A8',\r\n    '#FFCCAA'\r\n];\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Arne16 } from './Arne16';\r\nimport { C64 } from './C64';\r\nimport { CGA } from './CGA';\r\nimport { JMP } from './JMP';\r\nimport { MSX } from './MSX';\r\nimport { PICO8 } from './PICO8';\r\n\r\nexport {\r\n    Arne16,\r\n    C64,\r\n    CGA,\r\n    JMP,\r\n    MSX,\r\n    PICO8\r\n};\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { Arne16 } from '../palettes/Arne16';\r\nimport { CreateCanvas } from '../CreateCanvas';\r\nimport { Texture } from '../Texture';\r\n\r\n/**\r\n * @callback Phaser.Types.Create.GenerateTextureCallback\r\n * @since 3.0.0\r\n *\r\n * @param {HTMLCanvasElement} canvas - The HTML Canvas element to operate on.\r\n * @param {CanvasRenderingContext2D} context - The context of the HTML Canvas element.\r\n */\r\n\r\n/**\r\n * @typedef {object} Phaser.Types.Create.GenerateTextureConfig\r\n * @since 3.0.0\r\n *\r\n * @property {array} [data=[]] - An array of data, where each row is a string of single values 0-9A-F, or the period character.\r\n * @property {HTMLCanvasElement} [canvas=null] - The HTML Canvas to draw the texture to.\r\n * @property {Phaser.Types.Create.Palette} [palette=Arne16] - The indexed palette that the data cell values map to.\r\n * @property {number} [pixelWidth=1] - The width of each 'pixel' in the generated texture.\r\n * @property {number} [pixelHeight=1] - The height of each 'pixel' in the generated texture.\r\n * @property {boolean} [resizeCanvas=true] - Should the canvas be resized before the texture is drawn?\r\n * @property {boolean} [clearCanvas=true] - Should the canvas be cleared before the texture is drawn?\r\n * @property {Phaser.Types.Create.GenerateTextureCallback} [preRender] - A callback to send the canvas to prior to the texture being drawn.\r\n * @property {Phaser.Types.Create.GenerateTextureCallback} [postRender] - A callback to send the canvas to after the texture has been drawn.\r\n */\r\n\r\nexport type PixelTextureConfig = {\r\n    data: string[];\r\n    canvas?: HTMLCanvasElement;\r\n    palette?: string[];\r\n    pixelWidth?: number;\r\n    pixelHeight?: number;\r\n    resizeCanvas?: boolean;\r\n    clearCanvas?: boolean;\r\n    preRender?: (canvas: HTMLCanvasElement, context: CanvasRenderingContext2D) => void;\r\n    postRender?: (canvas: HTMLCanvasElement, context: CanvasRenderingContext2D) => void;\r\n};\r\n\r\n/**\r\n * Generates a texture based on the given Create configuration object.\r\n *\r\n * The texture is drawn using a fixed-size indexed palette of 16 colors, where the hex value in the\r\n * data cells map to a single color. For example, if the texture config looked like this:\r\n *\r\n * ```javascript\r\n * var star = [\r\n *   '.....828.....',\r\n *   '....72227....',\r\n *   '....82228....',\r\n *   '...7222227...',\r\n *   '2222222222222',\r\n *   '8222222222228',\r\n *   '.72222222227.',\r\n *   '..787777787..',\r\n *   '..877777778..',\r\n *   '.78778887787.',\r\n *   '.27887.78872.',\r\n *   '.787.....787.'\r\n * ];\r\n *\r\n * this.textures.generate('star', { data: star, pixelWidth: 4 });\r\n * ```\r\n *\r\n * Then it would generate a texture that is 52 x 48 pixels in size, because each cell of the data array\r\n * represents 1 pixel multiplied by the `pixelWidth` value. The cell values, such as `8`, maps to color\r\n * number 8 in the palette. If a cell contains a period character `.` then it is transparent.\r\n *\r\n * The default palette is Arne16, but you can specify your own using the `palette` property.\r\n *\r\n * @function Phaser.Create.GenerateTexture\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Types.Create.GenerateTextureConfig} config - The Generate Texture Configuration object.\r\n *\r\n * @return {Texture} An HTMLCanvasElement which contains the generated texture drawn to it.\r\n */\r\nexport function PixelTexture (config: PixelTextureConfig): Texture\r\n{\r\n    const {\r\n        data = [],\r\n        palette = Arne16,\r\n        pixelWidth = 1,\r\n        pixelHeight = pixelWidth,\r\n        preRender = null,\r\n        postRender = null\r\n    } = config;\r\n\r\n    let {\r\n        canvas = null,\r\n        resizeCanvas = true,\r\n        clearCanvas = true\r\n    } = config;\r\n\r\n    const width = Math.floor(Math.abs(data[0].length * pixelWidth));\r\n    const height = Math.floor(Math.abs(data.length * pixelHeight));\r\n\r\n    if (!canvas)\r\n    {\r\n        canvas = CreateCanvas(width, height).canvas;\r\n        resizeCanvas = false;\r\n        clearCanvas = false;\r\n    }\r\n\r\n    if (resizeCanvas)\r\n    {\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n    }\r\n\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    if (clearCanvas)\r\n    {\r\n        ctx.clearRect(0, 0, width, height);\r\n    }\r\n\r\n    //  preRender Callback?\r\n    if (preRender)\r\n    {\r\n        preRender(canvas, ctx);\r\n    }\r\n\r\n    //  Draw it\r\n    for (let y = 0; y < data.length; y++)\r\n    {\r\n        const row = data[y];\r\n\r\n        for (let x = 0; x < row.length; x++)\r\n        {\r\n            const d: string = row[x];\r\n\r\n            if (d !== '.' && d !== ' ')\r\n            {\r\n                ctx.fillStyle = palette[parseInt('0x' + d.toUpperCase())];\r\n                ctx.fillRect(x * pixelWidth, y * pixelHeight, pixelWidth, pixelHeight);\r\n            }\r\n        }\r\n    }\r\n\r\n    //  postRender Callback?\r\n    if (postRender)\r\n    {\r\n        postRender(canvas, ctx);\r\n    }\r\n\r\n    return new Texture(canvas);\r\n}\r\n", "import { Texture } from './Texture';\r\n\r\nlet instance: Texture;\r\n\r\nexport const WhiteTexture =\r\n{\r\n    get: (): Texture =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (texture: Texture): void =>\r\n    {\r\n        instance = texture;\r\n    }\r\n};\r\n", "import { CreateCanvas } from './CreateCanvas';\r\nimport { IGLTextureBindingConfig } from '../renderer/webgl1/textures/IGLTextureBindingConfig';\r\nimport { Texture } from './Texture';\r\nimport { TextureManagerInstance } from './TextureManagerInstance';\r\nimport { WhiteTexture } from './WhiteTexture';\r\n\r\nexport class TextureManager\r\n{\r\n    textures: Map<string, Texture>;\r\n\r\n    constructor ()\r\n    {\r\n        this.textures = new Map();\r\n\r\n        this.createDefaultTextures();\r\n\r\n        TextureManagerInstance.set(this);\r\n    }\r\n\r\n    private createDefaultTextures (): void\r\n    {\r\n        this.add('__BLANK', new Texture(CreateCanvas(32, 32).canvas));\r\n\r\n        const missing = CreateCanvas(32, 32);\r\n\r\n        missing.strokeStyle = '#0f0';\r\n        missing.moveTo(0, 0);\r\n        missing.lineTo(32, 32);\r\n        missing.stroke();\r\n        missing.strokeRect(0.5, 0.5, 31, 31);\r\n\r\n        this.add('__MISSING', new Texture(missing.canvas));\r\n\r\n        const white = CreateCanvas(2, 2);\r\n\r\n        white.fillStyle = '#fff';\r\n        white.fillRect(0, 0, 2, 2);\r\n\r\n        const whiteTexture = this.add('__WHITE', new Texture(white.canvas));\r\n\r\n        //  Because this is used frequently by Graphics and Shapes\r\n        WhiteTexture.set(whiteTexture);\r\n    }\r\n\r\n    get (key: string): Texture\r\n    {\r\n        const textures = this.textures;\r\n\r\n        if (textures.has(key))\r\n        {\r\n            return textures.get(key);\r\n        }\r\n        else\r\n        {\r\n            return textures.get('__MISSING');\r\n        }\r\n    }\r\n\r\n    has (key: string): boolean\r\n    {\r\n        return this.textures.has(key);\r\n    }\r\n\r\n    add (key: string, source: Texture | HTMLImageElement, glConfig?: IGLTextureBindingConfig): Texture\r\n    {\r\n        let texture: Texture;\r\n        const textures = this.textures;\r\n\r\n        if (!textures.has(key))\r\n        {\r\n            if (source instanceof Texture)\r\n            {\r\n                texture = source;\r\n            }\r\n            else\r\n            {\r\n                texture = new Texture(source, 0, 0, glConfig);\r\n            }\r\n\r\n            texture.key = key;\r\n\r\n            textures.set(key, texture);\r\n        }\r\n\r\n        return texture;\r\n    }\r\n}\r\n", "import { GetMaxTextures, SetMaxTextures } from '../../../config/maxtextures/';\r\n\r\nimport { gl } from '../GL';\r\n\r\n//  As per the WebGL spec, the browser should always support at least 8 texture units\r\n//  However, the user can set this to any value they like (lower than this)\r\n\r\nexport function CreateTempTextures (): Array<[ number, WebGLTexture ]>\r\n{\r\n    let maxGPUTextures: number = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\r\n\r\n    const maxConfigTextures = GetMaxTextures();\r\n\r\n    if (maxConfigTextures === 0 || maxConfigTextures > maxGPUTextures)\r\n    {\r\n        //  Insert gpu limit into config value\r\n        SetMaxTextures(maxGPUTextures);\r\n    }\r\n    else\r\n    {\r\n        maxGPUTextures = maxConfigTextures;\r\n    }\r\n\r\n    const textures: Array<[ number, WebGLTexture ]> = [];\r\n\r\n    //  Create temp textures to stop WebGL errors on mac os\r\n    for (let i: number = 0; i < maxGPUTextures; i++)\r\n    {\r\n        const tempTexture = gl.createTexture();\r\n\r\n        gl.activeTexture(gl.TEXTURE0 + i);\r\n\r\n        gl.bindTexture(gl.TEXTURE_2D, tempTexture);\r\n\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([ 0, 0, 255, 255 ]));\r\n\r\n        textures.push([ i, tempTexture ]);\r\n    }\r\n\r\n    return textures;\r\n}\r\n", "import { Texture, WhiteTexture } from '../../../textures';\r\n\r\nimport { CreateTempTextures } from './CreateTempTextures';\r\nimport { Flush } from './Flush';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { ITexture } from '../../../textures/ITexture';\r\nimport { gl } from '../GL';\r\n\r\nexport class TextureStack\r\n{\r\n    renderPass: IRenderPass;\r\n\r\n    textures: Map<number, ITexture>;\r\n    tempTextures: Map<number, WebGLTexture>;\r\n    textureIndex: number[];\r\n\r\n    maxTextures: number;\r\n\r\n    constructor (renderPass: IRenderPass)\r\n    {\r\n        this.renderPass = renderPass;\r\n    }\r\n\r\n    //  directly bind a texture to an index slot\r\n    bind (texture: Texture, index: number = 0): void\r\n    {\r\n        const binding = texture.binding;\r\n\r\n        binding.bind(index);\r\n\r\n        gl.activeTexture(gl.TEXTURE0 + index);\r\n        gl.bindTexture(gl.TEXTURE_2D, binding.texture);\r\n    }\r\n\r\n    unbind (index: number = 0): void\r\n    {\r\n        gl.activeTexture(gl.TEXTURE0 + index);\r\n        gl.bindTexture(gl.TEXTURE_2D, this.tempTextures[ index ]);\r\n    }\r\n\r\n    setWhite (): number\r\n    {\r\n        return this.set(WhiteTexture.get());\r\n    }\r\n\r\n    //  request the next available texture and bind it\r\n    //  returns the new ID\r\n    set (texture: ITexture): number\r\n    {\r\n        if (!texture.binding)\r\n        {\r\n            return -1;\r\n        }\r\n\r\n        const binding = texture.binding;\r\n        const textures = this.textures;\r\n\r\n        //  Make sure texture isn't already bound\r\n        if (!binding.isBound)\r\n        {\r\n            //  Is the current texture Map full? If so, flush it all\r\n            if (textures.size === this.maxTextures)\r\n            {\r\n                Flush(this.renderPass);\r\n\r\n                this.clear();\r\n            }\r\n\r\n            // Add texture to the map\r\n            const textureUnit = textures.size;\r\n\r\n            gl.activeTexture(gl.TEXTURE0 + textureUnit);\r\n            gl.bindTexture(gl.TEXTURE_2D, binding.texture);\r\n\r\n            textures.set(textureUnit, texture);\r\n\r\n            binding.bind(textureUnit);\r\n        }\r\n\r\n        return binding.textureUnit;\r\n    }\r\n\r\n    setDefault (): void\r\n    {\r\n        if (this.textures)\r\n        {\r\n            this.reset();\r\n        }\r\n\r\n        const tempTextures = CreateTempTextures();\r\n\r\n        this.maxTextures = tempTextures.length;\r\n\r\n        this.tempTextures = new Map(tempTextures);\r\n        this.textures = new Map();\r\n\r\n        this.textureIndex = [];\r\n\r\n        this.tempTextures.forEach((texture, index) =>\r\n        {\r\n            this.textureIndex.push(index);\r\n        });\r\n    }\r\n\r\n    clear (): void\r\n    {\r\n        this.textures.forEach(texture => texture.binding.unbind());\r\n\r\n        this.textures.clear();\r\n    }\r\n\r\n    reset (): void\r\n    {\r\n        this.tempTextures.forEach((texture, index) =>\r\n        {\r\n            gl.activeTexture(gl.TEXTURE0 + index);\r\n\r\n            gl.bindTexture(gl.TEXTURE_2D, texture);\r\n        });\r\n\r\n        this.clear();\r\n    }\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { IVertexBuffer } from '../buffers/IVertexBuffer';\r\nimport { gl } from '../GL';\r\n\r\nexport class VertexBufferStack\r\n{\r\n    renderPass: IRenderPass;\r\n\r\n    stack: IVertexBuffer[];\r\n    active: IVertexBuffer;\r\n    default: IVertexBuffer;\r\n    index: number;\r\n\r\n    constructor (renderPass: IRenderPass)\r\n    {\r\n        this.renderPass = renderPass;\r\n        this.stack = [];\r\n    }\r\n\r\n    get current (): IVertexBuffer\r\n    {\r\n        return this.stack[this.index];\r\n    }\r\n\r\n    add (buffer: IVertexBuffer): IVertexBuffer\r\n    {\r\n        this.index++;\r\n\r\n        //  cursor already at the end of the stack, so we need to grow it\r\n        if (this.index === this.stack.length)\r\n        {\r\n            this.stack.push(buffer);\r\n        }\r\n        else\r\n        {\r\n            this.stack[this.index] = buffer;\r\n        }\r\n\r\n        return buffer;\r\n    }\r\n\r\n    bindDefault (): void\r\n    {\r\n        this.index = 0;\r\n\r\n        this.bind(this.default);\r\n    }\r\n\r\n    bind (buffer?: IVertexBuffer): void\r\n    {\r\n        if (!buffer)\r\n        {\r\n            buffer = this.current;\r\n        }\r\n\r\n        if (!buffer.isBound)\r\n        {\r\n            const indexBuffer = (buffer.indexed) ? buffer.indexBuffer : null;\r\n\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer.vertexBuffer);\r\n\r\n            buffer.isBound = true;\r\n\r\n            if (this.active && this.active !== buffer)\r\n            {\r\n                this.active.isBound = false;\r\n            }\r\n\r\n            this.active = buffer;\r\n        }\r\n    }\r\n\r\n    pop (): void\r\n    {\r\n        this.index--;\r\n\r\n        this.bind();\r\n    }\r\n\r\n    set (buffer: IVertexBuffer): void\r\n    {\r\n        const entry = this.add(buffer);\r\n\r\n        this.bind(entry);\r\n    }\r\n\r\n    setDefault (buffer: IVertexBuffer): void\r\n    {\r\n        //  The default entry always goes into index zero\r\n        this.stack[0] = buffer;\r\n\r\n        this.index = 0;\r\n\r\n        this.default = buffer;\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nimport { IRectangle } from './IRectangle';\r\n\r\n/**\r\n * Compares the `x`, `y`, `width` and `height` properties of two rectangles.\r\n */\r\nexport function RectangleEquals (rect: IRectangle, toCompare: IRectangle): boolean\r\n{\r\n    return (\r\n        rect.x === toCompare.x &&\r\n        rect.y === toCompare.y &&\r\n        rect.width === toCompare.width &&\r\n        rect.height === toCompare.height\r\n    );\r\n}\r\n", "import { IRenderPass } from './IRenderPass';\r\nimport { Rectangle } from '../../../geom/rectangle/Rectangle';\r\nimport { RectangleEquals } from '../../../geom/rectangle/RectangleEquals';\r\nimport { gl } from '../GL';\r\n\r\nexport class ViewportStack\r\n{\r\n    renderPass: IRenderPass;\r\n\r\n    stack: Rectangle[];\r\n    active: Rectangle;\r\n    default: Rectangle;\r\n    index: number;\r\n\r\n    constructor (renderPass: IRenderPass)\r\n    {\r\n        this.renderPass = renderPass;\r\n        this.stack = [];\r\n    }\r\n\r\n    get current (): Rectangle\r\n    {\r\n        return this.stack[this.index];\r\n    }\r\n\r\n    add (x: number = 0, y: number = 0, width: number = 0, height: number = 0): Rectangle\r\n    {\r\n        const entry = new Rectangle(x, y, width, height);\r\n\r\n        this.index++;\r\n\r\n        //  cursor already at the end of the stack, so we need to grow it\r\n        if (this.index === this.stack.length)\r\n        {\r\n            this.stack.push(entry);\r\n        }\r\n        else\r\n        {\r\n            this.stack[this.index] = entry;\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    bindDefault (): void\r\n    {\r\n        this.index = 0;\r\n\r\n        this.bind(this.default);\r\n    }\r\n\r\n    bind (viewport?: Rectangle): void\r\n    {\r\n        if (!viewport)\r\n        {\r\n            viewport = this.current;\r\n        }\r\n\r\n        if (!this.active || !RectangleEquals(this.active, viewport))\r\n        {\r\n            gl.viewport(viewport.x, viewport.y, viewport.width, viewport.height);\r\n\r\n            this.active = viewport;\r\n        }\r\n    }\r\n\r\n    pop (): void\r\n    {\r\n        this.index--;\r\n\r\n        this.bind();\r\n    }\r\n\r\n    set (x: number = 0, y: number = 0, width: number = 0, height: number = 0): void\r\n    {\r\n        const entry = this.add(x, y, width, height);\r\n\r\n        this.bind(entry);\r\n    }\r\n\r\n    setDefault (x: number = 0, y: number = 0, width: number = 0, height: number = 0): void\r\n    {\r\n        const entry = new Rectangle(x, y, width, height);\r\n\r\n        //  The default entry always goes into index zero\r\n        this.stack[0] = entry;\r\n\r\n        this.index = 0;\r\n\r\n        this.default = entry;\r\n    }\r\n}\r\n", "import { BlendModeStack } from './BlendModeStack';\r\nimport { FramebufferStack } from './FramebufferStack';\r\nimport { GetBatchSize } from '../../../config/batchsize/GetBatchSize';\r\nimport { GetMaxTextures } from '../../../config/maxtextures';\r\nimport { IBaseCamera } from '../../../camera/IBaseCamera';\r\nimport { IRenderPass } from './IRenderPass';\r\nimport { IShader } from '../shaders/IShader';\r\nimport { IVertexBuffer } from '../buffers/IVertexBuffer';\r\nimport { IWebGLRenderer } from '../IWebGLRenderer';\r\nimport { IndexedVertexBuffer } from '../buffers/IndexedVertexBuffer';\r\nimport { Mat4Ortho } from '../../../math/mat4/Mat4Ortho';\r\nimport { Matrix4 } from '../../../math/mat4/Matrix4';\r\nimport { MultiTextureQuadShader } from '../shaders';\r\nimport { QuadShader } from '../shaders/QuadShader';\r\nimport { ShaderStack } from './ShaderStack';\r\nimport { StaticCamera } from '../../../camera';\r\nimport { TextureStack } from './TextureStack';\r\nimport { VertexBuffer } from '../buffers';\r\nimport { VertexBufferStack } from './VertexBufferStack';\r\nimport { ViewportStack } from './ViewportStack';\r\n\r\nexport class RenderPass implements IRenderPass\r\n{\r\n    renderer: IWebGLRenderer;\r\n\r\n    projectionMatrix: Matrix4;\r\n    cameraMatrix: Matrix4;\r\n\r\n    count: number = 0;\r\n    prevCount: number = 0;\r\n    flushTotal: number = 0;\r\n\r\n    //  Stacks\r\n    framebuffer: FramebufferStack;\r\n    vertexbuffer: VertexBufferStack;\r\n    blendMode: BlendModeStack;\r\n    shader: ShaderStack;\r\n    viewport: ViewportStack;\r\n    textures: TextureStack;\r\n\r\n    //  Single Texture Quad Shader + Camera\r\n    quadShader: IShader;\r\n    quadBuffer: IVertexBuffer;\r\n    quadCamera: IBaseCamera;\r\n\r\n    //  Current 2D Camera\r\n    current2DCamera: IBaseCamera;\r\n\r\n    constructor (renderer: IWebGLRenderer)\r\n    {\r\n        this.renderer = renderer;\r\n\r\n        this.projectionMatrix = new Matrix4();\r\n\r\n        this.framebuffer = new FramebufferStack(this);\r\n        this.vertexbuffer = new VertexBufferStack(this);\r\n        this.blendMode = new BlendModeStack(this);\r\n        this.shader = new ShaderStack(this);\r\n        this.viewport = new ViewportStack(this);\r\n        this.textures = new TextureStack(this);\r\n\r\n        this.reset();\r\n    }\r\n\r\n    flush (): void\r\n    {\r\n        this.prevCount = this.count;\r\n\r\n        this.count = 0;\r\n\r\n        this.flushTotal++;\r\n    }\r\n\r\n    //  TODO - Call when context is lost and restored\r\n    reset (): void\r\n    {\r\n        const gl = this.renderer.gl;\r\n\r\n        const indexLayout = [ 0, 1, 2, 2, 3, 0 ];\r\n\r\n        //  TODO - If already created, delete shaders / buffers first (i.e. during context loss)\r\n\r\n        //  Default QuadShader (for FBO drawing)\r\n\r\n        this.quadShader = new QuadShader();\r\n        this.quadBuffer = new IndexedVertexBuffer({ name: 'quad', isDynamic: false, indexLayout });\r\n        this.quadCamera = new StaticCamera();\r\n\r\n        //  Default settings\r\n\r\n        this.textures.setDefault();\r\n        this.framebuffer.setDefault();\r\n        this.blendMode.setDefault(true, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n        // this.vertexbuffer.setDefault(new IndexedVertexBuffer({ name: 'sprite', batchSize: GetBatchSize(), indexLayout }));\r\n        this.vertexbuffer.setDefault(new VertexBuffer({ batchSize: GetBatchSize(), vertexElementSize: 9 }));\r\n\r\n        if (GetMaxTextures() === 1)\r\n        {\r\n            this.shader.setDefault(new QuadShader());\r\n        }\r\n        else\r\n        {\r\n            this.shader.setDefault(new MultiTextureQuadShader());\r\n        }\r\n    }\r\n\r\n    resize (width: number, height: number): void\r\n    {\r\n        //  TODO - -1 to 1?\r\n        Mat4Ortho(0, width, height, 0, -1000, 1000, this.projectionMatrix);\r\n\r\n        this.quadCamera.reset();\r\n\r\n        this.viewport.setDefault(0, 0, width, height);\r\n    }\r\n}\r\n", "import { WebGLRenderer } from './WebGLRenderer';\r\n\r\nexport let instance: WebGLRenderer;\r\n\r\nexport const WebGLRendererInstance =\r\n{\r\n    get: (): WebGLRenderer =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (renderer: WebGLRenderer | undefined): void =>\r\n    {\r\n        instance = renderer;\r\n    }\r\n};\r\n", "import { IBaseWorld } from './IBaseWorld';\r\nimport { IScene } from '../scenes/IScene';\r\n\r\nexport const WorldList: Map<IScene, IBaseWorld[]> = new Map();\r\n", "import { GetHeight, GetResolution, GetWidth } from '../../config/size/';\r\n\r\nimport { End } from './renderpass/End';\r\nimport { GL } from './GL';\r\nimport { GetBackgroundColor } from '../../config/backgroundcolor/GetBackgroundColor';\r\nimport { GetCompressedTextures } from './textures/GetCompressedTextures';\r\nimport { GetRGBArray } from './colors/GetRGBArray';\r\nimport { GetWebGLContext } from '../../config/webglcontext/GetWebGLContext';\r\nimport { ICompressedTextures } from './textures/ICompressedTextures';\r\nimport { IRenderPass } from './renderpass/IRenderPass';\r\nimport { IScene } from '../../scenes/IScene';\r\nimport { ProcessBindingQueue } from './renderpass/ProcessBindingQueue';\r\nimport { RenderPass } from './renderpass/RenderPass';\r\nimport { Start } from './renderpass';\r\nimport { WebGLRendererInstance } from './WebGLRendererInstance';\r\nimport { WorldList } from '../../world/WorldList';\r\n\r\nexport class WebGLRenderer\r\n{\r\n    canvas: HTMLCanvasElement;\r\n    gl: WebGLRenderingContext;\r\n\r\n    renderPass: IRenderPass;\r\n\r\n    clearColor = [ 0, 0, 0, 1 ];\r\n\r\n    width: number;\r\n    height: number;\r\n    resolution: number;\r\n\r\n    clearBeforeRender: boolean = true;\r\n    optimizeRedraw: boolean = true;\r\n    autoResize: boolean = true;\r\n\r\n    contextLost: boolean = false;\r\n\r\n    compression: ICompressedTextures;\r\n\r\n    constructor ()\r\n    {\r\n        this.width = GetWidth();\r\n        this.height = GetHeight();\r\n        this.resolution = GetResolution();\r\n\r\n        this.setBackgroundColor(GetBackgroundColor());\r\n\r\n        const canvas = document.createElement('canvas');\r\n\r\n        canvas.addEventListener('webglcontextlost', (event) => this.onContextLost(event), false);\r\n        canvas.addEventListener('webglcontextrestored', () => this.onContextRestored(), false);\r\n\r\n        this.canvas = canvas;\r\n\r\n        this.initContext();\r\n\r\n        //  By this stage the context is available\r\n        WebGLRendererInstance.set(this);\r\n\r\n        this.renderPass = new RenderPass(this);\r\n\r\n        this.resize(this.width, this.height, this.resolution);\r\n\r\n        //  Process default textures from the Texture Manager\r\n        ProcessBindingQueue();\r\n    }\r\n\r\n    initContext (): void\r\n    {\r\n        const gl = this.canvas.getContext('webgl', GetWebGLContext());\r\n\r\n        GL.set(gl);\r\n\r\n        this.gl = gl;\r\n\r\n        this.compression = GetCompressedTextures(gl);\r\n\r\n        gl.disable(gl.DEPTH_TEST);\r\n        gl.disable(gl.CULL_FACE);\r\n    }\r\n\r\n    resize (width: number, height: number, resolution: number = 1): void\r\n    {\r\n        const calcWidth = width * resolution;\r\n        const calcHeight = height * resolution;\r\n\r\n        this.width = calcWidth;\r\n        this.height = calcHeight;\r\n        this.resolution = resolution;\r\n\r\n        const canvas = this.canvas;\r\n\r\n        canvas.width = calcWidth;\r\n        canvas.height = calcHeight;\r\n\r\n        if (this.autoResize)\r\n        {\r\n            canvas.style.width = width.toString() + 'px';\r\n            canvas.style.height = height.toString() + 'px';\r\n        }\r\n\r\n        this.renderPass.resize(calcWidth, calcHeight);\r\n    }\r\n\r\n    onContextLost (event: Event): void\r\n    {\r\n        event.preventDefault();\r\n\r\n        this.contextLost = true;\r\n    }\r\n\r\n    onContextRestored (): void\r\n    {\r\n        this.contextLost = false;\r\n\r\n        this.initContext();\r\n    }\r\n\r\n    setBackgroundColor (color: number): this\r\n    {\r\n        GetRGBArray(color, this.clearColor);\r\n\r\n        return this;\r\n    }\r\n\r\n    //  TODO - Remove?\r\n    reset (): void\r\n    {\r\n        // this.renderPass.reset();\r\n    }\r\n\r\n    render (willRedraw: boolean, scenes: Map<string, IScene>): void\r\n    {\r\n        if (this.contextLost)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const gl = this.gl;\r\n        const renderPass = this.renderPass;\r\n\r\n        //  This is only here because if we don't do _something_ with the context,\r\n        //  GL Spector can't see it!\r\n        gl.getContextAttributes();\r\n\r\n        ProcessBindingQueue();\r\n\r\n        //  Nothing dirty? Display the previous frame\r\n        if (this.optimizeRedraw && !willRedraw)\r\n        {\r\n            // return;\r\n        }\r\n\r\n        if (this.clearBeforeRender)\r\n        {\r\n            const cls = this.clearColor;\r\n\r\n            gl.clearColor(cls[0], cls[1], cls[2], cls[3]);\r\n            gl.clear(gl.COLOR_BUFFER_BIT);\r\n        }\r\n\r\n        Start(renderPass);\r\n\r\n        for (const scene of scenes.values())\r\n        {\r\n            const worlds = WorldList.get(scene);\r\n\r\n            for (const world of worlds)\r\n            {\r\n                if (world.runRender)\r\n                {\r\n                    world.renderGL(renderPass);\r\n                }\r\n\r\n                world.postRenderGL(renderPass);\r\n            }\r\n        }\r\n\r\n        End(renderPass);\r\n\r\n        // eslint-disable-next-line no-debugger\r\n        // debugger;\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        WebGLRendererInstance.set(undefined);\r\n    }\r\n}\r\n", "import { SetRenderer } from '../renderer/SetRenderer';\r\nimport { WebGLRenderer } from '../../renderer/webgl1/WebGLRenderer';\r\n\r\nexport function WebGL (): () => void\r\n{\r\n    return (): void =>\r\n    {\r\n        SetRenderer(WebGLRenderer);\r\n    };\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetWebGLContext (contextAttributes: WebGLContextAttributes): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.WEBGL_CONTEXT, contextAttributes);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function SetWorldSize (size: number): void\r\n{\r\n    ConfigStore.set(CONFIG_DEFAULTS.WORLD_SIZE, size);\r\n}\r\n", "import { AddChildAt } from './AddChildAt';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\n\r\nexport function AddChild <P extends IGameObject, C extends IGameObject> (parent: P, child: C): C\r\n{\r\n    return AddChildAt(parent, child);\r\n}\r\n", "import { IGameObject } from '../gameobjects/IGameObject';\r\nimport { RemoveChild } from './RemoveChild';\r\n\r\nexport function RemoveChildren <P extends IGameObject> (parent: P, ...children: IGameObject[]): IGameObject[]\r\n{\r\n    children.forEach(child =>\r\n    {\r\n        RemoveChild(parent, child);\r\n    });\r\n\r\n    return children;\r\n}\r\n", "import { GetElement } from './GetElement';\r\n\r\nexport function AddToDOM (element: HTMLElement, parent?: string | HTMLElement): HTMLElement\r\n{\r\n    const target: HTMLElement = GetElement(parent);\r\n\r\n    target.appendChild(element);\r\n\r\n    return element;\r\n}\r\n", "export function DOMContentLoaded (callback: () => void): void\r\n{\r\n    const readyState = document.readyState;\r\n\r\n    if (readyState === 'complete' || readyState === 'interactive')\r\n    {\r\n        callback();\r\n\r\n        return;\r\n    }\r\n\r\n    const check = (): void =>\r\n    {\r\n        document.removeEventListener('deviceready', check, true);\r\n        document.removeEventListener('DOMContentLoaded', check, true);\r\n        window.removeEventListener('load', check, true);\r\n\r\n        callback();\r\n    };\r\n\r\n    // TODO - Swap is IsCordova call\r\n\r\n    if (!document.body)\r\n    {\r\n        window.setTimeout(check, 20);\r\n    }\r\n    else if (window.hasOwnProperty('cordova'))\r\n    {\r\n        document.addEventListener('deviceready', check, true);\r\n    }\r\n    else\r\n    {\r\n        document.addEventListener('DOMContentLoaded', check, true);\r\n        window.addEventListener('load', check, true);\r\n    }\r\n}\r\n", "/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Takes the given data string and parses it as XML using the native DOMParser interface.\r\n * The parsed XML object is returned, or `null` if there was an error while parsing the data.\r\n *\r\n * @function Phaser.DOM.ParseXML\r\n * @since 3.0.0\r\n *\r\n * @param {string} data - The XML source stored in a string.\r\n *\r\n * @return {?XMLDocument} The parsed XML data, or `null` if the data could not be parsed.\r\n */\r\nexport function ParseXML (data: string): XMLDocument | null\r\n{\r\n    let xml: XMLDocument;\r\n\r\n    try\r\n    {\r\n        const parser = new DOMParser();\r\n\r\n        xml = parser.parseFromString(data, 'text/xml');\r\n\r\n        if (!xml || !xml.documentElement || xml.getElementsByTagName('parsererror').length)\r\n        {\r\n            return null;\r\n        }\r\n        else\r\n        {\r\n            return xml;\r\n        }\r\n    }\r\n    catch (error)\r\n    {\r\n        return null;\r\n    }\r\n}\r\n", "import { IEventInstance } from './IEventInstance';\r\n\r\nexport class EventEmitter\r\n{\r\n    events: Map<string, Set<IEventInstance>>;\r\n\r\n    constructor ()\r\n    {\r\n        this.events = new Map();\r\n    }\r\n}\r\n", "export class EventInstance\r\n{\r\n    callback: Function;\r\n    context: unknown;\r\n    once: boolean;\r\n\r\n    constructor (callback: Function, context: unknown, once: boolean = false)\r\n    {\r\n        this.callback = callback;\r\n        this.context = context;\r\n        this.once = once;\r\n    }\r\n}\r\n", "import { EventInstance } from './EventInstance';\r\nimport { IEventEmitter } from './IEventEmitter';\r\nimport { IEventInstance } from './IEventInstance';\r\n\r\nexport function On (emitter: IEventEmitter, event: string, callback: Function, context: unknown = emitter, once: boolean = false): IEventInstance\r\n{\r\n    if (typeof callback !== 'function')\r\n    {\r\n        throw new TypeError('Listener not a function');\r\n    }\r\n\r\n    const listener = new EventInstance(callback, context, once);\r\n    const listeners = emitter.events.get(event);\r\n\r\n    if (!listeners)\r\n    {\r\n        emitter.events.set(event, new Set([ listener ]));\r\n    }\r\n    else\r\n    {\r\n        listeners.add(listener);\r\n    }\r\n\r\n    return listener;\r\n}\r\n", "import { IEventEmitter } from './IEventEmitter';\r\nimport { IEventInstance } from './IEventInstance';\r\nimport { On } from './On';\r\n\r\nexport function Once (emitter: IEventEmitter, event: string, callback: Function, context: unknown = emitter): IEventInstance\r\n{\r\n    return On(emitter, event, callback, context, true);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetBanner (): void\r\n{\r\n    const { title, version, url, color, background } = ConfigStore.get(CONFIG_DEFAULTS.BANNER);\r\n\r\n    if (title !== '')\r\n    {\r\n        const str = (version !== '') ? title + ' ' + version : title;\r\n\r\n        console.log(\r\n            `%c${str}%c ${url}`,\r\n            `padding: 4px 16px; color: ${color}; background: ${background}`,\r\n            ''\r\n        );\r\n    }\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetGlobalVar (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.GLOBAL_VAR);\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetParent (): string | HTMLElement | undefined\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.PARENT);\r\n}\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst RenderStats = defineComponent({\r\n\r\n    //  The current Game Frame number\r\n    gameFrame: Types.ui32,\r\n\r\n    //  Total number of Scenes rendered\r\n    numScenes: Types.ui8,\r\n\r\n    //  Total number of Worlds rendered\r\n    numWorlds: Types.ui8,\r\n\r\n    //  Total number of Game Objects (across all worlds)\r\n    numGameObjects: Types.ui32,\r\n\r\n    //  Total number of Game Objects to be rendered (across all worlds)\r\n    numGameObjectsRendered: Types.ui32,\r\n\r\n    //  Total number of Game Objects with dirty local transforms\r\n    numDirtyLocalTransforms: Types.ui32,\r\n\r\n    //  Total number of Game Objects with dirty world transforms\r\n    numDirtyWorldTransforms: Types.ui32,\r\n\r\n    //  Total number of Game Objects with dirty vertices\r\n    numDirtyVertices: Types.ui32,\r\n\r\n    //  Total number of Worlds that had to recalculate their display lists\r\n    numDirtyWorldLists: Types.ui8,\r\n\r\n    //  How many Cameras were made dirty this frame across all Scenes?\r\n    numDirtyCameras: Types.ui32\r\n\r\n});\r\n\r\nexport const RenderStatsComponent = RenderStats;\r\n", "import { GameObjectWorld } from '../GameObjectWorld';\r\nimport { RenderStatsComponent } from './RenderStatsComponent';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddRenderStatsComponent (id: number): void\r\n{\r\n    addComponent(GameObjectWorld, RenderStatsComponent, id);\r\n}\r\n", "import { ISceneConfig } from './ISceneConfig';\r\n\r\nexport function GetConfigValue<Property extends keyof ISceneConfig> (config: ISceneConfig, property: Property, defaultValue: ISceneConfig[Property]): ISceneConfig[Property]\r\n{\r\n    if (Object.prototype.hasOwnProperty.call(config, property))\r\n    {\r\n        return config[property];\r\n    }\r\n    else\r\n    {\r\n        return defaultValue;\r\n    }\r\n}\r\n", "import { SceneManager } from './SceneManager';\r\n\r\nlet instance: SceneManager;\r\n\r\nexport const SceneManagerInstance =\r\n{\r\n    get: (): SceneManager =>\r\n    {\r\n        return instance;\r\n    },\r\n\r\n    set: (manager: SceneManager | null): void =>\r\n    {\r\n        if (instance)\r\n        {\r\n            throw new Error('SceneManager should not be instantiated more than once');\r\n        }\r\n\r\n        instance = manager;\r\n    }\r\n};\r\n", "import { IRenderStats } from './IRenderStats';\r\nimport { RenderStatsComponent } from './RenderStatsComponent';\r\nimport { SceneManagerInstance } from './SceneManagerInstance';\r\n\r\nexport function GetRenderStatsAsObject (obj?: IRenderStats): IRenderStats\r\n{\r\n    const id = SceneManagerInstance.get().id;\r\n\r\n    if (!obj)\r\n    {\r\n        obj = { fps: 0, delta: 0, gameFrame: 0, numScenes: 0, numWorlds: 0, numGameObjects: 0, numGameObjectsRendered: 0, numDirtyLocalTransforms: 0, numDirtyWorldTransforms: 0, numDirtyVertices: 0, numDirtyWorldLists: 0, numDirtyCameras: 0 };\r\n    }\r\n\r\n    obj.gameFrame = RenderStatsComponent.gameFrame[id];\r\n    obj.numScenes = RenderStatsComponent.numScenes[id];\r\n    obj.numWorlds = RenderStatsComponent.numWorlds[id];\r\n    obj.numGameObjects = RenderStatsComponent.numGameObjects[id];\r\n    obj.numGameObjectsRendered = RenderStatsComponent.numGameObjectsRendered[id];\r\n    obj.numDirtyLocalTransforms = RenderStatsComponent.numDirtyLocalTransforms[id];\r\n    obj.numDirtyWorldTransforms = RenderStatsComponent.numDirtyWorldTransforms[id];\r\n    obj.numDirtyVertices = RenderStatsComponent.numDirtyVertices[id];\r\n    obj.numDirtyWorldLists = RenderStatsComponent.numDirtyWorldLists[id];\r\n    obj.numDirtyCameras = RenderStatsComponent.numDirtyCameras[id];\r\n\r\n    return obj;\r\n}\r\n", "import { GetConfigValue } from './GetConfigValue';\r\nimport { IScene } from './IScene';\r\nimport { ISceneConfig } from './ISceneConfig';\r\nimport { SceneManagerInstance } from './SceneManagerInstance';\r\nimport { WorldList } from '../world/WorldList';\r\n\r\nexport function Install (scene: IScene, config: string | ISceneConfig = {}): void\r\n{\r\n    const sceneManager = SceneManagerInstance.get();\r\n\r\n    const size = sceneManager.scenes.size;\r\n    const sceneIndex = sceneManager.sceneIndex;\r\n    const firstScene = (size === 0);\r\n\r\n    if (typeof config === 'string')\r\n    {\r\n        scene.key = config;\r\n    }\r\n    else if (config || (!config && firstScene))\r\n    {\r\n        scene.key = GetConfigValue(config, 'key', 'scene' + sceneIndex.toString());\r\n    }\r\n\r\n    if (sceneManager.scenes.has(scene.key))\r\n    {\r\n        console.warn('Scene key already in use: ' + scene.key);\r\n    }\r\n    else\r\n    {\r\n        sceneManager.scenes.set(scene.key, scene);\r\n\r\n        sceneManager.flush = true;\r\n\r\n        sceneManager.sceneIndex++;\r\n    }\r\n\r\n    WorldList.set(scene, []);\r\n}\r\n", "import { RenderStatsComponent } from './RenderStatsComponent';\r\n\r\nexport function ResetRenderStats (id: number, gameFrame: number, scenes: number, worlds: number, transforms: number): void\r\n{\r\n    RenderStatsComponent.gameFrame[id] = gameFrame;\r\n    RenderStatsComponent.numScenes[id] = scenes;\r\n    RenderStatsComponent.numWorlds[id] = worlds;\r\n    RenderStatsComponent.numGameObjects[id] = 0;\r\n    RenderStatsComponent.numGameObjectsRendered[id] = 0;\r\n    RenderStatsComponent.numDirtyWorldLists[id] = 0;\r\n    RenderStatsComponent.numDirtyVertices[id] = 0;\r\n    RenderStatsComponent.numDirtyLocalTransforms[id] = transforms;\r\n    RenderStatsComponent.numDirtyWorldTransforms[id] = 0;\r\n    RenderStatsComponent.numDirtyCameras[id] = 0;\r\n}\r\n", "import { Game } from '../Game';\r\nimport { GameInstance } from '../GameInstance';\r\nimport { IEventEmitter } from '../events/IEventEmitter';\r\nimport { IEventInstance } from '../events/IEventInstance';\r\nimport { IScene } from './IScene';\r\nimport { ISceneConfig } from './ISceneConfig';\r\nimport { Install } from './Install';\r\n\r\nexport class Scene implements IScene, IEventEmitter\r\n{\r\n    key: string;\r\n    game: Game;\r\n    events: Map<string, Set<IEventInstance>>;\r\n\r\n    constructor (config?: string | ISceneConfig)\r\n    {\r\n        this.game = GameInstance.get();\r\n        this.events = new Map();\r\n\r\n        Install(this, config);\r\n    }\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { ISceneConstructor } from '../../scenes/ISceneConstructor';\r\n\r\nexport function GetScenes (): ISceneConstructor[]\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.SCENES);\r\n}\r\n", "import { Changed, Query, addEntity, defineQuery } from 'bitecs';\r\n\r\nimport { AddRenderStatsComponent } from './AddRenderStatsComponent';\r\nimport { Game } from '../Game';\r\nimport { GameInstance } from '../GameInstance';\r\nimport { GameObjectWorld } from '../GameObjectWorld';\r\nimport { GetScenes } from '../config/scenes';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { IScene } from './IScene';\r\nimport { LocalMatrix2DComponent } from '../components/transform';\r\nimport { Once } from '../events';\r\nimport { PackQuadColorsSystem } from '../components/color/PackQuadColorsSystem';\r\nimport { RenderStatsComponent } from './RenderStatsComponent';\r\nimport { ResetRenderStats } from './ResetRenderStats';\r\nimport { SceneManagerInstance } from './SceneManagerInstance';\r\nimport { UpdateLocalTransform2DSystem } from '../components/transform/UpdateLocalTransform2DSystem';\r\nimport { UpdateVertexPositionSystem } from '../components/vertices/UpdateVertexPositionSystem';\r\nimport { WorldList } from '../world/WorldList';\r\n\r\nexport class SceneManager\r\n{\r\n    readonly id: number = addEntity(GameObjectWorld);\r\n\r\n    game: Game;\r\n\r\n    scenes: Map<string, IScene> = new Map();\r\n\r\n    //  Used by Install to assign default scene keys when not specified\r\n    sceneIndex: number = 0;\r\n\r\n    //  Force the renderer to fully redraw\r\n    flush: boolean;\r\n\r\n    changedMatrixQuery: Query = defineQuery([ Changed(LocalMatrix2DComponent) ]);\r\n\r\n    constructor ()\r\n    {\r\n        this.game = GameInstance.get();\r\n\r\n        SceneManagerInstance.set(this);\r\n\r\n        AddRenderStatsComponent(this.id);\r\n\r\n        Once(this.game, 'boot', () => this.boot());\r\n    }\r\n\r\n    boot (): void\r\n    {\r\n        GetScenes().forEach(scene => new scene());\r\n    }\r\n\r\n    update (delta: number, time: number, gameFrame: number): void\r\n    {\r\n        let sceneTotal = 0;\r\n        let worldTotal = 0;\r\n\r\n        for (const scene of this.scenes.values())\r\n        {\r\n            const worlds = WorldList.get(scene);\r\n\r\n            for (const world of worlds)\r\n            {\r\n                world.beforeUpdate(delta, time);\r\n                world.update(delta, time);\r\n                world.afterUpdate(delta, time);\r\n\r\n                worldTotal++;\r\n            }\r\n\r\n            sceneTotal++;\r\n        }\r\n\r\n        //  Process all dirty 2D transforms and update the local matrix across all Worlds and Scenes\r\n        const localTransforms = UpdateLocalTransform2DSystem(GameObjectWorld);\r\n\r\n        ResetRenderStats(this.id, gameFrame, sceneTotal, worldTotal, localTransforms.length);\r\n    }\r\n\r\n    //  Run through all Scenes and Worlds within them, telling them to prepare to render\r\n    //  The renderer itself tells them to actually render\r\n    preRender (gameFrame: number): void\r\n    {\r\n        const dirtyTransforms = this.changedMatrixQuery(GameObjectWorld);\r\n\r\n        let dirtyWorld = false;\r\n\r\n        for (const scene of this.scenes.values())\r\n        {\r\n            const worlds = WorldList.get(scene);\r\n\r\n            for (const world of worlds)\r\n            {\r\n                if (world.preRender(gameFrame, dirtyTransforms))\r\n                {\r\n                    dirtyWorld = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        //  Repack any changed vertex colors\r\n        PackQuadColorsSystem(GameObjectWorld);\r\n\r\n        //  Update all vertices across the whole game, ready for rendering\r\n        const updatedEntities = UpdateVertexPositionSystem(GameObjectWorld);\r\n\r\n        RenderStatsComponent.numDirtyVertices[this.id] = updatedEntities.length * 4;\r\n\r\n        if (dirtyWorld)\r\n        {\r\n            this.flush = true;\r\n        }\r\n    }\r\n\r\n    //  TODO - This isn't used internally - is used by debug panel - move out?\r\n    getRenderList (): IGameObject[]\r\n    {\r\n        let output: IGameObject[] = [];\r\n\r\n        for (const scene of this.scenes.values())\r\n        {\r\n            const worlds = WorldList.get(scene);\r\n\r\n            for (const world of worlds)\r\n            {\r\n                output = output.concat(world.getRenderList());\r\n            }\r\n        }\r\n\r\n        return output;\r\n    }\r\n\r\n    updateWorldStats (numGameObjects: number, numRendered: number, numDisplayLists: number, numWorldTransforms: number): void\r\n    {\r\n        const id = this.id;\r\n\r\n        RenderStatsComponent.numGameObjects[id] += numGameObjects;\r\n        RenderStatsComponent.numGameObjectsRendered[id] += numRendered;\r\n        RenderStatsComponent.numDirtyWorldLists[id] += numDisplayLists;\r\n        RenderStatsComponent.numDirtyWorldTransforms[id] += numWorldTransforms;\r\n    }\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\nimport { IRendererConstructor } from '../../renderer/IRendererConstructor';\r\n\r\nexport function GetRenderer (): IRendererConstructor\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.RENDERER);\r\n}\r\n", "import { SetBackgroundColor } from './backgroundcolor/SetBackgroundColor';\r\nimport { SetBanner } from './banner/SetBanner';\r\nimport { SetBatchSize } from './batchsize/SetBatchSize';\r\nimport { SetDefaultOrigin } from './defaultorigin/SetDefaultOrigin';\r\nimport { SetMaxTextures } from './maxtextures/SetMaxTextures';\r\nimport { SetSize } from './size/SetSize';\r\nimport { SetWebGLContext } from './webglcontext';\r\nimport { SetWorldSize } from './worldsize/SetWorldSize';\r\n\r\n//  Phaser 4 defaults\r\n\r\nexport function SetConfigDefaults (): void\r\n{\r\n    SetBackgroundColor(0);\r\n    SetBatchSize(4096);\r\n    SetBanner('Phaser', '4.0.0', 'https://phaser4.io');\r\n    SetMaxTextures(0);\r\n    SetDefaultOrigin(0.5, 0.5);\r\n    SetSize(800, 600, 1);\r\n    SetWebGLContext({\r\n        antialias: true,\r\n        desynchronized: true,\r\n        preserveDrawingBuffer: true\r\n    });\r\n    SetWorldSize(512);\r\n}\r\n", "import { AddToDOM, DOMContentLoaded } from './dom';\r\nimport { Emit, EventEmitter } from './events';\r\n\r\nimport { GameInstance } from './GameInstance';\r\nimport { GameObjectWorld } from './GameObjectWorld';\r\nimport { GetBanner } from './config/banner';\r\nimport { GetGlobalVar } from './config/globalvar';\r\nimport { GetParent } from './config/parent';\r\nimport { GetRenderStatsAsObject } from './scenes';\r\nimport { GetRenderer } from './config/renderer';\r\nimport { IRenderStats } from './scenes/IRenderStats';\r\nimport { IRenderer } from './renderer/IRenderer';\r\nimport { SceneManager } from './scenes/SceneManager';\r\nimport { SetConfigDefaults } from './config/SetConfigDefaults';\r\nimport { TextureManager } from './textures/TextureManager';\r\nimport { addEntity } from 'bitecs';\r\n\r\nexport class Game extends EventEmitter\r\n{\r\n    readonly id: number = addEntity(GameObjectWorld);\r\n\r\n    readonly VERSION: string = '4.0.0-beta1';\r\n\r\n    //  TODO - Consider moving all of these to RenderStats Component\r\n    isBooted: boolean = false;\r\n    isPaused: boolean = false;\r\n\r\n    //  TODO - Allow update to run on different tick to render\r\n    //  TODO - Allow update and render to be called directly\r\n    willUpdate: boolean = true;\r\n    willRender: boolean = true;\r\n\r\n    lastTick: number = 0;\r\n    elapsed: number = 0;\r\n    delta: number = 0;\r\n    fps: number = 0;\r\n    frame: number = 0;\r\n    framems: number = 0;\r\n\r\n    private frames: number = 0;\r\n    private prevFrame: number = 0;\r\n\r\n    renderStats: IRenderStats;\r\n\r\n    renderer: IRenderer;\r\n    textureManager: TextureManager;\r\n    sceneManager: SceneManager;\r\n\r\n    constructor (...settings: { (): void }[])\r\n    {\r\n        super();\r\n\r\n        GameInstance.set(this);\r\n\r\n        SetConfigDefaults();\r\n\r\n        DOMContentLoaded(() => this.boot(settings));\r\n    }\r\n\r\n    boot (settings: { (): void }[]): void\r\n    {\r\n        //  Activate the settings post DOM Content Loaded\r\n        settings.forEach(setting => setting());\r\n\r\n        const renderer = GetRenderer();\r\n\r\n        this.textureManager = new TextureManager();\r\n        this.renderer = new renderer();\r\n        this.sceneManager = new SceneManager();\r\n\r\n        //  Only add to the DOM if they either didn't set a Parent, or expressly set it to be non-null\r\n        //  Otherwise we'll let them add the canvas to the DOM themselves\r\n        const parent = GetParent();\r\n\r\n        if (parent)\r\n        {\r\n            AddToDOM(this.renderer.canvas, parent);\r\n        }\r\n\r\n        const globalVar = GetGlobalVar();\r\n\r\n        if (globalVar && window)\r\n        {\r\n            (window as unknown)[globalVar] = this;\r\n        }\r\n\r\n        this.isBooted = true;\r\n\r\n        GetBanner();\r\n\r\n        Emit(this, 'boot');\r\n\r\n        const now = performance.now();\r\n\r\n        this.lastTick = now;\r\n        this.prevFrame = now;\r\n\r\n        this.renderStats = GetRenderStatsAsObject();\r\n\r\n        this.step(now);\r\n    }\r\n\r\n    pause (): void\r\n    {\r\n        this.isPaused = true;\r\n    }\r\n\r\n    resume (): void\r\n    {\r\n        this.isPaused = false;\r\n\r\n        this.lastTick = performance.now();\r\n    }\r\n\r\n    step (time: number): void\r\n    {\r\n        const renderer = this.renderer;\r\n        const sceneManager = this.sceneManager;\r\n\r\n        this.framems = time - this.lastTick;\r\n\r\n        if (!this.isPaused)\r\n        {\r\n            if (this.willUpdate)\r\n            {\r\n                sceneManager.update(this.delta, time, this.frame);\r\n            }\r\n\r\n            Emit(this, 'update', this.framems, time);\r\n\r\n            if (this.willRender)\r\n            {\r\n                sceneManager.preRender(this.frame);\r\n\r\n                renderer.render(sceneManager.flush, sceneManager.scenes);\r\n\r\n                sceneManager.flush = false;\r\n            }\r\n        }\r\n\r\n        //  Note that privacy.resistFingerprinting can round this value to 100ms or more!\r\n        const now = performance.now();\r\n\r\n        //  How long it took to process this frame\r\n        const delta = now - time;\r\n\r\n        this.frames++;\r\n\r\n        if (now >= this.prevFrame + 1000)\r\n        {\r\n            this.fps = (this.frames * 1000) / (now - this.prevFrame);\r\n            this.prevFrame = now;\r\n            this.frames = 0;\r\n        }\r\n\r\n        this.lastTick = now;\r\n        this.elapsed += delta;\r\n        this.delta = delta;\r\n\r\n        GetRenderStatsAsObject(this.renderStats);\r\n\r\n        this.renderStats.fps = this.fps;\r\n        this.renderStats.delta = delta;\r\n\r\n        Emit(this, 'step');\r\n\r\n        //  The frame always advances by 1 each step (even when paused)\r\n        this.frame++;\r\n\r\n        GameInstance.setFrame(this.frame);\r\n        GameInstance.setElapsed(this.elapsed);\r\n\r\n        requestAnimationFrame(now => this.step(now));\r\n    }\r\n\r\n    destroy (): void\r\n    {\r\n        //  TODO - Code destroy function\r\n    }\r\n}\r\n", "import { Loader } from './Loader';\r\n\r\nexport class File <TData = any, TConfig = any>\r\n{\r\n    key: string;\r\n    url: string;\r\n    responseType: XMLHttpRequestResponseType = 'text';\r\n    crossOrigin: string | undefined = undefined;\r\n\r\n    data: TData;\r\n\r\n    error: ErrorEvent | undefined;\r\n    config: TConfig;\r\n    skipCache: boolean = false;\r\n    hasLoaded: boolean = false;\r\n    loader: Loader;\r\n    load: () => Promise<File<TData>>;\r\n\r\n    constructor (key: string, url: string, config?: TConfig)\r\n    {\r\n        this.key = key;\r\n        this.url = url;\r\n        this.config = config;\r\n    }\r\n}\r\n", "import { Loader } from './Loader';\r\n\r\nexport function GetURL (key: string, url: string, extension: string, loader?: Loader): string\r\n{\r\n    if (!url)\r\n    {\r\n        url = key + extension;\r\n    }\r\n\r\n    if ((/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/).exec(url))\r\n    {\r\n        return url;\r\n    }\r\n    else if (loader)\r\n    {\r\n        return loader.baseURL + loader.path + url;\r\n    }\r\n    else\r\n    {\r\n        return url;\r\n    }\r\n}\r\n", "import { File } from './File';\r\n\r\nexport function ImageTagLoader (file: File<string>): Promise<File<HTMLImageElement>>\r\n{\r\n    const fileCast = file as unknown as File<HTMLImageElement>;\r\n\r\n    fileCast.data = new Image();\r\n\r\n    if (fileCast.crossOrigin)\r\n    {\r\n        fileCast.data.crossOrigin = file.crossOrigin;\r\n    }\r\n\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n        fileCast.data.onload = (): void =>\r\n        {\r\n            if (fileCast.data.onload)\r\n            {\r\n                fileCast.data.onload = null;\r\n                fileCast.data.onerror = null;\r\n                resolve(fileCast);\r\n            }\r\n        };\r\n\r\n        fileCast.data.onerror = (event): void =>\r\n        {\r\n            if (fileCast.data.onload)\r\n            {\r\n                fileCast.data.onload = null;\r\n                fileCast.data.onerror = null;\r\n                fileCast.error = event as ErrorEvent;\r\n                reject(fileCast);\r\n            }\r\n        };\r\n\r\n        fileCast.data.src = file.url;\r\n\r\n        // Image is immediately-available or cached\r\n\r\n        if (fileCast.data.complete && fileCast.data.width && fileCast.data.height)\r\n        {\r\n            fileCast.data.onload = null;\r\n            fileCast.data.onerror = null;\r\n            resolve(fileCast);\r\n        }\r\n    });\r\n}\r\n", "import { File } from '../File';\r\nimport { GetURL } from '../GetURL';\r\nimport { IGLTextureBindingConfig } from '../../renderer/webgl1/textures/IGLTextureBindingConfig';\r\nimport { ImageTagLoader } from '../ImageLoader';\r\nimport { TextureManagerInstance } from '../../textures/TextureManagerInstance';\r\n\r\nexport function ImageFile (key: string, url?: string, glConfig?: IGLTextureBindingConfig): File\r\n{\r\n    const file = new File(key, url);\r\n\r\n    file.load = (): Promise<File> =>\r\n    {\r\n        file.url = GetURL(file.key, file.url, '.png', file.loader);\r\n\r\n        if (file.loader)\r\n        {\r\n            file.crossOrigin = file.loader.crossOrigin;\r\n        }\r\n\r\n        return new Promise((resolve, reject) =>\r\n        {\r\n            const textureManager = TextureManagerInstance.get();\r\n\r\n            if (textureManager.has(file.key))\r\n            {\r\n                resolve(file);\r\n            }\r\n            else\r\n            {\r\n                ImageTagLoader(file).then(file =>\r\n                {\r\n                    textureManager.add(file.key, file.data, glConfig);\r\n\r\n                    resolve(file);\r\n\r\n                }).catch(file =>\r\n                {\r\n                    reject(file);\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    return file;\r\n}\r\n", "import { Emit, EventEmitter } from '../events';\r\n\r\nimport { File } from './File';\r\n\r\nexport class Loader extends EventEmitter\r\n{\r\n    baseURL: string = '';\r\n    path: string = '';\r\n    crossOrigin: string = 'anonymous';\r\n\r\n    //  -1 means load everything at once (only recommended on http/2 servers)\r\n    maxParallelDownloads: number = -1;\r\n\r\n    isLoading: boolean = false;\r\n    progress: number;\r\n\r\n    queue: Set<File>;\r\n    inflight: Set<File>;\r\n    completed: Set<File>;\r\n\r\n    onComplete: Function;\r\n    onError: Function;\r\n\r\n    constructor ()\r\n    {\r\n        super();\r\n\r\n        this.reset();\r\n    }\r\n\r\n    reset (): void\r\n    {\r\n        this.isLoading = false;\r\n\r\n        this.queue = new Set();\r\n        this.inflight = new Set();\r\n        this.completed = new Set();\r\n\r\n        this.progress = 0;\r\n    }\r\n\r\n    add (...file: File[]): this\r\n    {\r\n        file.forEach(entity =>\r\n        {\r\n            entity.loader = this;\r\n\r\n            this.queue.add(entity);\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n    start (): Promise<Loader>\r\n    {\r\n        if (this.isLoading)\r\n        {\r\n            return null;\r\n        }\r\n\r\n        return new Promise((resolve, reject) =>\r\n        {\r\n            this.completed.clear();\r\n            this.progress = 0;\r\n\r\n            if (this.queue.size > 0)\r\n            {\r\n                this.isLoading = true;\r\n\r\n                this.onComplete = resolve;\r\n                this.onError = reject;\r\n\r\n                // console.log('Loader.start');\r\n\r\n                Emit(this, 'start');\r\n\r\n                this.nextFile();\r\n            }\r\n            else\r\n            {\r\n                this.progress = 1;\r\n\r\n                Emit(this, 'complete');\r\n\r\n                resolve(this);\r\n                // onComplete();\r\n            }\r\n        });\r\n\r\n        /*\r\n        if (this.isLoading)\r\n        {\r\n            return this;\r\n        }\r\n\r\n        this.completed.clear();\r\n        this.progress = 0;\r\n\r\n        if (this.queue.size > 0)\r\n        {\r\n            this.isLoading = true;\r\n\r\n            this.onComplete = onComplete;\r\n\r\n            // console.log('Loader.start');\r\n\r\n            Emit(this, 'start');\r\n\r\n            this.nextFile();\r\n        }\r\n        else\r\n        {\r\n            this.progress = 1;\r\n\r\n            Emit(this, 'complete');\r\n\r\n            onComplete();\r\n        }\r\n\r\n        return this;\r\n        */\r\n    }\r\n\r\n    nextFile (): void\r\n    {\r\n        let limit = this.queue.size;\r\n\r\n        if (this.maxParallelDownloads !== -1)\r\n        {\r\n            limit = Math.min(limit, this.maxParallelDownloads) - this.inflight.size;\r\n        }\r\n\r\n        // console.log('Loader.nextFile', limit);\r\n\r\n        if (limit)\r\n        {\r\n            // console.log('Batching', limit, 'files to download');\r\n\r\n            const iterator = this.queue.values();\r\n\r\n            while (limit > 0)\r\n            {\r\n                const file = iterator.next().value;\r\n\r\n                // console.log('Loader.nextFile', file.key, '=>', file.url);\r\n\r\n                this.inflight.add(file);\r\n\r\n                this.queue.delete(file);\r\n\r\n                file.load()\r\n                    .then(\r\n                        (file: File) => this.fileComplete(file)\r\n                    )\r\n                    .catch(\r\n                        (file: File) => this.fileError(file)\r\n                    );\r\n\r\n                limit--;\r\n            }\r\n        }\r\n        else if (this.inflight.size === 0)\r\n        {\r\n            // console.log('Loader inflight zero');\r\n\r\n            this.stop();\r\n\r\n            // window.setTimeout(() => this.stop(), 0);\r\n        }\r\n    }\r\n\r\n    stop (): void\r\n    {\r\n        if (!this.isLoading)\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.isLoading = false;\r\n\r\n        Emit(this, 'complete', this.completed);\r\n\r\n        this.onComplete();\r\n\r\n        this.completed.clear();\r\n    }\r\n\r\n    private updateProgress (file: File): void\r\n    {\r\n        this.inflight.delete(file);\r\n        this.completed.add(file);\r\n\r\n        const totalCompleted = this.completed.size;\r\n        const totalQueued = this.queue.size + this.inflight.size;\r\n\r\n        if (totalCompleted > 0)\r\n        {\r\n            this.progress = totalCompleted / (totalCompleted + totalQueued);\r\n        }\r\n\r\n        Emit(this, 'progress', this.progress, totalCompleted, totalQueued);\r\n\r\n        this.nextFile();\r\n    }\r\n\r\n    private fileComplete (file: File): void\r\n    {\r\n        Emit(this, 'filecomplete', file);\r\n\r\n        this.updateProgress(file);\r\n    }\r\n\r\n    private fileError (file: File): void\r\n    {\r\n        Emit(this, 'fileerror', file);\r\n\r\n        this.updateProgress(file);\r\n    }\r\n\r\n    totalFilesToLoad (): number\r\n    {\r\n        return this.queue.size + this.inflight.size;\r\n    }\r\n\r\n    setBaseURL (url: string = ''): this\r\n    {\r\n        if (url !== '' && url.substr(-1) !== '/')\r\n        {\r\n            url = url.concat('/');\r\n        }\r\n\r\n        this.baseURL = url;\r\n\r\n        return this;\r\n    }\r\n\r\n    setPath (path: string = ''): this\r\n    {\r\n        if (path !== '' && path.substr(-1) !== '/')\r\n        {\r\n            path = path.concat('/');\r\n        }\r\n\r\n        this.path = path;\r\n\r\n        return this;\r\n    }\r\n\r\n    setCORS (crossOrigin: string): this\r\n    {\r\n        this.crossOrigin = crossOrigin;\r\n\r\n        return this;\r\n    }\r\n\r\n    setMaxParallelDownloads (max: number): this\r\n    {\r\n        this.maxParallelDownloads = max;\r\n\r\n        return this;\r\n    }\r\n}\r\n", "import { IBaseWorld } from '../IBaseWorld';\r\n\r\nexport const WorldAfterUpdateEvent: string = 'afterupdate';\r\n\r\nexport type WorldAfterUpdateEventHandler = <T extends IBaseWorld> (delta: number, time: number, world: T) => void;\r\n", "import { IBaseWorld } from '../IBaseWorld';\r\n\r\nexport const WorldBeforeUpdateEvent: string = 'beforeupdate';\r\n\r\nexport type WorldBeforeUpdateEventHandler = <T extends IBaseWorld> (delta: number, time: number, world: T) => void;\r\n", "import { IBaseWorld } from '../IBaseWorld';\r\nimport { IRenderPass } from '../../renderer/webgl1/renderpass/IRenderPass';\r\n\r\nexport const WorldPostRenderEvent: string = 'worldpostrender';\r\n\r\nexport type WorldPostRenderEventHandler = (renderPass: IRenderPass, world: IBaseWorld) => void;\r\n", "import { IBaseWorld } from '../IBaseWorld';\r\nimport { IWorldRenderData } from '../IWorldRenderData';\r\n\r\nexport const WorldRenderEvent: string = 'worldrender';\r\n\r\nexport type WorldRenderEventHandler = (renderData: IWorldRenderData, world: IBaseWorld) => void;\r\n", "import { IBaseWorld } from '../IBaseWorld';\r\n\r\nexport const WorldShutdownEvent: string = 'worldshutdown';\r\n\r\nexport type WorldShutdownEventHandler = (world: IBaseWorld) => void;\r\n", "import { IBaseWorld } from '../IBaseWorld';\r\n\r\nexport const WorldUpdateEvent: string = 'update';\r\n\r\nexport type WorldUpdateEventHandler = <T extends IBaseWorld> (delta: number, time: number, world: T) => void;\r\n", "import { Types, defineComponent } from 'bitecs';\r\n\r\nconst RenderData = defineComponent({\r\n    gameFrame: Types.ui32,\r\n    dirtyFrame: Types.ui32,\r\n    numRendered: Types.ui32,\r\n    numRenderable: Types.ui32\r\n});\r\n\r\nexport const RenderDataComponent = RenderData;\r\n", "import { GameObjectWorld } from '../GameObjectWorld';\r\nimport { RenderDataComponent } from './RenderDataComponent';\r\nimport { addComponent } from 'bitecs';\r\n\r\nexport function AddRenderDataComponent (id: number): void\r\n{\r\n    addComponent(GameObjectWorld, RenderDataComponent, id);\r\n}\r\n", "import { GetWorldID } from '../components/hierarchy';\r\n\r\nexport function CheckDirtyTransforms (worldID: number, list: number[]): boolean\r\n{\r\n    for (let i = 0; i < list.length; i++)\r\n    {\r\n        if (GetWorldID(list[i]) === worldID)\r\n        {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n", "import { CONFIG_DEFAULTS } from '../const';\r\nimport { ConfigStore } from '../ConfigStore';\r\n\r\nexport function GetWorldSize (): number\r\n{\r\n    return ConfigStore.get(CONFIG_DEFAULTS.WORLD_SIZE);\r\n}\r\n", "import { WillCacheChildren, WillRender, WillRenderChildren } from '../components/permissions';\r\n\r\nimport { GameObjectTree } from '../gameobjects';\r\nimport { GetNumChildren } from '../components/hierarchy';\r\nimport { HasDirtyChildCache } from '../components/dirty';\r\nimport { IBaseWorld } from './IBaseWorld';\r\n\r\n//  Rebuilds the World.renderList - a list of all entities that need to render.\r\n\r\n//  This is only called if the World has a dirty display list, otherwise the results\r\n//  are cached between frames\r\n\r\nexport function RebuildWorldList (world: IBaseWorld, parent: number): void\r\n{\r\n    if (WillRender(parent))\r\n    {\r\n        if (world.id !== parent)\r\n        {\r\n            world.addToRenderList(parent, 0);\r\n        }\r\n\r\n        const children = GameObjectTree.get(parent);\r\n\r\n        for (let i = 0; i < children.length; i++)\r\n        {\r\n            const nodeID = children[i];\r\n\r\n            if (WillRender(nodeID))\r\n            {\r\n                if (GetNumChildren(nodeID) > 0 && WillRenderChildren(nodeID))\r\n                {\r\n                    //  Is a Child Cache, like a Render Layer, or doesn't cache children, like a Container\r\n                    if (!WillCacheChildren(nodeID) || HasDirtyChildCache(nodeID))\r\n                    {\r\n                        RebuildWorldList(world, nodeID);\r\n                    }\r\n                    else\r\n                    {\r\n                        world.addToRenderList(nodeID, 0);\r\n                        world.addToRenderList(nodeID, 1);\r\n                    }\r\n                }\r\n                else if (!WillCacheChildren(nodeID))\r\n                {\r\n                    world.addToRenderList(nodeID, 0);\r\n                    world.addToRenderList(nodeID, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (world.id !== parent)\r\n        {\r\n            world.addToRenderList(parent, 1);\r\n        }\r\n    }\r\n}\r\n", "import { Transform2DComponent, UpdateWorldTransform } from '../components/transform';\r\nimport { WillRender, WillRenderChildren } from '../components/permissions';\r\n\r\nimport { GameObjectTree } from '../gameobjects';\r\nimport { GameObjectWorld } from '../GameObjectWorld';\r\nimport { GetNumChildren } from '../components/hierarchy';\r\nimport { IBaseWorld } from './IBaseWorld';\r\nimport { WillTransformChildren } from '../components/permissions/WillTransformChildren';\r\nimport { hasComponent } from 'bitecs';\r\n\r\nexport function RebuildWorldTransforms (world: IBaseWorld, parent: number, transformList: number[], forceUpdate: boolean): void\r\n{\r\n    if (WillRender(parent))\r\n    {\r\n        if (!forceUpdate && transformList.indexOf(parent) > -1)\r\n        {\r\n            forceUpdate = true;\r\n        }\r\n\r\n        if (forceUpdate && hasComponent(GameObjectWorld, Transform2DComponent, parent))\r\n        {\r\n            UpdateWorldTransform(parent);\r\n        }\r\n\r\n        const children = GameObjectTree.get(parent);\r\n\r\n        for (let i = 0; i < children.length; i++)\r\n        {\r\n            const nodeID = children[i];\r\n\r\n            if (WillRender(nodeID))\r\n            {\r\n                if (GetNumChildren(nodeID) > 0)\r\n                {\r\n                    if (WillRenderChildren(nodeID) && WillTransformChildren(nodeID))\r\n                    {\r\n                        RebuildWorldTransforms(world, nodeID, transformList, forceUpdate);\r\n                    }\r\n                }\r\n                else if (forceUpdate || transformList.indexOf(nodeID) > -1)\r\n                {\r\n                    UpdateWorldTransform(nodeID);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n", "import { RenderDataComponent } from './RenderDataComponent';\r\n\r\nexport function ResetWorldRenderData (id: number, gameFrame: number): void\r\n{\r\n    RenderDataComponent.gameFrame[id] = gameFrame;\r\n    RenderDataComponent.dirtyFrame[id] = 0;\r\n    RenderDataComponent.numRendered[id] = 0;\r\n    RenderDataComponent.numRenderable[id] = 0;\r\n}\r\n", "export const SceneDestroyEvent: string = 'destroy';\r\n\r\nexport type SceneDestroyEventHandler = () => void;\r\n", "import * as WorldEvents from './events';\r\n\r\nimport { Begin, Flush } from '../renderer/webgl1/renderpass';\r\nimport { Changed, Query, defineComponent, defineQuery } from 'bitecs';\r\nimport { ClearDirtyDisplayList, HasDirtyChildCache, HasDirtyDisplayList, SetDirtyParents } from '../components/dirty';\r\nimport { Emit, Once } from '../events';\r\nimport { GameObject, GameObjectCache } from '../gameobjects';\r\n\r\nimport { AddRenderDataComponent } from './AddRenderDataComponent';\r\nimport { CheckDirtyTransforms } from './CheckDirtyTransforms';\r\nimport { GameObjectWorld } from '../GameObjectWorld';\r\nimport { GetWorldSize } from '../config/worldsize';\r\nimport { IBaseCamera } from '../camera/IBaseCamera';\r\nimport { IBaseWorld } from './IBaseWorld';\r\nimport { IGameObject } from '../gameobjects/IGameObject';\r\nimport { IRenderPass } from '../renderer/webgl1/renderpass/IRenderPass';\r\nimport { IScene } from '../scenes/IScene';\r\nimport { Mat2dEquals } from '../math/mat2d/Mat2dEquals';\r\nimport { RebuildWorldList } from './RebuildWorldList';\r\nimport { RebuildWorldTransforms } from './RebuildWorldTransforms';\r\nimport { RemoveChildren } from '../display';\r\nimport { ResetWorldRenderData } from './ResetWorldRenderData';\r\nimport { SceneDestroyEvent } from '../scenes/events';\r\nimport { SceneManager } from '../scenes/SceneManager';\r\nimport { SceneManagerInstance } from '../scenes/SceneManagerInstance';\r\nimport { SetWorldID } from '../components/hierarchy';\r\nimport { WillUpdate } from '../components/permissions';\r\nimport { WorldList } from './WorldList';\r\nimport { WorldMatrix2DComponent } from '../components/transform';\r\n\r\nexport class BaseWorld extends GameObject implements IBaseWorld\r\n{\r\n    tag = defineComponent();\r\n\r\n    scene: IScene;\r\n\r\n    sceneManager: SceneManager;\r\n\r\n    camera: IBaseCamera;\r\n\r\n    forceRefresh: boolean = false;\r\n\r\n    is3D: boolean = false;\r\n\r\n    runRender: boolean = false;\r\n\r\n    private renderList: Uint32Array;\r\n    private listLength: number;\r\n\r\n    private totalChildren: number;\r\n    private totalChildrenQuery: Query;\r\n    private dirtyWorldQuery: Query;\r\n\r\n    constructor (scene: IScene)\r\n    {\r\n        super();\r\n\r\n        this.scene = scene;\r\n        this.sceneManager = SceneManagerInstance.get();\r\n\r\n        this.totalChildren = 0;\r\n        this.totalChildrenQuery = defineQuery([ this.tag ]);\r\n        this.dirtyWorldQuery = defineQuery([ this.tag, Changed(WorldMatrix2DComponent) ]);\r\n\r\n        //  * 4 because each Game Object ID is added twice (render and post render) + each has the render type flag\r\n        this.renderList = new Uint32Array(GetWorldSize() * 4);\r\n        this.listLength = 0;\r\n\r\n        const id = this.id;\r\n\r\n        AddRenderDataComponent(id);\r\n\r\n        SetWorldID(id, id);\r\n\r\n        WorldList.get(scene).push(this);\r\n\r\n        Once(scene, SceneDestroyEvent, () => this.destroy());\r\n    }\r\n\r\n    beforeUpdate (delta: number, time: number): void\r\n    {\r\n        Emit(this, WorldEvents.WorldBeforeUpdateEvent, delta, time, this);\r\n    }\r\n\r\n    update (delta: number, time: number): void\r\n    {\r\n        if (!WillUpdate(this.id))\r\n        {\r\n            return;\r\n        }\r\n\r\n        Emit(this, WorldEvents.WorldUpdateEvent, delta, time, this);\r\n\r\n        super.update(delta, time);\r\n    }\r\n\r\n    afterUpdate (delta: number, time: number): void\r\n    {\r\n        Emit(this, WorldEvents.WorldAfterUpdateEvent, delta, time, this);\r\n    }\r\n\r\n    //  Called by RebuildWorldList as it sweeps the world children, looking to see what will render or not\r\n\r\n    //  renderType:\r\n\r\n    //  0 = render\r\n    //  1 = postRender\r\n    addToRenderList (id: number, renderType: number): void\r\n    {\r\n        let len = this.listLength;\r\n        const list = this.renderList;\r\n\r\n        list[len] = id;\r\n        list[len + 1] = renderType;\r\n\r\n        this.listLength += 2;\r\n\r\n        len += 2;\r\n\r\n        if (len === list.length)\r\n        {\r\n            const newList = new Uint32Array(len + (GetWorldSize() * 4));\r\n\r\n            newList.set(list, 0);\r\n\r\n            this.renderList = newList;\r\n        }\r\n    }\r\n\r\n    //  TODO - This isn't used internally - is used by debug panel - move out?\r\n    getRenderList (): IGameObject[]\r\n    {\r\n        const list = this.renderList;\r\n\r\n        const output = [];\r\n\r\n        for (let i = 0; i < this.listLength; i += 2)\r\n        {\r\n            const eid = list[i];\r\n            const type = list[i + 1];\r\n\r\n            if (type === 0)\r\n            {\r\n                output.push(GameObjectCache.get(eid));\r\n            }\r\n        }\r\n\r\n        return output;\r\n    }\r\n\r\n    preRender (gameFrame: number, transformList: number[]): boolean\r\n    {\r\n        const sceneManager = this.sceneManager;\r\n\r\n        if (!this.isRenderable())\r\n        {\r\n            this.runRender = false;\r\n\r\n            sceneManager.updateWorldStats(this.totalChildren, 0, 0, 0);\r\n\r\n            return false;\r\n        }\r\n\r\n        const id = this.id;\r\n\r\n        const dirtyDisplayList = HasDirtyDisplayList(id);\r\n\r\n        ResetWorldRenderData(id, gameFrame);\r\n\r\n        let isDirty = false;\r\n\r\n        if (dirtyDisplayList)\r\n        {\r\n            this.listLength = 0;\r\n\r\n            RebuildWorldList(this, id);\r\n\r\n            ClearDirtyDisplayList(id);\r\n\r\n            isDirty = true;\r\n\r\n            this.totalChildren = this.totalChildrenQuery(GameObjectWorld).length;\r\n        }\r\n\r\n        if (dirtyDisplayList || CheckDirtyTransforms(id, transformList))\r\n        {\r\n            RebuildWorldTransforms(this, id, transformList, false);\r\n\r\n            isDirty = true;\r\n        }\r\n\r\n        this.camera.dirtyRender = false;\r\n\r\n        this.runRender = (this.listLength > 0);\r\n\r\n        const dirtyWorld = this.dirtyWorldQuery(GameObjectWorld).length;\r\n\r\n        sceneManager.updateWorldStats(this.totalChildren, this.listLength / 4, Number(dirtyDisplayList), dirtyWorld);\r\n\r\n        return isDirty;\r\n    }\r\n\r\n    getTotalChildren (): number\r\n    {\r\n        if (HasDirtyDisplayList(this.id))\r\n        {\r\n            this.totalChildren = this.totalChildrenQuery(GameObjectWorld).length;\r\n        }\r\n\r\n        return this.totalChildren;\r\n    }\r\n\r\n    renderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        Emit(this, WorldEvents.WorldRenderEvent, this);\r\n\r\n        const currentCamera = renderPass.current2DCamera;\r\n        const camera = this.camera;\r\n\r\n        if (!currentCamera || !Mat2dEquals(camera.worldTransform, currentCamera.worldTransform))\r\n        {\r\n            Flush(renderPass);\r\n        }\r\n\r\n        Begin(renderPass, camera);\r\n\r\n        const list = this.renderList;\r\n\r\n        for (let i = 0; i < this.listLength; i += 2)\r\n        {\r\n            const eid = list[i];\r\n            const type = list[i + 1];\r\n            const entry = GameObjectCache.get(eid);\r\n\r\n            if (type === 1)\r\n            {\r\n                entry.postRenderGL(renderPass);\r\n            }\r\n            else\r\n            {\r\n                entry.renderGL(renderPass);\r\n            }\r\n        }\r\n    }\r\n\r\n    postRenderGL <T extends IRenderPass> (renderPass: T): void\r\n    {\r\n        if (!this.runRender)\r\n        {\r\n            Begin(renderPass, this.camera);\r\n        }\r\n\r\n        Emit(this, WorldEvents.WorldPostRenderEvent, renderPass, this);\r\n    }\r\n\r\n    shutdown (): void\r\n    {\r\n        //  Clear the display list and reset the camera, but leave\r\n        //  everything in place so we can return to this World again\r\n        //  at a later stage\r\n\r\n        RemoveChildren(this);\r\n\r\n        Emit(this, WorldEvents.WorldShutdownEvent, this);\r\n\r\n        ResetWorldRenderData(this.id, 0);\r\n\r\n        if (this.camera)\r\n        {\r\n            this.camera.reset();\r\n        }\r\n    }\r\n\r\n    destroy (reparentChildren?: IGameObject): void\r\n    {\r\n        super.destroy(reparentChildren);\r\n\r\n        this.shutdown();\r\n\r\n        if (this.camera)\r\n        {\r\n            this.camera.destroy();\r\n        }\r\n\r\n        this.camera = null;\r\n    }\r\n}\r\n", "import { BaseWorld } from './BaseWorld';\r\nimport { IScene } from '../scenes/IScene';\r\nimport { IStaticCamera } from '../camera/IStaticCamera';\r\nimport { IStaticWorld } from './IStaticWorld';\r\nimport { StaticCamera } from '../camera/StaticCamera';\r\n\r\n//  A Static World is designed specifically to have a bounds of a fixed size\r\n//  and a camera that doesn't move at all (no scrolling, rotation, etc)\r\n//  Because it has a fixed size, there is no camera culling enabled.\r\n//  Games that use this kind of world include Pacman, Bejeweled and 2048.\r\n\r\nexport class StaticWorld extends BaseWorld implements IStaticWorld\r\n{\r\n    declare camera: IStaticCamera;\r\n\r\n    constructor (scene: IScene)\r\n    {\r\n        super(scene);\r\n\r\n        this.camera = new StaticCamera();\r\n    }\r\n}\r\n", "import { BackgroundColor, GlobalVar, Parent, Scenes, WebGL } from '../../../../../phaser-genesis/src/config';\r\n\r\nimport { AddChild } from '../../../../../phaser-genesis/src/display/';\r\nimport { Game } from '../../../../../phaser-genesis/src/Game';\r\nimport { ImageFile } from '../../../../../phaser-genesis/src/loader/files/ImageFile';\r\nimport { Loader } from '../../../../../phaser-genesis/src/loader/Loader';\r\nimport { Scene } from '../../../../../phaser-genesis/src/scenes/Scene';\r\nimport { Sprite } from '../../../../../phaser-genesis/src/gameobjects/';\r\nimport { StaticWorld } from '../../../../../phaser-genesis/src/world/StaticWorld';\r\n\r\nclass Demo extends Scene\r\n{\r\n    constructor ()\r\n    {\r\n        super();\r\n\r\n        const loader = new Loader();\r\n\r\n        loader.add(ImageFile('rocket', 'assets/rocket.png'));\r\n\r\n        loader.start().then(() => {\r\n\r\n            const world = new StaticWorld(this);\r\n\r\n            const rocket = new Sprite(400, 300, 'rocket');\r\n\r\n            AddChild(world, rocket);\r\n\r\n        });\r\n    }\r\n}\r\n\r\nnew Game(\r\n    WebGL(),\r\n    Parent('gameParent'),\r\n    GlobalVar('Phaser4'),\r\n    BackgroundColor(0x59010c),\r\n    Scenes(Demo)\r\n);\r\n"],
  "mappings": "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",
  "names": []
}
